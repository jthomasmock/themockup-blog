{
  "hash": "b592c670cc0639ccaa9023b7e7287f9b",
  "result": {
    "markdown": "---\ntitle: \"Building a blog with distill\"\ndescription: |\n  I love simplicity.\nauthor: Thomas Mock\ndate: 08-01-2020\ncategories:\n  - rmarkdown\n  - tidyverse\nimage: modern.jpeg\n---\n\n![Modern building](modern.jpeg)\n\n# `distill`\n\n`distill` is \"Scientific and technical writing, native to the web\". I've gotten lots of requests for creating a `distill` blog from scratch, so I've finally gotten around to building that!\n\nPlease note that the docs for `distill` are already excellent, check them out at: [Distill: Creating a Blog](https://rstudio.github.io/distill/blog.html). This guide is aimed more at the end-to-end process of creating your first blog.  \n\nThe **first** blog is typically the hardest and I've lived through the uncertainty of not really understanding how all the pieces work together. I appreciate the simplicity of `distill` for this very reason - there's less **stuff** to change. At its core `distill` is *just* writing articles for a website/blog!  \n\nI also have owed this post to many people, namely Maëlle Salmon and JD Long as seen on my [Twitter](https://twitter.com/thomas_mock/status/1287936723843002368?s=20).\n\n## Why consider `distill`? \n\n### Pros\n\nNo Hugo dependency, no theme dependency, it’s a very stable format with the ability to customize just enough with a bit of effort. Think a self-hosted `Medium.com` in appearance. Very minimal, lightly themed, focused on writing and code! Again, I think that for someone getting started with creating websites or blogs it's a very good starting point.\n\nWith `distill` you render/knit your articles locally, so you can quickly check your work without having to deploy to a git branch or to production. I do think that eventually it is a good idea to have git branches for previews or collaboration, but that's a lot to ask for an initial first stab at a blog/site.\n\n`distill` also natively supports [citations](https://rstudio.github.io/distill/citations.html), footnotes and asides, a rich auto-generated table of contents, support for HTMLwidgets and/or custom javascript, and a reader friendly typography that is mobile friendly/auto-adapts to mobile.\n\nAnother nicety is the ability to [import a post](https://rstudio.github.io/distill/blog_workflow.html#importing-a-post) with `import_post()`. This means you can take an existing blogpost from another website and import it into your new blog. This \"does not require the original R Markdown document used to author the post—you only need access to the published HTML of a post to import it.\"  \n\nLastly, I am always amazed at the power of both [`blogdown`](https://github.com/rstudio/blogdown) and the more recent [`hugodown`](https://hugodown.r-lib.org/), but you are still relying on a changing version of Hugo and your theme over time. For a personal blog I *personally* prefer `distill` because I can get busy, neglect my blog for a year, come back to write a new post, and it still *`just works`*.\n\n\n### Cons\n\nHowever, `blogdown` and `hugodown` allow dramatically more customization. `distill` is truly an **opinionated** framework, and most of the *easy* customization you can do is fonts, colors, and the navbar. If you expect to create gorgeous custom-layout sites like [education.rstudio.com](education.rstudio.com) or something like Desirée de Leon's [blog](https://desiree.rbind.io/) you’re likely going to be disappointed!\n\nAgain, for my blog I really just wanted a simple but in my opinion elegant minimalist theme, so I was fine with the tradeoff, as I would have built something similar with `blogdown` anyway!\n\n`blogdown` also supports other static site generators like Jekyll in place of Hugo, and a rich set of pre-built themes across the various generators. The structure of the site is extensible as well, so you can generate a site that truly looks like your own creation.\n\nLastly, note that you DO lose some niceties like hugo shortcodes for embedding, and again there is ONLY ONE THEME. Most appearance customization is done at the level of custom CSS.\n\nIf you're still with me, here's how to make it!\n\n---\n\n# Steps to create\n\n## Step 1: Install `distill`  \n* `install.packages(\"distill”)`  \n\n## Step 2: New project from `distill blog`\n\nWhat this is really doing is running the following command, and generates the output below.\n\n::: {.cell}\n\n```{.r .cell-code}\n> distill::create_blog(dir = \"demo-distill\", title = \"Demo Distill\")\nCreating website directory demo-distill\nCreating demo-distill/_site.yml\nCreating demo-distill/index.Rmd\nCreating demo-distill/about.Rmd\nCreating demo-distill/_posts/welcome/welcome.Rmd\n```\n:::\n\nThis will create a home-directory titled whatever you passed for the `dir` argument above, so in our case “demo-distill”. This will contain the `_site.yml`, the `about.rmd` file, the `index.rmd` file, and two folders: `_posts` and `_site`. You should definitely change the `dir` and `title` arguments to whatever you want your site to be named, although you can edit this later with a bit of work.\n\nWhile you’re welcome to explore `_site` I consider it something you SHOULD NOT edit by hand and it will commonly get overridden by rebuilding posts or the whole site. `_site` is essentially where the built site lives as final HTML and other supporting files. The `_posts` folder on the other hand contains all the raw RMDs you will use to create posts.   \n\n## Step 3: Preview\n\nAt this point the website is technically built! You can “preview” the site by going to:  \n`_site` -> `index.html`  \n\nThe `index.html` is essentially the home page for your blog. You can navigate from there in either the RStudio viewer or send it to a web browser just like a normal webpage.  \n\nNote: you can also use the `Build Website` button in RStudio to pull up the whole website. This will re-knit and build the entire site from scratch.\n\n![Preview of the site](preview-site.png)\n\n## Step 4: `_site.yml`\n\nThe `_site.yml` is where you control the overall details about your blog such as the name, title, description, and the navbar. You can add new “tabs” by changing the `_site.yml` file, where the default has a navbar with the site name on the left and a “Home” and “About” Tab on the right.\n\n::: {.cell}\n\n```{.r .cell-code}\nname: \"demo-distill\"\ntitle: \"Demo Distill\"\ndescription: |\n  Demo Distill\noutput_dir: \"_site\"\nnavbar:\n  right:\n    - text: \"Home\"\n      href: index.html\n    - text: \"About\"\n      href: about.html\noutput: distill::distill_article\n```\n:::\n\n## Step 5: Example blog post\n\nNavigate to `_posts` -> `welcome` -> `welcome.rmd`. This is the default \"hello world\" example that comes with you `distill`. Note you can delete that folder completely to drop it from the site, but let's use it as a practice ground first.\n\nThis is still just a RMarkdown file, but it has a specific YAML header, that contains a title, a description, author, date, and outputs to `distill::distill_article()`.\n\nTry adding some more text, code, or other content to this blog post and then knit it! It will generate and show the final output in the RStudio viewer.\n\n::: {.cell}\n\n```{.r .cell-code}\n---\ntitle: \"Welcome to Demo Distill\"\ndescription: |\n  Welcome to our new blog, Demo Distill. We hope you enjoy \n  reading what we have to say!\nauthor:\n  - name: Nora Jones \n    url: https://example.com/norajones\n    affiliation: Spacely Sprockets\n    affiliation_url: https://example.com/spacelysprokets\ndate: 07-27-2020\noutput:\n  distill::distill_article:\n    self_contained: false\n---\n```\n:::\n\n## Step 6: New post\n\nTo create a new post, you can run the following command:  \n`distill::create_post(\"title of post\")`\n\nFull arguments seen below! I'll call out two specific things.  \n\n1. `draft` argument: this prevents the post from being included in the site build until you turn it to `FALSE`. This is useful if you're working on a blogpost over time, or want to come back to finish it later.  \n2. `date_prefix`: this adds a date like `2020-08-01-blog-post` to the front of whatever your `blog-post` name is. This is useful as it also creates a folder structure that sorts properly, and prevents name clashes.\n\nWhenever you run the `create_post()` command it will generate a new folder and the basic RMarkdown doc to get started with the arguments you passed.\n\n```\ncreate_post(\n  title, # mandatory\n  author = \"auto\",\n  slug = \"auto\", # generates a website slug (URL)\n  date_prefix = TRUE, # adds date for sorting\n  draft = FALSE, \n  edit = interactive()\n)\n\n```\n\nNote that a nice overview of the Blog Post Workflow is covered at the [`distill` site](https://rstudio.github.io/distill/blog_workflow.html). This includes collaborating via Git Branches (or using them as previews). I push to my main branch all the time since I'm working solo.\n\n## Step 7: Add to Git\n\nWe’re following instructions at: [Chapter 17 Existing project, GitHub last | Happy Git and GitHub for the useR](https://happygitwithr.com/existing-github-last.html). If you're a Git expert, feel free to use whatever method you like. From my experience setting up a few blogs this is the least painful if you're NOT a Git expert.\n\n:::{.aside}\nYou could also do the create GitHub and then connect it to RStudio route [Chapter 17 Existing project, GitHub last | Happy Git and GitHub for the useR](https://happygitwithr.com/existing-github-last.html#make-and-connect-a-github-repo-option-2).\n:::\n\nNOTE: if you don’t have a GitHub PAT, get one now by following these instructions [B GitHub Personal Access Tokens | Happy Git and GitHub for the useR](https://happygitwithr.com/github-pat.html).\n\nThis will first use Git locally, and then create a new GitHub repo based off your existing local files.  \n\nRun the `usethis::use_git()` command, which will kick off some questions:  \n\n* Don’t commit just yet (Select `3: Not Now`)  \n* Restart RStudio (Select `2: Yes`)  \n\nYou will know it all worked when you have the git logo at the top of RStudio  \n\n![Git logo](git.png)\n\n* Click on the Git logo and commit everything, notice we can’t push since \nwe haven’t configured GitHub yet  \n\n![Initial commit](inital-commit.png)\n\n* `usethis::use_github()` — this works if you have already configured a GitHub Personal Access Token  \n  * Next select https if you don’t have SSH keys  \n  * Say `1: yup` to the title and description  \n  \nExample of what your console commands are and their output seen below!\n  \n::: {.cell}\n\n```{.r .cell-code}\n> usethis::use_github()\n✓ Setting active project to '/Users/thomasmock/demo-distill-blog'\n✓ Checking that current branch is 'master'\nWhich git protocol to use? (enter 0 to exit) \n\n1: ssh   <-- presumes that you have set up ssh keys\n2: https <-- choose this if you don't have ssh keys (or don't know if you do)\n\nSelection: 2\n● Tip: To suppress this menu in future, put\n  `options(usethis.protocol = \"https\")`\n  in your script or in a user- or project-level startup file, '.Rprofile'.\n  Call `usethis::edit_r_profile()` to open it for editing.\n● Check title and description\n  Name:        demo-distill-blog\n  Description: \nAre title and description ok?\n\n1: Yup\n2: No way\n3: Negative\n\nSelection: 1\n✓ Creating GitHub repository\n✓ Setting remote 'origin' to 'https://github.com/jthomasmock/demo-distill-blog.git'\n✓ Pushing 'master' branch to GitHub and setting remote tracking branch\n✓ Opening URL 'https://github.com/jthomasmock/demo-distill-blog'\n```\n:::\n\nOnce this is all run, it should open up a new webpage with your fancy new GitHub repo! Mine opened at: [GitHub - jthomasmock/demo-distill-blog](https://github.com/jthomasmock/demo-distill-blog).\n\n\n## Step 8: Netlify\n\nNow that we have our files on Github, we’re ready to deploy via Netlify!\n\nYou'll need to Create an account at netlify if you don’t have one already. \n\n### Once you're logged in:  \n\n\n* First click on import from Git  \n\n![New site from Git](netlify-new-site.png)\n\n* Click on `Configure netlify on GitHub`, and follow their instructions to allow access, and then add the selected repository you want to send over (demo-distill-blog for me)  \n  * Click Save!  \n  \n![Add specific repo](add-demo-repo.png)\n\n* Click on `demo-distill-blog` or whatever your blog's name is!  \n\n**IMPORTANT**\n\n* Make sure to set the `Publish Directory` to `_site` (so Netlify can find the knitted HTML content)  \n* And then click deploy!  \n\n![Make sure to set publish directory to _site](publish-directory.png)\n\n* You’ll get a fun temporary name (mine was [https://confident-meitner-e6e7dc.netlify.app/](https://confident-meitner-e6e7dc.netlify.app/)). You can change this with the `Domain Settings` to `some-name.netlify.app` or even purchase a custom domain like I did for example `themockup.blog` or what Sharla Gelfand did with `sharla.party`.\n\nNow your website should be up and running! If you don't see a site (it 404s), then I would check to make sure you set the `Publish Director` to `_site`, otherwise it won't know where to find the actual HTML content.\n\n## Step 9: Blog post workflows\n\n> Workflow difference: Furthermore, website pages and root pages of blogs are re-rendered when the site is rebuilt but blog articles are not. Each blog article has to be rendered on its own, with intent. Why? Given that R package upgrades have a tendency to break older code, continuously re-rendering old posts is nearly impossible to do without errors, especially over longer periods of time.\n\nThis means you can \"Build Site\" frequently locally to check out how things work. This is personally the workflow I prefer vs having to commit the output to GitHub or a GitHub branch just to see the preview. You can also knit individual blog posts and they will adapt to your theme, so you can again test local changes whenever you'd like!\n\nTo get things into \"production\" once you have set up Netlify, you'll just need to knit the new blog post, then commit and push to GitHub.\n\nYou can use command line git or the git integration in RStudio.\n\n![Example of git in RStudio](git.png)\n\nBasic idea is click commit and then push.\n\n![Example of a commit](inital-commit.png)\n\n# Next Steps\n\nIf this guide didn't provide enough detail, make sure to check out the [Blog Post Workflow](https://rstudio.github.io/distill/blog_workflow.html) that goes into specific examples, like importing posts from elsewhere, changing URLs, updating old posts, etc.\n\nNow that you have a website running you can either leave it exactly as it is formatted, and just add new posts or you can do a little bit of customization to the \"About Me\", Home page, etc.\n\nA lot of options are already covered at [Distill for R Markdown: Creating a Blog](https://rstudio.github.io/distill/blog.html#next-steps)\n\nA few notes: \n\n* If you want Twitter cards to show up with your images, you need to add a `preview: some_img_name.png` argument to the YAML header for each post.  \n* If you define a custom domain you’ll need to change the [`base_url` at the `_site.yml` file](https://rstudio.github.io/distill/blog.html#Configuration)  \n\n\n## Customize Appearance \n\nProbably of most interest to folks is customizing the appearance of the blog.\n\n* In general the strategy you should use is to inspect parts of the website for the class names and then you can apply CSS to change it  \n* A nice overview of the \"Inspect\" tool is covered [here](https://developers.google.com/web/tools/chrome-devtools/open)  \n* HTML/CSS classes and selectors are covered in the Mozilla docs [here](https://developer.mozilla.org/en-US/docs/Web/CSS/Class_selectors)  \n* To use a custom CSS file, you’ll need to change the output in `_site.yml` to include the below:\n\n::: {.cell}\n\n```{.r .cell-code}\noutput: \n  distill::distill_article:\n    css: styles.css\n```\n:::\n\nI keep my `styles.css` file at the same level as my `_site.yml` file.\n\n### Example changes\n\nYou'll need to store all of these in your `styles.css` file, and note that some of them depend on other changes - specifically to use custom fonts you ALSO have to import the custom fonts!\n\n#### Bold silver title, pink background\n\n::: {.cell}\n\n```{.r .cell-code}\n.distill-site-nav {\n  color: #C0C0C0; \n  background-color: #FF1493;\n  font-size: 20px;\n  font-weight: 900;\n}\n```\n:::\n\n#### Want entire webpage to be \"pink\"?\n\n```\nbody {\n  background-color: #FF1493;\n}\n```\n\n#### Change hover color in nav bar\n\n```\n.distill-site-nav a:hover {\n  color: #383838;\n}\n```\n\n#### Change header font or color\n```\n/* Change appearance of headers */\nh1, h2, h3, h4, h5 {\n  font-family: 'Fira Mono', sans-serif;\n  color: color: #383838;\n}\n```\n\n#### Import custom fonts from Google\n\n```\n/* Import fonts from Google's API */\n@import url('https://fonts.googleapis.com/css2?family=Lato');\n@import url('https://fonts.googleapis.com/css2?family=Fira+Mono');\n```\n\n#### Use those fonts throughout\n```\n/* Use specific font in the body of the text */\nhtml, body, p {\n  \n  font-family: 'Lato', sans-serif;\n  font-weight: 200;\n  line-height: 1.3; \n  font-size: 1.0em;\n  color: #333333;\n  font-style: normal;\n  \n}\n```\n\n#### Change in-line code\n```\n/* Change the appearance of in-line code chunks */\ncode {\n  font-family: 'Fira Mono', sans-serif;\n  color: #383838;\n  background: #F5F5F5;\n  font-weight: 400;\n  font-size: 0.9em;\n}\n```\n\n#### Change code chunk colors\n```\nd-code {\n  background: grey;\n}\n```\n\n\n:::{.callout-tip collapse=\"true\"}\n## Expand for Session Info\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n```\n─ Session info ───────────────────────────────────────────────────────────────\n setting  value\n version  R version 4.1.1 (2021-08-10)\n os       macOS Monterey 12.2.1\n system   aarch64, darwin20\n ui       X11\n language (EN)\n collate  en_US.UTF-8\n ctype    en_US.UTF-8\n tz       America/Chicago\n date     2022-04-25\n pandoc   2.18 @ /Applications/RStudio.app/Contents/MacOS/quarto/bin/tools/ (via rmarkdown)\n quarto   0.9.294 @ /usr/local/bin/quarto\n\n─ Packages ───────────────────────────────────────────────────────────────────\n package     * version date (UTC) lib source\n sessioninfo * 1.2.2   2021-12-06 [1] CRAN (R 4.1.1)\n\n [1] /Library/Frameworks/R.framework/Versions/4.1-arm64/Resources/library\n\n──────────────────────────────────────────────────────────────────────────────\n```\n:::\n:::\n\n:::",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}