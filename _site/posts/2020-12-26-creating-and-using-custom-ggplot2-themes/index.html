<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-0.9.294">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<meta name="author" content="Thomas Mock">
<meta name="description" content="The best way to make each plot your own.">
<title>The MockUp - Creating and using custom ggplot2 themes</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>
<script src="../../site_libs/quarto-nav/quarto-nav.js"></script><script src="../../site_libs/quarto-nav/headroom.min.js"></script><script src="../../site_libs/clipboard/clipboard.min.js"></script><meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script><script src="../../site_libs/quarto-search/fuse.min.js"></script><script src="../../site_libs/quarto-search/quarto-search.js"></script><link href="../../themockup.png" rel="icon" type="image/png">
<script src="../../site_libs/quarto-html/quarto.js"></script><script src="../../site_libs/quarto-html/popper.min.js"></script><script src="../../site_libs/quarto-html/tippy.umd.min.js"></script><script src="../../site_libs/quarto-html/anchor.min.js"></script><link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link id="quarto-text-highlighting-styles" href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script><link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script><link rel="stylesheet" href="../../styles.css">
<meta property="og:title" content="The MockUp - Creating and using custom ggplot2 themes">
<meta property="og:description" content="The best way to make each plot your own.
">
<meta property="og:image" content="https://themockup.blog/posts/2020-12-26-creating-and-using-custom-ggplot2-themes/preview.png">
<meta property="og:site-name" content="The MockUp">
<meta property="og:image:height" content="778">
<meta property="og:image:width" content="1000">
<meta name="twitter:title" content="The MockUp - Creating and using custom ggplot2 themes">
<meta name="twitter:description" content="The best way to make each plot your own.
">
<meta name="twitter:image" content="https://themockup.blog/posts/2020-12-26-creating-and-using-custom-ggplot2-themes/themockup.png">
<meta name="twitter:creator" content="@thomas_mock">
<meta name="twitter:card" content="summary_large_image">
</head>
<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="navbar navbar-expand-lg navbar-dark "><div class="navbar-container container-fluid">
      <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">The MockUp</span>
  </a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
<li class="nav-item">
    <a class="nav-link" href="../../index.html">Blog</a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../static/resources/resources.html">Resources</a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../about.html">About</a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/jthomasmock"><i class="bi bi-github" role="img">
</i> 
 </a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/thomas_mock"><i class="bi bi-twitter" role="img">
</i> 
 </a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="../../index.xml"><i class="bi bi-rss" role="img">
</i> 
 </a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://jthomasmock.github.io/gtExtras/"><i class="bi bi-table" role="img">
</i> 
 </a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://drinksbytom.com"><i class="bi bi-cup-straw" role="img">
</i> 
 </a>
  </li>  
</ul>
<div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav></header><!-- content --><header id="title-block-header" class="quarto-title-block default page-columns page-full"><div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Creating and using custom ggplot2 themes</h1>
                          <div class="quarto-categories">
                <div class="quarto-category">ggplot2</div>
                <div class="quarto-category">data visualization</div>
                <div class="quarto-category">theme</div>
                <div class="quarto-category">tidyverse</div>
                <div class="quarto-category">NFL</div>
                <div class="quarto-category">espnscrapeR</div>
              </div>
                  </div>
  </div>
    
  <div>
    <div class="description">
      <p>The best way to make each plot your own.</p>
    </div>
  </div>




  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Thomas Mock </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">12-26-2020</p>
      </div>
    </div>
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc"><h2 id="toc-title">On this page</h2>
   
  <ul>
<li>
<a href="#graphs-for-communication" id="toc-graphs-for-communication" class="nav-link active" data-scroll-target="#graphs-for-communication">Graphs for Communication</a>
  <ul class="collapse">
<li>
<a href="#themes" id="toc-themes" class="nav-link" data-scroll-target="#themes">Themes</a>
  <ul class="collapse">
<li><a href="#theme_grey" id="toc-theme_grey" class="nav-link" data-scroll-target="#theme_grey"><code>theme_grey()</code></a></li>
  <li><a href="#theme_minimal" id="toc-theme_minimal" class="nav-link" data-scroll-target="#theme_minimal"><code>theme_minimal()</code></a></li>
  <li><a href="#theme_bw" id="toc-theme_bw" class="nav-link" data-scroll-target="#theme_bw"><code>theme_bw()</code></a></li>
  <li><a href="#other-themes" id="toc-other-themes" class="nav-link" data-scroll-target="#other-themes">Other themes</a></li>
  </ul>
</li>
  <li>
<a href="#ggplot2-theme-components" id="toc-ggplot2-theme-components" class="nav-link" data-scroll-target="#ggplot2-theme-components"><code>ggplot2</code> theme components</a>
  <ul class="collapse">
<li><a href="#ggplot2-theme-elements" id="toc-ggplot2-theme-elements" class="nav-link" data-scroll-target="#ggplot2-theme-elements"><code>ggplot2</code> theme elements</a></li>
  </ul>
</li>
  </ul>
</li>
  <li><a href="#inspiration" id="toc-inspiration" class="nav-link" data-scroll-target="#inspiration">Inspiration</a></li>
  <li><a href="#a-dataviz-journey" id="toc-a-dataviz-journey" class="nav-link" data-scroll-target="#a-dataviz-journey">A DataViz Journey</a></li>
  <li>
<a href="#point-pts_diff" id="toc-point-pts_diff" class="nav-link" data-scroll-target="#point-pts_diff">Point pts_diff</a>
  <ul class="collapse">
<li><a href="#playoff-teams" id="toc-playoff-teams" class="nav-link" data-scroll-target="#playoff-teams">Playoff Teams</a></li>
  <li><a href="#add-some-color" id="toc-add-some-color" class="nav-link" data-scroll-target="#add-some-color">Add some color</a></li>
  <li><a href="#refine-labels" id="toc-refine-labels" class="nav-link" data-scroll-target="#refine-labels">Refine labels</a></li>
  <li><a href="#premade-themes" id="toc-premade-themes" class="nav-link" data-scroll-target="#premade-themes">Premade themes</a></li>
  <li>
<a href="#custom-themes" id="toc-custom-themes" class="nav-link" data-scroll-target="#custom-themes">Custom Themes</a>
  <ul class="collapse">
<li><a href="#theme" id="toc-theme" class="nav-link" data-scroll-target="#theme"><code>theme()</code></a></li>
  <li><a href="#theme_-replace" id="toc-theme_-replace" class="nav-link" data-scroll-target="#theme_-replace"><code>theme_?? %+replace%</code></a></li>
  </ul>
</li>
  <li>
<a href="#same-data-different-story" id="toc-same-data-different-story" class="nav-link" data-scroll-target="#same-data-different-story">Same Data, Different Story</a>
  <ul class="collapse">
<li><a href="#add-context" id="toc-add-context" class="nav-link" data-scroll-target="#add-context">Add context</a></li>
  </ul>
</li>
  <li>
<a href="#sdds-2-rise-of-2020" id="toc-sdds-2-rise-of-2020" class="nav-link" data-scroll-target="#sdds-2-rise-of-2020">SDDS 2: Rise of 2020</a>
  <ul class="collapse">
<li><a href="#add-context-1" id="toc-add-context-1" class="nav-link" data-scroll-target="#add-context-1">Add Context</a></li>
  <li><a href="#team-vs-seed" id="toc-team-vs-seed" class="nav-link" data-scroll-target="#team-vs-seed">Team vs Seed</a></li>
  </ul>
</li>
  </ul>
</li>
  <li>
<a href="#blitzing" id="toc-blitzing" class="nav-link" data-scroll-target="#blitzing">Blitzing</a>
  <ul class="collapse">
<li><a href="#get-the-data" id="toc-get-the-data" class="nav-link" data-scroll-target="#get-the-data">Get the data</a></li>
  <li><a href="#initial-plot" id="toc-initial-plot" class="nav-link" data-scroll-target="#initial-plot">Initial Plot</a></li>
  <li><a href="#add-color" id="toc-add-color" class="nav-link" data-scroll-target="#add-color">Add color</a></li>
  <li><a href="#add-labels" id="toc-add-labels" class="nav-link" data-scroll-target="#add-labels">Add labels</a></li>
  </ul>
</li>
  <li>
<a href="#pass-affected-rate" id="toc-pass-affected-rate" class="nav-link" data-scroll-target="#pass-affected-rate">Pass Affected Rate</a>
  <ul class="collapse">
<li>
<a href="#slope-chart" id="toc-slope-chart" class="nav-link" data-scroll-target="#slope-chart">Slope Chart</a>
  <ul class="collapse">
<li><a href="#initial-slope-chart" id="toc-initial-slope-chart" class="nav-link" data-scroll-target="#initial-slope-chart">Initial Slope Chart</a></li>
  <li><a href="#add-theme-and-context" id="toc-add-theme-and-context" class="nav-link" data-scroll-target="#add-theme-and-context">Add theme and context</a></li>
  </ul>
</li>
  <li>
<a href="#barbell" id="toc-barbell" class="nav-link" data-scroll-target="#barbell">Barbell</a>
  <ul class="collapse">
<li><a href="#theme-and-context" id="toc-theme-and-context" class="nav-link" data-scroll-target="#theme-and-context">Theme and context</a></li>
  </ul>
</li>
  </ul>
</li>
  <li><a href="#the-end" id="toc-the-end" class="nav-link" data-scroll-target="#the-end">The end</a></li>
  </ul></nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content"><section id="graphs-for-communication" class="level1"><h1>Graphs for Communication</h1>
<p><code>ggplot2</code> is an R package for producing statistical graphics, and is an implementation of the “Grammar of Graphics” by Leland Wilkinson. As such the primary way that folks use <code>ggplot2</code> initially is for robust, fast, and easy exploratory data analysis or the creation of scientific/statistical plots while analyzing data. Here the primary use-case is for the data scientist themself, and the quick iteration of graphs. Relatively little time is spent on adjusting the theme or on making the graph “beautiful” as it may be ephemeral, or simply a visual check of the underlying relationships.</p>
<p>The next stage in many analyses is creating a graphic primarily intended for <em>others</em> to consume. At this point, the graphic needs to be more engaging, and often needs to be more focused on telling a “story” or reinforcing some point that you are trying to present from the underlying data.</p>
<p>In this blogpost, I’ll be covering some example themes, how to create and apply a theme, and then walk through some real life applications. I’ll leave larger color theory, and creating your own <code>ggplot2</code> color scales for a future blogpost.</p>
<section id="themes" class="level2"><h2 class="anchored" data-anchor-id="themes">Themes</h2>
<p><code>ggplot2</code> is remarkably extensible and customizable both through specific graphical components (<code>geom_</code>, <code>scale_</code>, <code>aes</code>, etc) or by theme components (grid lines, background colors, fonts, etc). There is also the concept of fully established themes which change many theme components at once.</p>
<p>First, we’ll get some data and load our libraries of interest.</p>
<div class="cell">
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/jthomasmock/espnscrapeR">espnscrapeR</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/jrnold/ggthemes">ggthemes</a></span><span class="op">)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We’re returning some data on NFL win rates, playoff seeding, and point differentials (ie difference between points given up and points scored).</p>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-2_83f5a3d335e9f8a84b772b1f96fb4495">
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span class="va">nfl_stand</span> <span class="op">&lt;-</span> <span class="fl">2014</span><span class="op">:</span><span class="fl">2020</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html">map_dfr</a></span><span class="op">(</span><span class="va">get_nfl_standings</span><span class="op">)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Returning 2014</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Returning 2015</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Returning 2016</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Returning 2017</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Returning 2018</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Returning 2019</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Returning 2020</code></pre>
</div>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span class="va">diff_df</span> <span class="op">&lt;-</span> <span class="va">nfl_stand</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span>season <span class="op">=</span> <span class="va">season</span>, <span class="va">conf</span>, <span class="va">team_name</span>, team_abb <span class="op">=</span> <span class="va">team_abb</span>, <span class="va">team_logo</span>, <span class="va">win_pct</span>, <span class="va">pts_diff</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="va">season</span>, <span class="va">conf</span>, <span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html">desc</a></span><span class="op">(</span><span class="va">win_pct</span><span class="op">)</span><span class="op">)</span>

<span class="va">diff_df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 224 × 7
   season conf  team_name team_abb team_logo                    win_pct pts_diff
    &lt;int&gt; &lt;chr&gt; &lt;chr&gt;     &lt;chr&gt;    &lt;chr&gt;                          &lt;dbl&gt;    &lt;dbl&gt;
 1   2014 AFC   Patriots  NE       https://a.espncdn.com/i/tea…   0.75       155
 2   2014 AFC   Broncos   DEN      https://a.espncdn.com/i/tea…   0.75       128
 3   2014 AFC   Steelers  PIT      https://a.espncdn.com/i/tea…   0.688       68
 4   2014 AFC   Colts     IND      https://a.espncdn.com/i/tea…   0.688       89
 5   2014 AFC   Bengals   CIN      https://a.espncdn.com/i/tea…   0.656       21
 6   2014 AFC   Ravens    BAL      https://a.espncdn.com/i/tea…   0.625      107
 7   2014 AFC   Chiefs    KC       https://a.espncdn.com/i/tea…   0.562       72
 8   2014 AFC   Texans    HOU      https://a.espncdn.com/i/tea…   0.562       65
 9   2014 AFC   Chargers  SD       https://a.espncdn.com/i/tea…   0.562        0
10   2014 AFC   Bills     BUF      https://a.espncdn.com/i/tea…   0.562       54
# … with 214 more rows</code></pre>
</div>
</div>
<section id="theme_grey" class="level3"><h3 class="anchored" data-anchor-id="theme_grey"><code>theme_grey()</code></h3>
<p>The default <code>ggplot2</code> theme is <code><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_grey()</a></code>, it’s major components are a grey <code>panel.background</code>, white <code>panel.grid</code> lines, coupled with a white <code>plot.background</code>, black <code>text</code> and a default black color for <code>geom_</code> components.</p>
<blockquote class="blockquote">
<p>The signature ggplot2 theme with a grey background and white gridlines, designed to put the data forward yet make comparisons easy.</p>
</blockquote>
<div class="cell">
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">diff_df</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">pts_diff</span>, y <span class="op">=</span> <span class="va">win_pct</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section><section id="theme_minimal" class="level3"><h3 class="anchored" data-anchor-id="theme_minimal"><code>theme_minimal()</code></h3>
<p>This theme drops the <code>panel.background</code> and no longer has the visual separation between the panel vs plot areas.</p>
<blockquote class="blockquote">
<p>A minimalistic theme with no background annotations.</p>
</blockquote>
<div class="cell">
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">diff_df</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">pts_diff</span>, y <span class="op">=</span> <span class="va">win_pct</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal</a></span><span class="op">(</span><span class="op">)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section><section id="theme_bw" class="level3"><h3 class="anchored" data-anchor-id="theme_bw"><code>theme_bw()</code></h3>
<p>It’s major components are a white <code>panel.background</code>, grey <code>panel.grid</code> lines, coupled with a white <code>plot.background</code>, black <code>text</code> and a default black color for <code>geom_</code> components.</p>
<blockquote class="blockquote">
<p>The classic dark-on-light ggplot2 theme. May work better for presentations displayed with a projector.</p>
</blockquote>
<div class="cell">
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">diff_df</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">pts_diff</span>, y <span class="op">=</span> <span class="va">win_pct</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_bw</a></span><span class="op">(</span><span class="op">)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section><section id="other-themes" class="level3"><h3 class="anchored" data-anchor-id="other-themes">Other themes</h3>
<p>There are several other themes built into <code>ggplot2</code>, and other packages that provide new themes. The most well-known external theme package is <code>ggthemes</code>, which provides a number of Data Journalism themes such as <code><a href="https://rdrr.io/pkg/ggthemes/man/theme_few.html">theme_few()</a></code>, <code><a href="https://rdrr.io/pkg/ggthemes/man/theme_fivethirtyeight.html">theme_fivethirtyeight()</a></code>, <code><a href="https://rdrr.io/pkg/ggthemes/man/theme_economist.html">theme_economist()</a></code> and others.</p>
<p>These are implementations of very opinionated frameworks, and highlight the extensibility of the <code>ggplot2</code> theme components.</p>
<div class="cell">
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">diff_df</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">pts_diff</span>, y <span class="op">=</span> <span class="va">win_pct</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">ggthemes</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/ggthemes/man/theme_fivethirtyeight.html">theme_fivethirtyeight</a></span><span class="op">(</span><span class="op">)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">diff_df</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">pts_diff</span>, y <span class="op">=</span> <span class="va">win_pct</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">ggthemes</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/ggthemes/man/theme_economist.html">theme_economist</a></span><span class="op">(</span><span class="op">)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section></section><section id="ggplot2-theme-components" class="level2"><h2 class="anchored" data-anchor-id="ggplot2-theme-components">
<code>ggplot2</code> theme components</h2>
<p>You can always change specific theme components one at a time or in conjunction with a proper <code>theme_</code>. For example, we can apply the <code><a href="https://rdrr.io/pkg/ggthemes/man/theme_fivethirtyeight.html">theme_fivethirtyeight()</a></code> theme and then change one of the theme components individually.</p>
<div class="cell">
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">diff_df</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">pts_diff</span>, y <span class="op">=</span> <span class="va">win_pct</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">ggthemes</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/ggthemes/man/theme_fivethirtyeight.html">theme_fivethirtyeight</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span>
    panel.grid.major <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_line</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"red"</span><span class="op">)</span>
  <span class="op">)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>There are dozens of customizable theme components. They are outlined in the <a href="https://ggplot2.tidyverse.org/reference/theme.html"><code>ggplot2</code> documentation</a>. A deep walkthrough of a lot of <code>ggplot2</code> customizations can be found on <a href="https://cedricscherer.netlify.app/2019/08/05/a-ggplot2-tutorial-for-beautiful-plotting-in-r/#toc">Cedric Scherer’s blog</a>. Kieran Healy’s <a href="https://socviz.co/refineplots.html#refineplots">Data Visualization: A practical introduction</a> covers additional considerations for refining and customizing plots and why certain decisions are good.</p>
<section id="ggplot2-theme-elements" class="level3"><h3 class="anchored" data-anchor-id="ggplot2-theme-elements">
<code>ggplot2</code> theme elements</h3>
<p>For each of the theme components there are one of a few theme <a href="https://ggplot2.tidyverse.org/reference/element.html"><strong>elements</strong></a>. For example, to change the axis grid line color, you’ll use <code><a href="https://ggplot2.tidyverse.org/reference/element.html">element_line()</a></code> as in the following pseudocode:</p>
<pre><code>plot_object +
  theme(panel.grid.major = element_line(color = "red"))</code></pre>
<p>For the theme elements, there are:</p>
<ul>
<li><p><code><a href="https://ggplot2.tidyverse.org/reference/element.html">element_line()</a></code> - change line element components, takes arguments like <code>color</code>, <code>size</code>, <code>linetype</code> (dotted, dashed, solid, etc)</p></li>
<li><p><code><a href="https://ggplot2.tidyverse.org/reference/element.html">element_rect()</a></code> - change rectangular components like plot backgrounds, legend backgrounds, etc, takes arguments like <code>fill</code>, <code>color</code>, <code>size</code></p></li>
<li><p><code><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text()</a></code> - change text components like axis labels, titles, and takes arguments like <code>family</code> (font family), <code>face</code> (bold, italics, etc), <code>hjust</code>/<code>vjust</code> (horizontal or vertical alignment), <code>color</code>, etc</p></li>
<li><p><code><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank()</a></code> - completely remove an element by name</p></li>
<li><p><code><a href="https://ggplot2.tidyverse.org/reference/element.html">margin()</a></code> - adjust margins of an element, can be used within some other theme componenets, and takes arguments of <code>t</code> (top), <code>r</code> (right), <code>b</code> (bottom), <code>l</code> (left), and <code>unit</code> (unit such as points, in, cm, etc)</p></li>
<li><p><code><a href="https://ggplot2.tidyverse.org/reference/element.html">rel()</a></code> - relative sizing of elements, useful for text especially, ie choosing a base font size and scaling the titles vs body fonts relative to each other</p></li>
</ul>
<p>You can always refer to the <a href="https://ggplot2.tidyverse.org/reference/theme.html"><code>ggplot2</code> documentation</a> for which theme element to use, but you can also typically “<em>guess</em>” which is the right one to use by referring to the output <em>type</em> (ie text uses <code><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text()</a></code>, lines use <code><a href="https://ggplot2.tidyverse.org/reference/element.html">element_line()</a></code>, etc).</p>
<hr></section></section></section><section id="inspiration" class="level1"><h1>Inspiration</h1>
<p>For inspiration, I often find that <a href="https://austinkleon.com/steal/">“Stealing like an artist”</a> is my favorite approach.</p>
<blockquote class="blockquote">
<p>Your job is to collect good ideas. The more good ideas you collect, the more you can choose from to be influenced by.</p>
</blockquote>
<blockquote class="blockquote">
<p>Plagiarism is trying to pass someone else’s work off as your own. Copying is about reverse-engineering.</p>
</blockquote>
<p>With this approach, you are allowing yourself to be influenced by “good” work, and learning how to implement the approaches of experts while making it your own. I find that FiveThirtyEight as an organization produces great graphics and tables, and thus I take a lot of influence from their approaches with my own novel data. It helps that they do produce some of their graphics in <code>ggplot2</code>!</p>
<p>That being said, projects like <a href="http://tidytuesday.rocks/"><code>#TidyTuesday</code></a> or <code>#StorytellingWithData</code> can also give you a much more focused batch of concepts to borrow from as the focus is on applying concepts as a community with either a similar output or similar starting data.</p>
<ul>
<li><p><a href="https://fivethirtyeight.com/features/the-56-best-and-weirdest-charts-we-made-in-2019/">FiveThirtyEight’s Best charts of the year</a></p></li>
<li><p><a href="https://www.nytimes.com/2020/06/10/learning/over-60-new-york-times-graphs-for-students-to-analyze.html">New York Time’s Graphs of 2020</a></p></li>
<li><p><a href="http://www.storytellingwithdata.com/blog/2018/6/19/june-swdchallenge-recap-slopegraphs">Storytelling with Data’s challenges</a></p></li>
<li><p><a href="http://tidytuesday.rocks/"><code>TidyTuesday.rocks</code></a> - a shiny app that collects <code>#TidyTuesday</code> dataviz and lets you interact with them by a specific topic/week</p></li>
</ul>
<hr></section><section id="a-dataviz-journey" class="level1"><h1>A DataViz Journey</h1>
<p>Let’s begin our journey by telling two stories, and working through the refinement of plots to help tell your story.</p>
<p>Story one is a continuation of our data above. We’re exploring the relationship between scoring points (offense), preventing the opposing team from scoring points (defense), and how this relates to wins. This is a relatively obvious story, but has some neat “sub” stories we can look into.</p>
<p>The second story will be about a specific team (the Indianapolis Colts), and how their approach to defense is effective while being very different than other teams.</p>
<p>Note that since this is using <em>live</em> data feeds, to recreate the plots exactly as they are you’d need to read in the data I used below.</p>
<div class="cell">
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span class="va">diff_df</span> <span class="op">&lt;-</span> <span class="fu">readr</span><span class="fu">::</span><span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span><span class="op">(</span><span class="st">"https://raw.githubusercontent.com/jthomasmock/radix_themockup/master/static/diff_df.csv"</span><span class="op">)</span>
<span class="va">combo_pass</span> <span class="op">&lt;-</span> <span class="fu">readr</span><span class="fu">::</span><span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span><span class="op">(</span><span class="st">"https://raw.githubusercontent.com/jthomasmock/radix_themockup/master/static/combo_pass.csv"</span><span class="op">)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr></section><section id="point-pts_diff" class="level1"><h1>Point pts_diff</h1>
<p>Point differential is a simple metric (points scored - points against) that is pretty predictive of overall win rate and making the playoffs. Teams that score more points than the other team typically win more games, which is fairly obvious!</p>
<p>However simply returning the plot below may not be as engaging to a lay audience or tell some of the nuance of what happens in individual seasons.</p>
<details><summary>
Data Collection and Plot
</summary><div class="cell" data-hash="index_cache/html/scrape data_9e3b012f41e6201007f199805f821e75">
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span class="va">nfl_stand</span> <span class="op">&lt;-</span> <span class="fl">2014</span><span class="op">:</span><span class="fl">2020</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html">map_dfr</a></span><span class="op">(</span><span class="va">get_nfl_standings</span><span class="op">)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Returning 2014</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Returning 2015</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Returning 2016</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Returning 2017</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Returning 2018</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Returning 2019</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Returning 2020</code></pre>
</div>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span class="va">nfl_stand_plot</span> <span class="op">&lt;-</span> <span class="va">nfl_stand</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">pts_diff</span>, y <span class="op">=</span> <span class="va">win_pct</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_smooth.html">geom_smooth</a></span><span class="op">(</span>method <span class="op">=</span> <span class="st">"lm"</span><span class="op">)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</details><div class="cell">
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span class="va">nfl_stand_plot</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>That plot told us there is a fairly linear response between having a larger point differential and having a better win rate, but does winning games and scoring more points always guarantee a playoff spot or even possibly missing the playoffs?</p>
<section id="playoff-teams" class="level2"><h2 class="anchored" data-anchor-id="playoff-teams">Playoff Teams</h2>
<p>Let’s add a color that shows where playoff teams fit into the big picture. Note that in 2020 teams with a ranking of 7th or better make the playoffs vs previously only the top 6 teams made it.</p>
<details><summary>
Add Color
</summary><div class="cell" data-fig.dim="[8,6]">
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span class="va">nfl_stand</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>
    color <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html">case_when</a></span><span class="op">(</span>
      <span class="va">season</span> <span class="op">&lt;</span> <span class="fl">2020</span> <span class="op">&amp;</span> <span class="va">seed</span> <span class="op">&lt;=</span> <span class="fl">6</span> <span class="op">~</span> <span class="st">"blue"</span>,
      <span class="va">season</span> <span class="op">==</span> <span class="fl">2020</span> <span class="op">&amp;</span> <span class="va">seed</span> <span class="op">&lt;=</span> <span class="fl">7</span> <span class="op">~</span> <span class="st">"blue"</span>,
      <span class="cn">TRUE</span> <span class="op">~</span>  <span class="st">"red"</span>
    <span class="op">)</span>
  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">pts_diff</span>, y <span class="op">=</span> <span class="va">win_pct</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html">geom_vline</a></span><span class="op">(</span>xintercept <span class="op">=</span> <span class="fl">0</span>, size <span class="op">=</span> <span class="fl">0.75</span>, color <span class="op">=</span> <span class="st">"#737373"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>color <span class="op">=</span> <span class="va">color</span><span class="op">)</span><span class="op">)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/nfl-stand-color-1.png" class="img-fluid" width="4000"></p>
</div>
</div>
</details><div class="cell" data-fig.dim="[8,6]">
<div class="cell-output-display">
<p><img src="index_files/figure-html/nfl-stand-color-1.png" class="img-fluid" width="4000"></p>
</div>
</div>
</section><section id="add-some-color" class="level2"><h2 class="anchored" data-anchor-id="add-some-color">Add some color</h2>
<p>Uh-oh… what happened with the colors??? We told it to be blue and red but it reversed the colors!</p>
<p>We needed a <code><a href="https://ggplot2.tidyverse.org/reference/scale_identity.html">scale_color_identity()</a></code> call. While we’re adding color, let’s also add some “color commentary” of the axes, a title, and a source caption. There we go! Now we can show that: “Playoff teams typically have a positive point differential”. I’ll also bump up the size of the points to bump up the “ink to white” ratio and some transparency (alpha) so that overlapping points are clear.</p>
<p>Lastly, I’ve added a vertical line at the 0 mark to clearly indicate the transition from negative to positive point differential.</p>
<details><summary>
Proper Colors and Text
</summary><div class="cell" data-fig.dim="[6,4]">
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span class="va">nfl_stand</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>
    color <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html">case_when</a></span><span class="op">(</span>
      <span class="va">season</span> <span class="op">&lt;</span> <span class="fl">2020</span> <span class="op">&amp;</span> <span class="va">seed</span> <span class="op">&lt;=</span> <span class="fl">6</span> <span class="op">~</span> <span class="st">"blue"</span>,
      <span class="va">season</span> <span class="op">==</span> <span class="fl">2020</span> <span class="op">&amp;</span> <span class="va">seed</span> <span class="op">&lt;=</span> <span class="fl">7</span> <span class="op">~</span> <span class="st">"blue"</span>,
      <span class="cn">TRUE</span> <span class="op">~</span>  <span class="st">"red"</span>
    <span class="op">)</span>
  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">pts_diff</span>, y <span class="op">=</span> <span class="va">win_pct</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html">geom_vline</a></span><span class="op">(</span>xintercept <span class="op">=</span> <span class="fl">0</span>, size <span class="op">=</span> <span class="fl">0.75</span>, color <span class="op">=</span> <span class="st">"#737373"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span>
    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>color <span class="op">=</span> <span class="va">color</span><span class="op">)</span>,
    size <span class="op">=</span> <span class="fl">3</span>, alpha <span class="op">=</span> <span class="fl">0.8</span>
    <span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_identity.html">scale_color_identity</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"Points Differential"</span>, y <span class="op">=</span> <span class="st">"Win Percent"</span>,
       title <span class="op">=</span> <span class="st">"Playoff teams typically have a positive point differential"</span>,
       subtitle <span class="op">=</span> <span class="st">"Data through week 15 of the 2020 NFL Season"</span>,
       caption <span class="op">=</span> <span class="st">"Plot: @thomas_mock | Data: ESPN"</span><span class="op">)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/nfl_stand_color2-1.png" class="img-fluid" width="3000"></p>
</div>
</div>
</details><div class="cell" data-fig.dim="[6,4]">
<div class="cell-output-display">
<p><img src="index_files/figure-html/nfl_stand_color2-1.png" class="img-fluid" width="3000"></p>
</div>
</div>
</section><section id="refine-labels" class="level2"><h2 class="anchored" data-anchor-id="refine-labels">Refine labels</h2>
<p>Now, because we don’t have a legend for the colors, let’s add some direct labels to indicate what’s going on. I’ll use <code>ggtext</code> to add nicely formatted color text. Note that I’ve also borrowed the NFL shield’s blue and red hex color code to add a bit more engaging color for both the labels and points. Lastly, I’ve also converted the y-axis from decimals to proper percent labels via <code><a href="https://scales.r-lib.org/reference/percent_format.html">scales::percent_format()</a></code> and some better breakpoints.</p>
<p>This is starting to look a lot better, but I’m not a huge fan of the base theme.</p>
<details><summary>
Refine Labels
</summary><div class="cell" data-fig.dim="[8,6]">
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://wilkelab.org/ggtext/">ggtext</a></span><span class="op">)</span>

<span class="va">playoff_label_scatter</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>
  pts_diff <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">25</span>,<span class="op">-</span><span class="fl">125</span><span class="op">)</span>, y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0.3</span>, <span class="fl">0.8</span><span class="op">)</span>, 
  label <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Missed&lt;br&gt;Playoffs"</span>, <span class="st">"Made&lt;br&gt;Playoffs"</span><span class="op">)</span>,
  color <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"#D50A0A"</span>, <span class="st">"#013369"</span><span class="op">)</span>
<span class="op">)</span>


<span class="va">playoff_diff_plot</span> <span class="op">&lt;-</span> <span class="va">nfl_stand</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>
    color <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html">case_when</a></span><span class="op">(</span>
      <span class="va">season</span> <span class="op">&lt;</span> <span class="fl">2020</span> <span class="op">&amp;</span> <span class="va">seed</span> <span class="op">&lt;=</span> <span class="fl">6</span> <span class="op">~</span> <span class="st">"#013369"</span>,
      <span class="va">season</span> <span class="op">==</span> <span class="fl">2020</span> <span class="op">&amp;</span> <span class="va">seed</span> <span class="op">&lt;=</span> <span class="fl">7</span> <span class="op">~</span> <span class="st">"#013369"</span>,
      <span class="cn">TRUE</span> <span class="op">~</span>  <span class="st">"#D50A0A"</span>
    <span class="op">)</span>
  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">pts_diff</span>, y <span class="op">=</span> <span class="va">win_pct</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html">geom_vline</a></span><span class="op">(</span>xintercept <span class="op">=</span> <span class="fl">0</span>, size <span class="op">=</span> <span class="fl">0.75</span>, color <span class="op">=</span> <span class="st">"#737373"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html">geom_hline</a></span><span class="op">(</span>yintercept <span class="op">=</span> <span class="fl">0</span>, size <span class="op">=</span> <span class="fl">0.75</span>, color <span class="op">=</span> <span class="st">"#737373"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span>
    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>color <span class="op">=</span> <span class="va">color</span><span class="op">)</span>,
    size <span class="op">=</span> <span class="fl">3</span>, alpha <span class="op">=</span> <span class="fl">0.8</span>
    <span class="op">)</span> <span class="op">+</span>
  <span class="fu">ggtext</span><span class="fu">::</span><span class="fu"><a href="https://wilkelab.org/ggtext/reference/geom_richtext.html">geom_richtext</a></span><span class="op">(</span>
    data <span class="op">=</span> <span class="va">playoff_label_scatter</span>,
    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">pts_diff</span>, y <span class="op">=</span> <span class="va">y</span>, label <span class="op">=</span> <span class="va">label</span>, color <span class="op">=</span> <span class="va">color</span><span class="op">)</span>,
    fill <span class="op">=</span> <span class="st">"#f0f0f0"</span>, label.color <span class="op">=</span> <span class="cn">NA</span>, <span class="co"># remove background and outline</span>
    label.padding <span class="op">=</span> <span class="fu">grid</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/grid/unit.html">unit</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">4</span><span class="op">)</span>, <span class="st">"pt"</span><span class="op">)</span>, <span class="co"># remove padding</span>
    family <span class="op">=</span> <span class="st">"Chivo"</span>, hjust <span class="op">=</span> <span class="fl">0.1</span>, fontface <span class="op">=</span> <span class="st">"bold"</span>,
    size <span class="op">=</span> <span class="fl">8</span>
  <span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_identity.html">scale_color_identity</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"Points Differential"</span>, y <span class="op">=</span> <span class="st">"Win Percent"</span>,
       title <span class="op">=</span> <span class="st">"Playoff teams typically have a positive point differential"</span>,
       subtitle <span class="op">=</span> <span class="st">"Data through week 15 of the 2020 NFL Season"</span>,
       caption <span class="op">=</span> <span class="fu"><a href="https://stringr.tidyverse.org/reference/case.html">str_to_upper</a></span><span class="op">(</span><span class="st">"Plot: @thomas_mock | Data: ESPN"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_y_continuous</a></span><span class="op">(</span>
    labels <span class="op">=</span> <span class="fu">scales</span><span class="fu">::</span><span class="fu"><a href="https://scales.r-lib.org/reference/percent_format.html">percent_format</a></span><span class="op">(</span>accuracy <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,
    breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">.0</span>, <span class="fl">1</span>, by <span class="op">=</span> <span class="fl">.10</span><span class="op">)</span>
    <span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_x_continuous</a></span><span class="op">(</span>
    breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="op">-</span><span class="fl">200</span>, <span class="fl">250</span>, by <span class="op">=</span> <span class="fl">50</span><span class="op">)</span>
  <span class="op">)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</details><div class="cell" data-fig.dim="[8,6]">
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span class="va">playoff_diff_plot</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-12-1.png" class="img-fluid" width="4000"></p>
</div>
</div>
</section><section id="premade-themes" class="level2"><h2 class="anchored" data-anchor-id="premade-themes">Premade themes</h2>
<p>Now, as mentioned earlier we can use themes to change theme components in bulk. Since we’re interested in some FiveThirtyEight style plots, let’s try the <code><a href="https://rdrr.io/pkg/ggthemes/man/theme_fivethirtyeight.html">theme_fivethirtyeight()</a></code> from <code>ggthemes</code>.</p>
<p>This looks relatively close to the right overall style, but we lost axis labels, and the fonts are still a bit basic. Let’s try and build our own!</p>
<div class="cell" data-fig.dim="[8,6]">
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span class="va">playoff_diff_plot</span> <span class="op">+</span>
  <span class="fu">ggthemes</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/ggthemes/man/theme_fivethirtyeight.html">theme_fivethirtyeight</a></span><span class="op">(</span><span class="op">)</span> </code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-13-1.png" class="img-fluid" width="4000"></p>
</div>
</div>
</section><section id="custom-themes" class="level2"><h2 class="anchored" data-anchor-id="custom-themes">Custom Themes</h2>
<p>There are two ways of building your own themes:</p>
<ul>
<li>
<code><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme()</a></code> - Add theme components individually<br>
</li>
<li>
<code>theme_?? %+replace%</code> - Apply an existing theme and overwriting components of it</li>
</ul>
<section id="theme" class="level3"><h3 class="anchored" data-anchor-id="theme"><code>theme()</code></h3>
<p>Let’s first just build up the theme components, we’ll be attempting to recreate the FiveThirtyEight theme from scratch. I’m focusing on the minimal changes necessary to recreate the plotting style. We need a lightgrey background, grey gridlines, larger text with a specific font. Note that I’m using <code>systemfonts</code> to load all my system font libraries into R.</p>
<p>A quick example of a FiveThirtyEight style plot:</p>
<p><img src="https://fivethirtyeight.com/wp-content/uploads/2019/04/roeder-jeopary-folo-2.png?w=700" class="img-fluid"></p>
<p>In short, a few concepts that make up the FiveThirtyEight “style guide”:</p>
<ul>
<li>Focus on Web, ie relatively small graphics<br>
</li>
<li>Light smoke-grey background with grey gridlines<br>
</li>
<li>Black Plot Titles/Subtitles and Axis Labels<br>
</li>
<li>Grey axis text (ie numbers on axis)<br>
</li>
<li>LARGE plot titles and axis labels, with medium subtitles and axis text<br>
</li>
<li>Always add a source<br>
</li>
<li>Bright colors for plots</li>
</ul>
<p>There’s a bit more fine details to what makes their plots so <em>good</em> but that covers the big parts we’ll try to capture in our theme. Some of the nuance is up to the individual to enact (ie choosing fonts, specific colors, <em>just</em> how big to make the fonts/points/etc).</p>
<p>The first pass at a theme that we’ve created to match that style. I’ve added comments as to what different theme elements change.</p>
<details><summary>
Custom Theme Code
</summary><div class="cell">
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span class="va">theme_538</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">...</span>, <span class="va">base_size</span> <span class="op">=</span> <span class="fl">12</span><span class="op">)</span> <span class="op">{</span>
  
    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span>
      <span class="co"># plotting components</span>
      
      <span class="co">## drop minor gridlines</span>
      panel.grid.minor <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank</a></span><span class="op">(</span><span class="op">)</span>,
      <span class="co"># change grid lines to gray</span>
      panel.grid.major <span class="op">=</span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_line</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"#d0d0d0"</span><span class="op">)</span>,
      <span class="co"># fill the plot and panel spaces with grey and remove border</span>
      panel.background <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_rect</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="st">"#f0f0f0"</span>, color <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span>,
      plot.background <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_rect</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="st">"#f0f0f0"</span>, color <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span>,
      panel.border <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank</a></span><span class="op">(</span><span class="op">)</span>,
      <span class="co"># remove strip background</span>
      strip.background <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank</a></span><span class="op">(</span><span class="op">)</span>,
      <span class="co"># adjust the margins of plots and remove axis ticks</span>
      plot.margin <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">margin</a></span><span class="op">(</span><span class="fl">0.5</span>, <span class="fl">1</span>, <span class="fl">0.5</span>, <span class="fl">1</span>, unit <span class="op">=</span> <span class="st">"cm"</span><span class="op">)</span>,
      axis.ticks <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank</a></span><span class="op">(</span><span class="op">)</span>,
      <span class="co"># change text family, size, and adjust position of titles</span>
      text <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>family <span class="op">=</span> <span class="st">"Chivo"</span>, size <span class="op">=</span> <span class="va">base_size</span><span class="op">)</span>,
      axis.text <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>face <span class="op">=</span> <span class="st">"bold"</span>, color <span class="op">=</span> <span class="st">"grey"</span>, size <span class="op">=</span> <span class="va">base_size</span><span class="op">)</span>,
      axis.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>face <span class="op">=</span> <span class="st">"bold"</span>, size <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">rel</a></span><span class="op">(</span><span class="fl">1.33</span><span class="op">)</span><span class="op">)</span>,
      axis.title.x <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>margin <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">margin</a></span><span class="op">(</span><span class="fl">0.5</span>, <span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span>, unit <span class="op">=</span> <span class="st">"cm"</span><span class="op">)</span><span class="op">)</span>,
      axis.title.y <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>margin <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">margin</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0.5</span>, <span class="fl">0</span>, <span class="fl">0</span>, unit <span class="op">=</span> <span class="st">"cm"</span><span class="op">)</span>, angle <span class="op">=</span><span class="fl">90</span><span class="op">)</span>,
      plot.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>face <span class="op">=</span> <span class="st">"bold"</span>, size <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">rel</a></span><span class="op">(</span><span class="fl">1.67</span><span class="op">)</span>, hjust <span class="op">=</span> <span class="fl">0</span><span class="op">)</span>,
      plot.title.position <span class="op">=</span> <span class="st">"plot"</span>,
      plot.subtitle <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">16</span>, margin <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">margin</a></span><span class="op">(</span><span class="fl">0.2</span>, <span class="fl">0</span>, <span class="fl">1</span>, <span class="fl">0</span>, unit <span class="op">=</span> <span class="st">"cm"</span><span class="op">)</span>, hjust <span class="op">=</span> <span class="fl">0</span><span class="op">)</span>,
      plot.caption <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">10</span>, margin <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">margin</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span>, unit <span class="op">=</span> <span class="st">"cm"</span><span class="op">)</span>, hjust <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,
      strip.text <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">rel</a></span><span class="op">(</span><span class="fl">1.33</span><span class="op">)</span>, face <span class="op">=</span> <span class="st">"bold"</span><span class="op">)</span>,
      <span class="va">...</span>
    <span class="op">)</span>
<span class="op">}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</details><p>Now let’s apply the theme to our plot.</p>
<div class="cell" data-fig.dim="[8,6]">
<div class="sourceCode" id="cb37"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span class="va">playoff_diff_plot</span> <span class="op">+</span>
  <span class="fu">theme_538</span><span class="op">(</span><span class="op">)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-15-1.png" class="img-fluid" width="4000"></p>
</div>
</div>
<p>I think we’ve created a nice representation of the FiveThirtyEight style!</p>
</section><section id="theme_-replace" class="level3"><h3 class="anchored" data-anchor-id="theme_-replace"><code>theme_?? %+replace%</code></h3>
<p>The <code>%+replace%</code> version instead applies a theme and then completely replaces those components rather than adding to them. This is typically more robust, but requires you to specific more arguments as they’re removed otherwise. For our purposes the code inside <code><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme()</a></code> is identical but there are situations where building up by <code><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme()</a></code> alone requires less initial work but is less robust to “real life” edge cases.</p>
<details><summary><code>%+replace%</code> theme
</summary><div class="cell">
<div class="sourceCode" id="cb38"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span class="va">theme_539</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">base_size</span> <span class="op">=</span> <span class="fl">12</span>, <span class="va">base_family</span> <span class="op">=</span> <span class="st">"Chivo"</span><span class="op">)</span> <span class="op">{</span>
  
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_grey</a></span><span class="op">(</span>base_size <span class="op">=</span> <span class="va">base_size</span>, base_family <span class="op">=</span> <span class="va">base_family</span><span class="op">)</span> <span class="op"><a href="https://ggplot2.tidyverse.org/reference/theme_get.html">%+replace%</a></span>
    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span>
      panel.grid.minor <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank</a></span><span class="op">(</span><span class="op">)</span>,
      axis.ticks <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank</a></span><span class="op">(</span><span class="op">)</span>,
      text <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>family <span class="op">=</span> <span class="st">"Chivo"</span>, size <span class="op">=</span> <span class="va">base_size</span><span class="op">)</span>,
      axis.text <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>face <span class="op">=</span> <span class="st">"bold"</span>, color <span class="op">=</span> <span class="st">"grey"</span>, size <span class="op">=</span> <span class="va">base_size</span><span class="op">)</span>,
      axis.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>face <span class="op">=</span> <span class="st">"bold"</span>, size <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">rel</a></span><span class="op">(</span><span class="fl">1.33</span><span class="op">)</span><span class="op">)</span>,
      axis.title.x <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>margin <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">margin</a></span><span class="op">(</span><span class="fl">0.5</span>, <span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span>, unit <span class="op">=</span> <span class="st">"cm"</span><span class="op">)</span><span class="op">)</span>,
      axis.title.y <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>margin <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">margin</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0.5</span>, <span class="fl">0</span>, <span class="fl">0</span>, unit <span class="op">=</span> <span class="st">"cm"</span><span class="op">)</span>, angle <span class="op">=</span><span class="fl">90</span><span class="op">)</span>,
      plot.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>face <span class="op">=</span> <span class="st">"bold"</span>, size <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">rel</a></span><span class="op">(</span><span class="fl">1.67</span><span class="op">)</span>, hjust <span class="op">=</span> <span class="fl">0</span><span class="op">)</span>,
      plot.title.position <span class="op">=</span> <span class="st">"plot"</span>,
      plot.subtitle <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">16</span>, margin <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">margin</a></span><span class="op">(</span><span class="fl">0.2</span>, <span class="fl">0</span>, <span class="fl">1</span>, <span class="fl">0</span>, unit <span class="op">=</span> <span class="st">"cm"</span><span class="op">)</span>, hjust <span class="op">=</span> <span class="fl">0</span><span class="op">)</span>,
      plot.caption <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">10</span>, margin <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">margin</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span>, unit <span class="op">=</span> <span class="st">"cm"</span><span class="op">)</span>, hjust <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,
      plot.background <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_rect</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="st">"#f0f0f0"</span>, color <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span>,
      panel.background <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_rect</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="st">"#f0f0f0"</span>, color <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span>,
      panel.grid.major <span class="op">=</span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_line</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"#d0d0d0"</span><span class="op">)</span>,
      panel.border <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank</a></span><span class="op">(</span><span class="op">)</span>,
      plot.margin <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">margin</a></span><span class="op">(</span><span class="fl">0.5</span>, <span class="fl">1</span>, <span class="fl">0.5</span>, <span class="fl">1</span>, unit <span class="op">=</span> <span class="st">"cm"</span><span class="op">)</span>,
      strip.background <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank</a></span><span class="op">(</span><span class="op">)</span>,
      strip.text <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">rel</a></span><span class="op">(</span><span class="fl">1.33</span><span class="op">)</span>, face <span class="op">=</span> <span class="st">"bold"</span><span class="op">)</span>
    <span class="op">)</span>
<span class="op">}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</details><div class="cell" data-fig.dim="[8,6]">
<div class="sourceCode" id="cb39"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span class="va">playoff_diff_plot</span> <span class="op">+</span>
  <span class="fu">theme_539</span><span class="op">(</span><span class="op">)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-17-1.png" class="img-fluid" width="4000"></p>
</div>
</div>
</section></section><section id="same-data-different-story" class="level2"><h2 class="anchored" data-anchor-id="same-data-different-story">Same Data, Different Story</h2>
<p>The Same Data, Different Story (SDDS) means we can use the same data in a different plot to tell a slightly different story. We can now represent theNow we’re going to use our theme and the same data, but represent the data a bit differently. We’ll load the <code>ggridges</code> package to let us plot many distributions at once. Again we’re adjusting the colors, plotting the data, and adding our theme. Overall this looks pretty excellent out of the gate! This is why themes + custom colors are so useful as you can get 80% of the way there with just those two changes.</p>
<p>We can see that for most years playoff teams are more frequently with positive point differentials and non-playoff teams have negative differentials, but there are clear cases (2014, 2016) where the story is not as clean!</p>
<div class="cell" data-fig.dim="[8,12]">
<div class="sourceCode" id="cb40"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://wilkelab.org/ggridges/">ggridges</a></span><span class="op">)</span>

<span class="va">stand_density</span> <span class="op">&lt;-</span> <span class="va">nfl_stand</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>
    color <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html">case_when</a></span><span class="op">(</span>
      <span class="va">season</span> <span class="op">&lt;</span> <span class="fl">2020</span> <span class="op">&amp;</span> <span class="va">seed</span> <span class="op">&lt;=</span> <span class="fl">6</span> <span class="op">~</span> <span class="st">"#013369"</span>,
      <span class="va">season</span> <span class="op">==</span> <span class="fl">2020</span> <span class="op">&amp;</span> <span class="va">seed</span> <span class="op">&lt;=</span> <span class="fl">7</span> <span class="op">~</span> <span class="st">"#013369"</span>,
      <span class="cn">TRUE</span> <span class="op">~</span>  <span class="st">"#D50A0A"</span>
    <span class="op">)</span>
  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">pts_diff</span>, y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">season</span><span class="op">)</span>, color <span class="op">=</span> <span class="va">color</span>, fill <span class="op">=</span> <span class="va">color</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html">geom_vline</a></span><span class="op">(</span>xintercept <span class="op">=</span> <span class="fl">0.5</span>, size <span class="op">=</span> <span class="fl">0.75</span>, color <span class="op">=</span> <span class="st">"#737373"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://wilkelab.org/ggridges/reference/geom_density_ridges.html">geom_density_ridges</a></span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">0.8</span>, scale <span class="op">=</span> <span class="fl">1.1</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_identity.html">scale_color_identity</a></span><span class="op">(</span>aesthetics <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"fill"</span>, <span class="st">"color"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">theme_538</span><span class="op">(</span><span class="op">)</span>

<span class="va">stand_density</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Picking joint bandwidth of 30.5</code></pre>
</div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-18-1.png" class="img-fluid" width="4000"></p>
</div>
</div>
<section id="add-context" class="level3"><h3 class="anchored" data-anchor-id="add-context">Add context</h3>
<p>We can add a bit more context with custom embedded labels, a title, subtitle, etc and by adjusting some of the x/y breaks. I’m going to completely drop the y-gridlines since they’re not needed. Note that for the custom annotations that factors are represented essentially as discrete ordered integers, so for the 7 years we have plotted we can put a label just above the last year by plotting at 7.5 (just above the 7th year/2020).</p>
<details><summary>
Add Context
</summary><div class="cell" data-fig.dim="[8,12]">
<div class="sourceCode" id="cb42"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span class="co"># create a small dataset for the custom annotations</span>
<span class="va">playoff_label_ridge</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>
  y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">7.75</span>, <span class="fl">7.75</span><span class="op">)</span>, pts_diff <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">250</span>,<span class="fl">150</span><span class="op">)</span>,
  label <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Missed&lt;br&gt;Playoffs"</span>, <span class="st">"Made&lt;br&gt;Playoffs"</span><span class="op">)</span>,
  color <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"#D50A0A"</span>, <span class="st">"#013369"</span><span class="op">)</span>
<span class="op">)</span>

<span class="va">stand_density</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_x_continuous</a></span><span class="op">(</span>breaks <span class="op">=</span> <span class="fu">scales</span><span class="fu">::</span><span class="fu"><a href="https://scales.r-lib.org/reference/pretty_breaks.html">pretty_breaks</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">10</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_cartesian.html">coord_cartesian</a></span><span class="op">(</span>xlim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">250</span>, <span class="fl">250</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">ggtext</span><span class="fu">::</span><span class="fu"><a href="https://wilkelab.org/ggtext/reference/geom_richtext.html">geom_richtext</a></span><span class="op">(</span>
    data <span class="op">=</span> <span class="va">playoff_label_ridge</span>,
    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">pts_diff</span>, y <span class="op">=</span> <span class="va">y</span>, label <span class="op">=</span> <span class="va">label</span>, color <span class="op">=</span> <span class="va">color</span><span class="op">)</span>,
    fill <span class="op">=</span> <span class="st">"#f0f0f0"</span>, label.color <span class="op">=</span> <span class="cn">NA</span>, <span class="co"># remove background and outline</span>
    label.padding <span class="op">=</span> <span class="fu">grid</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/grid/unit.html">unit</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">4</span><span class="op">)</span>, <span class="st">"pt"</span><span class="op">)</span>, <span class="co"># remove padding</span>
    family <span class="op">=</span> <span class="st">"Chivo"</span>, hjust <span class="op">=</span> <span class="fl">0</span> , fontface <span class="op">=</span> <span class="st">"bold"</span>,
    size <span class="op">=</span> <span class="fl">6</span>
  <span class="op">)</span> <span class="op">+</span>
  <span class="fu">theme_538</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span>panel.grid.major.y <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>
    x <span class="op">=</span> <span class="st">"Point Differential"</span>, y <span class="op">=</span> <span class="st">""</span>,
    title <span class="op">=</span> <span class="st">"Playoff teams typically have a positive point differential"</span>,
    subtitle <span class="op">=</span> <span class="st">"Data through week 15 of the 2020 NFL Season"</span>,
    caption <span class="op">=</span> <span class="st">"Plot: @thomas_mock | Data: ESPN"</span>
    <span class="op">)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Picking joint bandwidth of 30.5</code></pre>
</div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/ridge-plot-1.png" class="img-fluid" width="4000"></p>
</div>
</div>
</details><div class="cell" data-fig.dim="[8,12]">
<div class="cell-output cell-output-stderr">
<pre><code>Picking joint bandwidth of 30.5</code></pre>
</div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/ridge-plot-1.png" class="img-fluid" width="4000"></p>
</div>
</div>
<p>And if you want to look at the full code to create this all at once, see the expandable tag below.</p>
<details><summary>
Full code
</summary><div class="cell" data-fig.dim="[8,12]">
<div class="sourceCode" id="cb45"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://wilkelab.org/ggridges/">ggridges</a></span><span class="op">)</span>

<span class="va">playoff_label_ridge</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>
  y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">7.5</span>, <span class="fl">7.5</span><span class="op">)</span>, pts_diff <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">225</span>,<span class="fl">150</span><span class="op">)</span>,
  label <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Missed&lt;br&gt;Playoffs"</span>, <span class="st">"Made&lt;br&gt;Playoffs"</span><span class="op">)</span>,
  color <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"#D50A0A"</span>, <span class="st">"#013369"</span><span class="op">)</span>
<span class="op">)</span>


<span class="va">nfl_stand</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>
    color <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html">case_when</a></span><span class="op">(</span>
      <span class="va">season</span> <span class="op">&lt;</span> <span class="fl">2020</span> <span class="op">&amp;</span> <span class="va">seed</span> <span class="op">&lt;=</span> <span class="fl">6</span> <span class="op">~</span> <span class="st">"#013369"</span>,
      <span class="va">season</span> <span class="op">==</span> <span class="fl">2020</span> <span class="op">&amp;</span> <span class="va">seed</span> <span class="op">&lt;=</span> <span class="fl">7</span> <span class="op">~</span> <span class="st">"#013369"</span>,
      <span class="cn">TRUE</span> <span class="op">~</span>  <span class="st">"#D50A0A"</span>
    <span class="op">)</span>
  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">pts_diff</span>, y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">season</span><span class="op">)</span>, color <span class="op">=</span> <span class="va">color</span>, fill <span class="op">=</span> <span class="va">color</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html">geom_vline</a></span><span class="op">(</span>xintercept <span class="op">=</span> <span class="fl">0.5</span>, size <span class="op">=</span> <span class="fl">0.75</span>, color <span class="op">=</span> <span class="st">"#737373"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://wilkelab.org/ggridges/reference/geom_density_ridges.html">geom_density_ridges</a></span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">0.8</span>, scale <span class="op">=</span> <span class="fl">1.1</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">ggtext</span><span class="fu">::</span><span class="fu"><a href="https://wilkelab.org/ggtext/reference/geom_richtext.html">geom_richtext</a></span><span class="op">(</span>
    data <span class="op">=</span> <span class="va">playoff_label_ridge</span>,
    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">pts_diff</span>, y <span class="op">=</span> <span class="va">y</span>, label <span class="op">=</span> <span class="va">label</span>, color <span class="op">=</span> <span class="va">color</span><span class="op">)</span>,
    fill <span class="op">=</span> <span class="st">"#f0f0f0"</span>, label.color <span class="op">=</span> <span class="cn">NA</span>, <span class="co"># remove background and outline</span>
    label.padding <span class="op">=</span> <span class="fu">grid</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/grid/unit.html">unit</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">4</span><span class="op">)</span>, <span class="st">"pt"</span><span class="op">)</span>, <span class="co"># remove padding</span>
    family <span class="op">=</span> <span class="st">"Chivo"</span>, hjust <span class="op">=</span> <span class="fl">0</span> , fontface <span class="op">=</span> <span class="st">"bold"</span>,
    size <span class="op">=</span> <span class="fl">6</span>
  <span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_x_continuous</a></span><span class="op">(</span>breaks <span class="op">=</span> <span class="fu">scales</span><span class="fu">::</span><span class="fu"><a href="https://scales.r-lib.org/reference/pretty_breaks.html">pretty_breaks</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">10</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_cartesian.html">coord_cartesian</a></span><span class="op">(</span>xlim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">250</span>, <span class="fl">250</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_identity.html">scale_color_identity</a></span><span class="op">(</span>aesthetics <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"fill"</span>, <span class="st">"color"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">theme_538</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span>panel.grid.major.y <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>
    x <span class="op">=</span> <span class="st">"Point Differential"</span>, y <span class="op">=</span> <span class="st">""</span>,
    title <span class="op">=</span> <span class="st">"Playoff teams typically have a positive point differential"</span>,
    subtitle <span class="op">=</span> <span class="st">"Data through Week 15 of the 2020 NFL Season"</span>,
    caption <span class="op">=</span> <span class="st">"Plot: @thomas_mock | Data: ESPN"</span>
    <span class="op">)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Picking joint bandwidth of 30.5</code></pre>
</div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-19-1.png" class="img-fluid" width="4000"></p>
</div>
</div>
</details><hr></section></section><section id="sdds-2-rise-of-2020" class="level2"><h2 class="anchored" data-anchor-id="sdds-2-rise-of-2020">SDDS 2: Rise of 2020</h2>
<p>We can go one step deeper on the Same Data, Different Story principle and plot the data just a bit differently. Let’s plot the playoff teams for 2020 (top 7), and the top two “on-the-bubble” teams. I’ve added the <code>theme_538()</code>, and a horizontal line at the 0 mark again. Note that I’m using <code><a href="https://rdrr.io/pkg/tidytext/man/reorder_within.html">tidytext::reorder_within()</a></code> to reorder the teams by their playoff seed within a conference. <code><a href="https://rdrr.io/r/stats/reorder.factor.html">reorder()</a></code> would work here as well, so <code><a href="https://rdrr.io/pkg/tidytext/man/reorder_within.html">tidytext::reorder_within()</a></code> isn’t <em>truly</em> necessary, but can be very useful when re-ordering columns across facets.</p>
<div class="cell" data-fig.dim="[10,8]">
<div class="sourceCode" id="cb47"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span class="va">stand_df</span> <span class="op">&lt;-</span> <span class="va">nfl_stand</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">season</span> <span class="op">==</span> <span class="fl">2020</span><span class="op">)</span>

<span class="va">stand_df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">seed</span> <span class="op">&lt;=</span> <span class="fl">12</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu">tidytext</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/tidytext/man/reorder_within.html">reorder_within</a></span><span class="op">(</span><span class="va">team_abb</span>, <span class="va">seed</span>, <span class="va">conf</span><span class="op">)</span>, y <span class="op">=</span> <span class="va">pts_diff</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_col</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu">tidytext</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/tidytext/man/reorder_within.html">scale_x_reordered</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_grid.html">facet_grid</a></span><span class="op">(</span><span class="op">~</span><span class="va">conf</span>, scales <span class="op">=</span> <span class="st">"free_x"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html">geom_hline</a></span><span class="op">(</span>yintercept <span class="op">=</span> <span class="fl">0</span>, size <span class="op">=</span> <span class="fl">0.75</span>, color <span class="op">=</span> <span class="st">"#737373"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">theme_538</span><span class="op">(</span><span class="op">)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-20-1.png" class="img-fluid" width="5000"></p>
</div>
</div>
<section id="add-context-1" class="level3"><h3 class="anchored" data-anchor-id="add-context-1">Add Context</h3>
<p>Rather than labeling the x-axis with team, we could supply playoff seed. We’ll add our titles, captions, etc along with a vertical line for separation of the playoff vs non-playoff teams, and a vertical line to separate the Y-axis from the X-axis baseline. We’ve also expanded the break points on the y-axis and dropped the x-axis gridlines.</p>
<details><summary>
Add Context
</summary><div class="cell" data-fig.dim="[10,8]">
<div class="sourceCode" id="cb48"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span class="co"># Small label dataset</span>
<span class="va">playoff_label</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>
  seed <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">9</span>, <span class="fl">4</span><span class="op">)</span>,
  pts_diff <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">30</span>, <span class="fl">100</span><span class="op">)</span>,
  conf <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"AFC"</span>, <span class="st">"AFC"</span><span class="op">)</span>,
  label <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Outside&lt;br&gt;looking in"</span>, <span class="st">"Playoff&lt;br&gt;teams"</span><span class="op">)</span>,
  color <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"#D50A0A"</span>, <span class="st">"#013369"</span><span class="op">)</span>
<span class="op">)</span>

<span class="va">stand_df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">seed</span> <span class="op">&lt;=</span> <span class="fl">12</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">as.factor</a></span><span class="op">(</span><span class="va">seed</span><span class="op">)</span>, y <span class="op">=</span> <span class="va">pts_diff</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_col</a></span><span class="op">(</span>
    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/if_else.html">if_else</a></span><span class="op">(</span><span class="va">seed</span> <span class="op">&lt;=</span> <span class="fl">7</span>, <span class="st">"#013369"</span>, <span class="st">"#D50A0A"</span><span class="op">)</span><span class="op">)</span>,
    width <span class="op">=</span> <span class="fl">0.8</span>
  <span class="op">)</span> <span class="op">+</span>
  <span class="fu">ggtext</span><span class="fu">::</span><span class="fu"><a href="https://wilkelab.org/ggtext/reference/geom_richtext.html">geom_richtext</a></span><span class="op">(</span>
    data <span class="op">=</span> <span class="va">playoff_label</span>,
    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>label <span class="op">=</span> <span class="va">label</span>, color <span class="op">=</span> <span class="va">color</span><span class="op">)</span>,
    fill <span class="op">=</span> <span class="st">"#f0f0f0"</span>,
    label.color <span class="op">=</span> <span class="cn">NA</span>,
    <span class="co"># remove background and outline</span>
    label.padding <span class="op">=</span> <span class="fu">grid</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/grid/unit.html">unit</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">4</span><span class="op">)</span>, <span class="st">"pt"</span><span class="op">)</span>,
    <span class="co"># remove padding</span>
    family <span class="op">=</span> <span class="st">"Chivo"</span>,
    hjust <span class="op">=</span> <span class="fl">0.1</span>,
    fontface <span class="op">=</span> <span class="st">"bold"</span>,
    size <span class="op">=</span> <span class="fl">6</span>
  <span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html">geom_hline</a></span><span class="op">(</span>yintercept <span class="op">=</span> <span class="fl">0</span>, size <span class="op">=</span> <span class="fl">0.75</span>, color <span class="op">=</span> <span class="st">"#737373"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html">geom_vline</a></span><span class="op">(</span>xintercept <span class="op">=</span> <span class="fl">7.5</span>, size <span class="op">=</span> <span class="fl">1</span>, color <span class="op">=</span> <span class="st">"grey"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html">geom_vline</a></span><span class="op">(</span>xintercept <span class="op">=</span> <span class="fl">0.5</span>, size <span class="op">=</span> <span class="fl">0.75</span>, color <span class="op">=</span> <span class="st">"#737373"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_grid.html">facet_grid</a></span><span class="op">(</span><span class="op">~</span><span class="va">conf</span>, scales <span class="op">=</span> <span class="st">"free_x"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_y_continuous</a></span><span class="op">(</span>breaks <span class="op">=</span> <span class="fu">scales</span><span class="fu">::</span><span class="fu"><a href="https://scales.r-lib.org/reference/pretty_breaks.html">pretty_breaks</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">10</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_identity.html">scale_fill_identity</a></span><span class="op">(</span>aesthetics <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"fill"</span>, <span class="st">"color"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">theme_538</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span>panel.grid.major.x <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>
    x <span class="op">=</span> <span class="st">"Playoff Seed"</span>,
    y <span class="op">=</span> <span class="st">"Points Differential"</span>,
    title <span class="op">=</span> <span class="st">"Playoff teams typically have a positive point differential"</span>,
    subtitle <span class="op">=</span> <span class="st">"Data through week 15 of the 2020 NFL Season"</span>,
    caption <span class="op">=</span> <span class="st">"Plot: @thomas_mock | Data: ESPN"</span>
  <span class="op">)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/playoff-seed-1.png" class="img-fluid" width="5000"></p>
</div>
</div>
</details><div class="cell" data-fig.dim="[10,8]">
<div class="cell-output-display">
<p><img src="index_files/figure-html/playoff-seed-1.png" class="img-fluid" width="5000"></p>
</div>
</div>
</section><section id="team-vs-seed" class="level3"><h3 class="anchored" data-anchor-id="team-vs-seed">Team vs Seed</h3>
<p>By converting the x-axis to playoff seed instead of team, we’ve lost some data here, specifically which teams are which. We could add these back with by adding in an image at the end of each “bar”.</p>
<details><summary>
Add images
</summary><div class="cell" data-hash="index_cache/html/unnamed-chunk-21_2e5d3cea7e5ab1335f6126fcbdc30d80">
<div class="sourceCode" id="cb49"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span class="va">link_to_img</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">width</span> <span class="op">=</span> <span class="fl">25</span><span class="op">)</span> <span class="op">{</span>
  <span class="fu">glue</span><span class="fu">::</span><span class="fu"><a href="https://glue.tidyverse.org/reference/glue.html">glue</a></span><span class="op">(</span><span class="st">"&lt;img src='{x}' width='{width}'/&gt;"</span><span class="op">)</span>
<span class="op">}</span>

<span class="va">playoff_label</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>
  seed <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">9</span>, <span class="fl">4</span><span class="op">)</span>,
  pts_diff <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">90</span>, <span class="fl">110</span><span class="op">)</span>,
  conf <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"AFC"</span>, <span class="st">"AFC"</span><span class="op">)</span>,
  label <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Outside&lt;br&gt;looking in"</span>, <span class="st">"Playoff&lt;br&gt;teams"</span><span class="op">)</span>,
  color <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"#D50A0A"</span>, <span class="st">"#013369"</span><span class="op">)</span>
<span class="op">)</span>

<span class="va">stand_plot_logo</span> <span class="op">&lt;-</span> <span class="va">stand_df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">seed</span> <span class="op">&lt;=</span> <span class="fl">12</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>label <span class="op">=</span> <span class="fu">link_to_img</span><span class="op">(</span><span class="va">team_logo</span>, width <span class="op">=</span> <span class="fl">25</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">as.factor</a></span><span class="op">(</span><span class="va">seed</span><span class="op">)</span>, y <span class="op">=</span> <span class="va">pts_diff</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_col</a></span><span class="op">(</span>
    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/if_else.html">if_else</a></span><span class="op">(</span><span class="va">seed</span> <span class="op">&lt;=</span> <span class="fl">7</span>, <span class="st">"#013369"</span>, <span class="st">"#D50A0A"</span><span class="op">)</span><span class="op">)</span>,
    width <span class="op">=</span> <span class="fl">0.8</span>
  <span class="op">)</span> <span class="op">+</span>
  <span class="fu">ggtext</span><span class="fu">::</span><span class="fu"><a href="https://wilkelab.org/ggtext/reference/geom_richtext.html">geom_richtext</a></span><span class="op">(</span>
    data <span class="op">=</span> <span class="va">playoff_label</span>,
    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>label <span class="op">=</span> <span class="va">label</span>, color <span class="op">=</span> <span class="va">color</span><span class="op">)</span>,
    fill <span class="op">=</span> <span class="st">"#f0f0f0"</span>,
    label.color <span class="op">=</span> <span class="cn">NA</span>,
    <span class="co"># remove background and outline</span>
    label.padding <span class="op">=</span> <span class="fu">grid</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/grid/unit.html">unit</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">4</span><span class="op">)</span>, <span class="st">"pt"</span><span class="op">)</span>,
    <span class="co"># remove padding</span>
    family <span class="op">=</span> <span class="st">"Chivo"</span>,
    hjust <span class="op">=</span> <span class="fl">0.1</span>,
    fontface <span class="op">=</span> <span class="st">"bold"</span>,
    size <span class="op">=</span> <span class="fl">5</span>
  <span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://wilkelab.org/ggtext/reference/geom_richtext.html">geom_richtext</a></span><span class="op">(</span>
    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>
      x <span class="op">=</span> <span class="va">seed</span>,
      y <span class="op">=</span> <span class="va">pts_diff</span>,
      label <span class="op">=</span> <span class="va">label</span>,
      vjust <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/if_else.html">if_else</a></span><span class="op">(</span><span class="va">pts_diff</span> <span class="op">&lt;=</span> <span class="fl">1</span>, <span class="fl">1.1</span>, <span class="op">-</span><span class="fl">0.1</span><span class="op">)</span>
    <span class="op">)</span>,
    size <span class="op">=</span> <span class="fl">1</span>,
    fill <span class="op">=</span> <span class="st">"#f0f0f0"</span>,
    label.color <span class="op">=</span> <span class="cn">NA</span>,
    <span class="co"># remove background and outline</span>
    label.padding <span class="op">=</span> <span class="fu">grid</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/grid/unit.html">unit</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">4</span><span class="op">)</span>, <span class="st">"pt"</span><span class="op">)</span> <span class="co"># remove padding</span>
  <span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html">geom_hline</a></span><span class="op">(</span>yintercept <span class="op">=</span> <span class="fl">0</span>, size <span class="op">=</span> <span class="fl">0.75</span>, color <span class="op">=</span> <span class="st">"#737373"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html">geom_vline</a></span><span class="op">(</span>xintercept <span class="op">=</span> <span class="fl">7.5</span>, size <span class="op">=</span> <span class="fl">1</span>, color <span class="op">=</span> <span class="st">"grey"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html">geom_vline</a></span><span class="op">(</span>xintercept <span class="op">=</span> <span class="fl">0.5</span>, size <span class="op">=</span> <span class="fl">0.75</span>, color <span class="op">=</span> <span class="st">"#737373"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_grid.html">facet_grid</a></span><span class="op">(</span><span class="op">~</span><span class="va">conf</span>, scales <span class="op">=</span> <span class="st">"free_x"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_y_continuous</a></span><span class="op">(</span>
    breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="op">-</span><span class="fl">125</span>, <span class="fl">125</span>, by <span class="op">=</span> <span class="fl">25</span><span class="op">)</span>,
    limits <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">130</span>, <span class="fl">130</span><span class="op">)</span>
  <span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_identity.html">scale_fill_identity</a></span><span class="op">(</span>aesthetics <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"fill"</span>, <span class="st">"color"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">theme_538</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span>
    panel.grid.major.x <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank</a></span><span class="op">(</span><span class="op">)</span>
  <span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>
    x <span class="op">=</span> <span class="st">"Playoff Seed"</span>,
    y <span class="op">=</span> <span class="st">"Points Differential"</span>,
    title <span class="op">=</span> <span class="st">"Playoff teams typically have a positive point differential"</span>,
    subtitle <span class="op">=</span> <span class="st">"Amongst the bubble teams, Baltimore appears to be the most 'deservering' of a playoff spot"</span>,
    caption <span class="op">=</span> <span class="st">"Plot: @thomas_mock | Data: ESPN"</span>
  <span class="op">)</span>

<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsave.html">ggsave</a></span><span class="op">(</span><span class="st">"stand_plot_logo.png"</span>, <span class="va">stand_plot_logo</span>, height <span class="op">=</span> <span class="fl">8</span>, width <span class="op">=</span> <span class="fl">10</span>, dpi <span class="op">=</span> <span class="fl">300</span><span class="op">)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 4 rows containing missing values (position_stack).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 4 rows containing missing values (geom_rich_text).</code></pre>
</div>
</div>
</details><p><img src="stand_plot_logo.png" class="img-fluid"></p>
<p>Alternatively, we could convert the X-axis <em>back</em> to team, and then add playoff seed numbers back to each of the bars. This is getting a bit busier, but I think it’s useful to show the <code><a href="https://dplyr.tidyverse.org/reference/if_else.html">if_else()</a></code> workflow for plotting a “label” at a specific point based on a criterion. That can be very helpful in plotting where you can’t control the “direction” of a bar just like we see here.</p>
<details><summary>
Direct Labels
</summary><div class="cell" data-fig.dim="[10,8]">
<div class="sourceCode" id="cb52"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span class="va">stand_df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">seed</span> <span class="op">&lt;=</span> <span class="fl">12</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu">tidytext</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/tidytext/man/reorder_within.html">reorder_within</a></span><span class="op">(</span><span class="va">team_abb</span>, <span class="va">seed</span>, <span class="va">conf</span><span class="op">)</span>, y <span class="op">=</span> <span class="va">pts_diff</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_col</a></span><span class="op">(</span>
    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/if_else.html">if_else</a></span><span class="op">(</span><span class="va">seed</span> <span class="op">&lt;=</span> <span class="fl">7</span>, <span class="st">"#013369"</span>, <span class="st">"#D50A0A"</span><span class="op">)</span><span class="op">)</span>,
    width <span class="op">=</span> <span class="fl">0.8</span>
  <span class="op">)</span> <span class="op">+</span>
  <span class="fu">ggtext</span><span class="fu">::</span><span class="fu"><a href="https://wilkelab.org/ggtext/reference/geom_richtext.html">geom_richtext</a></span><span class="op">(</span>
    data <span class="op">=</span> <span class="va">playoff_label</span>,
    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">seed</span>, label <span class="op">=</span> <span class="va">label</span>, color <span class="op">=</span> <span class="va">color</span><span class="op">)</span>,
    fill <span class="op">=</span> <span class="st">"#f0f0f0"</span>,
    label.color <span class="op">=</span> <span class="cn">NA</span>,
    <span class="co"># remove background and outline</span>
    label.padding <span class="op">=</span> <span class="fu">grid</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/grid/unit.html">unit</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">4</span><span class="op">)</span>, <span class="st">"pt"</span><span class="op">)</span>,
    <span class="co"># remove padding</span>
    family <span class="op">=</span> <span class="st">"Chivo"</span>,
    hjust <span class="op">=</span> <span class="fl">0.1</span>,
    fontface <span class="op">=</span> <span class="st">"bold"</span>,
    size <span class="op">=</span> <span class="fl">6</span>
  <span class="op">)</span> <span class="op">+</span>
  <span class="fu">ggtext</span><span class="fu">::</span><span class="fu"><a href="https://wilkelab.org/ggtext/reference/geom_richtext.html">geom_richtext</a></span><span class="op">(</span>
    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>label <span class="op">=</span> <span class="va">seed</span>, y <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/if_else.html">if_else</a></span><span class="op">(</span><span class="va">pts_diff</span> <span class="op">&lt;=</span> <span class="fl">0</span>, <span class="fl">10</span>, <span class="op">-</span><span class="fl">10</span><span class="op">)</span><span class="op">)</span>,
    color <span class="op">=</span> <span class="st">"black"</span>,
    fill <span class="op">=</span> <span class="st">"#f0f0f0"</span>,
    label.color <span class="op">=</span> <span class="cn">NA</span>,
    <span class="co"># remove background and outline</span>
    label.padding <span class="op">=</span> <span class="fu">grid</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/grid/unit.html">unit</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">4</span><span class="op">)</span>, <span class="st">"pt"</span><span class="op">)</span>,
    <span class="co"># remove padding</span>
    family <span class="op">=</span> <span class="st">"Chivo"</span>,
    hjust <span class="op">=</span> <span class="fl">0.5</span>,
    fontface <span class="op">=</span> <span class="st">"bold"</span>,
    size <span class="op">=</span> <span class="fl">4</span>
  <span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html">geom_hline</a></span><span class="op">(</span>yintercept <span class="op">=</span> <span class="fl">0</span>, size <span class="op">=</span> <span class="fl">0.75</span>, color <span class="op">=</span> <span class="st">"#737373"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html">geom_vline</a></span><span class="op">(</span>xintercept <span class="op">=</span> <span class="fl">7.5</span>, size <span class="op">=</span> <span class="fl">1</span>, color <span class="op">=</span> <span class="st">"grey"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html">geom_vline</a></span><span class="op">(</span>xintercept <span class="op">=</span> <span class="fl">0.5</span>, size <span class="op">=</span> <span class="fl">0.75</span>, color <span class="op">=</span> <span class="st">"#737373"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_grid.html">facet_grid</a></span><span class="op">(</span><span class="op">~</span><span class="va">conf</span>, scales <span class="op">=</span> <span class="st">"free_x"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">tidytext</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/tidytext/man/reorder_within.html">scale_x_reordered</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_y_continuous</a></span><span class="op">(</span>breaks <span class="op">=</span> <span class="fu">scales</span><span class="fu">::</span><span class="fu"><a href="https://scales.r-lib.org/reference/pretty_breaks.html">pretty_breaks</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">10</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_identity.html">scale_fill_identity</a></span><span class="op">(</span>aesthetics <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"fill"</span>, <span class="st">"color"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">theme_538</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span>
    panel.grid.major.x <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank</a></span><span class="op">(</span><span class="op">)</span>
  <span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>
    x <span class="op">=</span> <span class="st">"Playoff Seed"</span>,
    y <span class="op">=</span> <span class="st">"Points Differential"</span>,
    title <span class="op">=</span> <span class="st">"Playoff teams typically have a positive point differential"</span>,
    subtitle <span class="op">=</span> <span class="st">"Amongst the bubble teams, Baltimore appears to be the most 'deservering' of a playoff spot"</span>,
    caption <span class="op">=</span> <span class="st">"Plot: @thomas_mock | Data: ESPN"</span>
  <span class="op">)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/stand-direct-labels-1.png" class="img-fluid" width="5000"></p>
</div>
</div>
</details><div class="cell" data-fig.dim="[10,8]">
<div class="cell-output-display">
<p><img src="index_files/figure-html/stand-direct-labels-1.png" class="img-fluid" width="5000"></p>
</div>
</div>
<hr></section></section></section><section id="blitzing" class="level1"><h1>Blitzing</h1>
<p>Now for the next example of a story with various components, we can look at blitz rate vs pressure rate, or blitz rate vs pass affected rate (sacks + ints + passes defended)/pass att. This is building off an article from <a href="https://fivethirtyeight.com/features/the-indianapolis-colts-finally-built-a-defensive-monster/">FiveThirtyEight highlighting the Colts defense</a> about a month ago.</p>
<p><img src="https://fivethirtyeight.com/wp-content/uploads/2020/11/schalter-COLTS-1118-1.png?w=575" class="img-fluid"></p>
<p>The data they used is available at <a href="https://www.pro-football-reference.com/years/2020/opp.htm">Pro-Football-Reference</a> under a few defensive categories.</p>
<section id="get-the-data" class="level2"><h2 class="anchored" data-anchor-id="get-the-data">Get the data</h2>
<p>First we have to download the data from PFR. There are two defensive datasets we’ll need, the Advanced Stats for pressure/blitz rates and the general Passing Stats for passes defended + intercetions.</p>
<p>We’ll get them via the script below, and then combine by team.</p>
<details><summary>
Data Collection
</summary><div class="cell">
<div class="sourceCode" id="cb53"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span class="va">raw_url</span> <span class="op">&lt;-</span> <span class="st">"https://www.pro-football-reference.com/years/2020/opp.htm"</span>

<span class="va">raw_html</span> <span class="op">&lt;-</span> <span class="fu">read_html</span><span class="op">(</span><span class="va">raw_url</span><span class="op">)</span>

<span class="va">raw_table</span> <span class="op">&lt;-</span> <span class="va">raw_html</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu">html_table</span><span class="op">(</span>fill <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="va">.</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu">janitor</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/janitor/man/clean_names.html">clean_names</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span><span class="op">)</span>

<span class="va">pressure_df</span> <span class="op">&lt;-</span> <span class="va">raw_table</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">tm</span>, blitz_pct <span class="op">=</span> <span class="va">bltz_percent</span>, press_pct <span class="op">=</span> <span class="va">prss_percent</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/across.html">across</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">blitz_pct</span>, <span class="va">press_pct</span><span class="op">)</span>, <span class="va">parse_number</span><span class="op">)</span><span class="op">)</span>

<span class="va">pass_def_raw</span> <span class="op">&lt;-</span> <span class="va">raw_html</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu">html_node</span><span class="op">(</span><span class="st">"#all_passing"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu">html_nodes</span><span class="op">(</span>xpath <span class="op">=</span> <span class="st">"comment()"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu">html_text</span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu">read_html</span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu">html_node</span><span class="op">(</span><span class="st">"table"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu">html_table</span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu">janitor</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/janitor/man/clean_names.html">clean_names</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span><span class="op">)</span>

<span class="va">pass_def_df</span> <span class="op">&lt;-</span> <span class="va">pass_def_raw</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">tm</span>, pass_att <span class="op">=</span> <span class="va">att</span>, <span class="va">int</span>, pass_def <span class="op">=</span> <span class="va">pd</span>, sack <span class="op">=</span> <span class="va">sk</span>, ypa <span class="op">=</span> <span class="va">y_a</span>, anypa <span class="op">=</span> <span class="va">any_a</span><span class="op">)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</details><p>We can then do our left-join by <code>tm</code> to get our working dataset for this example.</p>
<div class="cell">
<div class="sourceCode" id="cb54"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span class="va">combo_pass</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">left_join</a></span><span class="op">(</span>
  <span class="va">pressure_df</span>, <span class="va">pass_def_df</span>,
  by <span class="op">=</span> <span class="st">"tm"</span>
<span class="op">)</span>

<span class="va">combo_pass</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 32 × 9
   tm              blitz_pct press_pct pass_att   int pass_def  sack   ypa anypa
   &lt;chr&gt;               &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1 Atlanta Falcons      32.9      23.6      625    12       51    29   7.9   7.4
 2 Buffalo Bills        35.8      22.2      573    15       76    38   6.9   5.7
 3 Carolina Panth…      24        22.4      585     7       58    29   6.9   6.6
 4 Chicago Bears        21.4      22.4      547    10       71    35   7.2   6.6
 5 Cincinnati Ben…      31.1      19        541    11       80    17   7.3   7.2
 6 Cleveland Brow…      21.3      21.9      585    11       74    38   7.2   6.6
 7 Indianapolis C…      17.1      23.3      562    15       78    40   7.3   6.1
 8 Arizona Cardin…      39.4      25.9      570    11       57    48   6.9   5.9
 9 Dallas Cowboys       22.8      22.8      513    10       46    31   7.4   7.1
10 Denver Broncos       27.9      26.2      567    10       64    42   7.2   6.2
# … with 22 more rows</code></pre>
</div>
</div>
</section><section id="initial-plot" class="level2"><h2 class="anchored" data-anchor-id="initial-plot">Initial Plot</h2>
<p>We’ll first plot the data and try out our theme. I want to add the colors of the specific article we’re recreating.</p>
<div class="cell" data-fig.dim="[8,6]">
<div class="sourceCode" id="cb56"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span class="va">combo_pass</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">blitz_pct</span>, y <span class="op">=</span> <span class="va">press_pct</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>
    x <span class="op">=</span> <span class="st">"Blitz Rate"</span>, y <span class="op">=</span> <span class="st">"Pressure Rate"</span>,
    title <span class="op">=</span> <span class="st">"The Colts are pressuring QBs without much of a blitz"</span>,
    subtitle <span class="op">=</span> <span class="st">"Blitz rate vs. pressure rate for each NFL defense, through Week 15 of the 2020 season"</span>
  <span class="op">)</span> <span class="op">+</span> 
  <span class="fu">theme_538</span><span class="op">(</span><span class="op">)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-24-1.png" class="img-fluid" width="4000"></p>
</div>
</div>
</section><section id="add-color" class="level2"><h2 class="anchored" data-anchor-id="add-color">Add color</h2>
<p>If we add color specifically for the Colts, and then also expand the axis range to match the article, we get the following plot. I’ll save the <code>mutate</code> calls into a new dataframe, and then plot it.</p>
<details><summary>
Add Color and Text
</summary><div class="cell" data-fig.dim="[8,6]">
<div class="sourceCode" id="cb57"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span class="va">colt_df</span> <span class="op">&lt;-</span> <span class="va">combo_pass</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>
    color <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/if_else.html">if_else</a></span><span class="op">(</span><span class="va">tm</span> <span class="op">==</span> <span class="st">"Indianapolis Colts"</span>, <span class="st">"#359fda"</span>, <span class="st">"#91c390"</span><span class="op">)</span>,
    fill <span class="op">=</span> <span class="fu">colorspace</span><span class="fu">::</span><span class="fu"><a href="https://colorspace.R-Forge.R-project.org//reference/lighten.html">lighten</a></span><span class="op">(</span><span class="va">color</span>, amount <span class="op">=</span> <span class="fl">0.3</span><span class="op">)</span>
    <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rowwise.html">rowwise</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>
    att_def <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">int</span>, <span class="va">pass_def</span>, <span class="va">sack</span><span class="op">)</span>,
    cov_rate <span class="op">=</span> <span class="va">att_def</span><span class="op">/</span><span class="va">pass_att</span><span class="op">*</span><span class="fl">100</span>
    <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">ungroup</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html">desc</a></span><span class="op">(</span><span class="va">cov_rate</span><span class="op">)</span><span class="op">)</span>

<span class="va">colt_df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">blitz_pct</span>, y <span class="op">=</span> <span class="va">press_pct</span>, fill <span class="op">=</span> <span class="va">fill</span>, color <span class="op">=</span> <span class="va">color</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">5</span>, pch <span class="op">=</span> <span class="fl">21</span>, alpha <span class="op">=</span> <span class="fl">0.8</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_identity.html">scale_color_identity</a></span><span class="op">(</span>aesthetics <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"fill"</span>, <span class="st">"color"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>
    x <span class="op">=</span> <span class="st">"Blitz Rate"</span>, y <span class="op">=</span> <span class="st">"Pressure Rate"</span>,
    title <span class="op">=</span> <span class="st">"The Colts are pressuring QBs without much of a blitz"</span>,
    subtitle <span class="op">=</span> <span class="st">"Blitz rate vs. pressure rate for each NFL defense,\nthrough Week 15 of the 2020 season"</span>,
    caption <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/chartr.html">toupper</a></span><span class="op">(</span><span class="st">"Plot: @thomas_mock | Data: PFR | Inspiration: FiveThirtyEight"</span><span class="op">)</span>
  <span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_x_continuous</a></span><span class="op">(</span>limits <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">45</span><span class="op">)</span>, breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">45</span>, by <span class="op">=</span> <span class="fl">5</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_y_continuous</a></span><span class="op">(</span>limits <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">35</span><span class="op">)</span>, breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">35</span>, by <span class="op">=</span> <span class="fl">5</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">theme_538</span><span class="op">(</span><span class="op">)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 1 rows containing missing values (geom_point).</code></pre>
</div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/colt-blitz-1.png" class="img-fluid" width="4000"></p>
</div>
</div>
</details><div class="cell" data-fig.dim="[8,6]">
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 1 rows containing missing values (geom_point).</code></pre>
</div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/colt-blitz-1.png" class="img-fluid" width="4000"></p>
</div>
</div>
</section><section id="add-labels" class="level2"><h2 class="anchored" data-anchor-id="add-labels">Add labels</h2>
<p>We can create a small “helper” dataset to plot the labels, and we’ve basically re-created the original plot!</p>
<details><summary>
Add Labels
</summary><div class="cell" data-fig.dim="[8,6]">
<div class="sourceCode" id="cb60"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span class="va">label_df_press</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>
  label <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Colts"</span>, <span class="st">"Everyone else"</span><span class="op">)</span>,
  color <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"#359fda"</span>, <span class="st">"#91c390"</span><span class="op">)</span>,
  fill <span class="op">=</span> <span class="fu">colorspace</span><span class="fu">::</span><span class="fu"><a href="https://colorspace.R-Forge.R-project.org//reference/lighten.html">lighten</a></span><span class="op">(</span><span class="va">color</span>, amount <span class="op">=</span> <span class="fl">0.3</span><span class="op">)</span>,
  x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">16</span>, <span class="fl">30</span><span class="op">)</span>,
  y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">25</span>, <span class="fl">29</span><span class="op">)</span>
<span class="op">)</span>

<span class="va">colt_df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">blitz_pct</span>, y <span class="op">=</span> <span class="va">press_pct</span>, fill <span class="op">=</span> <span class="va">fill</span>, color <span class="op">=</span> <span class="va">color</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">5</span>, pch <span class="op">=</span> <span class="fl">21</span>, alpha <span class="op">=</span> <span class="fl">0.8</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_identity.html">scale_color_identity</a></span><span class="op">(</span>aesthetics <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"fill"</span>, <span class="st">"color"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>
    x <span class="op">=</span> <span class="st">"Blitz Rate"</span>, y <span class="op">=</span> <span class="st">"Pressure Rate"</span>,
    title <span class="op">=</span> <span class="st">"The Colts are pressuring QBs without much of a blitz"</span>,
    subtitle <span class="op">=</span> <span class="st">"Blitz rate vs. pressure rate for each NFL defense,\nthrough Week 15 of the 2020 season"</span>,
    caption <span class="op">=</span> <span class="st">"Source: Pro-Football-Reference.com"</span>
  <span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_x_continuous</a></span><span class="op">(</span>limits <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">45</span><span class="op">)</span>, breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">45</span>, by <span class="op">=</span> <span class="fl">5</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_y_continuous</a></span><span class="op">(</span>limits <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">35</span><span class="op">)</span>, breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">35</span>, by <span class="op">=</span> <span class="fl">5</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_text.html">geom_label</a></span><span class="op">(</span>
    data <span class="op">=</span> <span class="va">label_df_press</span>,
    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">x</span>, y <span class="op">=</span> <span class="va">y</span>, color <span class="op">=</span> <span class="va">color</span>, label <span class="op">=</span> <span class="va">label</span><span class="op">)</span>,
    fill <span class="op">=</span> <span class="st">"#f0f0f0"</span>,
    size <span class="op">=</span> <span class="fl">6</span>,
    fontface <span class="op">=</span> <span class="st">"bold"</span>,
    hjust <span class="op">=</span> <span class="fl">0.8</span>,
    label.size <span class="op">=</span> <span class="cn">NA</span> <span class="co"># remove the border</span>
  <span class="op">)</span> <span class="op">+</span>
  <span class="fu">theme_538</span><span class="op">(</span><span class="op">)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 1 rows containing missing values (geom_point).</code></pre>
</div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/colt-blitz-label-1.png" class="img-fluid" width="4000"></p>
</div>
</div>
</details><div class="cell" data-fig.dim="[8,6]">
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 1 rows containing missing values (geom_point).</code></pre>
</div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/colt-blitz-label-1.png" class="img-fluid" width="4000"></p>
</div>
</div>
</section></section><section id="pass-affected-rate" class="level1"><h1>Pass Affected Rate</h1>
<p>The Colts are also getting good pass affected rate, which I’ve extended to be (interceptions + sacks + passes defended)/pass att. This is a proxy for the number of plays where the defense either stops the pass or is directly defending the reception.</p>
<div class="cell" data-fig.dim="[10,8]">
<div class="sourceCode" id="cb63"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span class="va">label_df_cov</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>
  label <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Colts"</span>, <span class="st">"Everyone else"</span><span class="op">)</span>,
  color <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"#359fda"</span>, <span class="st">"#91c390"</span><span class="op">)</span>,
  fill <span class="op">=</span> <span class="fu">colorspace</span><span class="fu">::</span><span class="fu"><a href="https://colorspace.R-Forge.R-project.org//reference/lighten.html">lighten</a></span><span class="op">(</span><span class="va">color</span>, amount <span class="op">=</span> <span class="fl">0.3</span><span class="op">)</span>,
  x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">16</span>, <span class="fl">33</span><span class="op">)</span>,
  y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">25</span>, <span class="fl">28</span><span class="op">)</span>
<span class="op">)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We can then use that to create a very similar plot as what we saw before. Note I’m adding an annotation outside the plot area by turning <code>clip = 'off'</code> in <code><a href="https://ggplot2.tidyverse.org/reference/coord_cartesian.html">coord_cartesian()</a></code>. Otherwise this plot is very close code-wise to the previous one.</p>
<details><summary>
Add Annotations
</summary><div class="cell" data-fig.dim="[9,7]">
<div class="sourceCode" id="cb64"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span class="va">colt_df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">blitz_pct</span>, y <span class="op">=</span> <span class="va">cov_rate</span>, color <span class="op">=</span> <span class="va">color</span>, fill <span class="op">=</span> <span class="va">fill</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">5</span>, pch <span class="op">=</span> <span class="fl">21</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_identity.html">scale_color_identity</a></span><span class="op">(</span>aesthetics <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"fill"</span>, <span class="st">"color"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>
    x <span class="op">=</span> <span class="st">"Blitz Rate"</span>,
    y <span class="op">=</span> <span class="st">"Pass Affected Rate"</span>,
    title <span class="op">=</span> <span class="st">"The Colts affect passes at an elite rate while blitzing the least"</span>,
    subtitle <span class="op">=</span> <span class="st">"Blitz rate vs. Pass affected rate for each NFL defense,\nthrough Week 15 of the 2020 season"</span>,
    caption <span class="op">=</span> <span class="st">"Plot: @thomas_mock | Source: PFR"</span>
  <span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_x_continuous</a></span><span class="op">(</span>limits <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">45</span><span class="op">)</span>, breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">45</span>, by <span class="op">=</span> <span class="fl">5</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_y_continuous</a></span><span class="op">(</span>limits <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">35</span><span class="op">)</span>, breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">35</span>, by <span class="op">=</span> <span class="fl">5</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_cartesian.html">coord_cartesian</a></span><span class="op">(</span>clip <span class="op">=</span> <span class="st">"off"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/annotate.html">annotate</a></span><span class="op">(</span><span class="st">"text"</span>, x <span class="op">=</span> <span class="fl">10</span>, y <span class="op">=</span> <span class="fl">10</span>, label <span class="op">=</span> <span class="st">"Pass affected rate = (ints + sacks + passes defended)/pass attempts"</span>, vjust <span class="op">=</span> <span class="fl">10</span>, hjust <span class="op">=</span> <span class="fl">0.2</span>, color <span class="op">=</span> <span class="st">"darkgrey"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">theme_538</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_text.html">geom_label</a></span><span class="op">(</span>
    data <span class="op">=</span> <span class="va">label_df_cov</span>,
    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">x</span>, y <span class="op">=</span> <span class="va">y</span>, color <span class="op">=</span> <span class="va">color</span>, label <span class="op">=</span> <span class="va">label</span><span class="op">)</span>,
    fill <span class="op">=</span> <span class="st">"#f0f0f0"</span>,
    size <span class="op">=</span> <span class="fl">6</span>,
    fontface <span class="op">=</span> <span class="st">"bold"</span>,
    hjust <span class="op">=</span> <span class="fl">0.8</span>,
    label.size <span class="op">=</span> <span class="cn">NA</span>
  <span class="op">)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/colt-annotate-1.png" class="img-fluid" width="4500"></p>
</div>
</div>
</details><div class="cell" data-fig.dim="[9,7]">
<div class="cell-output-display">
<p><img src="index_files/figure-html/colt-annotate-1.png" class="img-fluid" width="4500"></p>
</div>
</div>
<section id="slope-chart" class="level2"><h2 class="anchored" data-anchor-id="slope-chart">Slope Chart</h2>
<p>By pivoting the data longer, and converting the blitz/pass affected rate columns into a combined column we can pretty quickly get a decent slope-chat put together. In short, we are creating a new metric and corresponding value column out of the blitz/pass affected rates.</p>
<p>This can then be plotted where the metric name is on the x-axis and the metric value is the y-axis. Because both metrics are percentages they’re in the same plotting range.</p>
<div class="cell" data-fig.dim="[4,6]">
<div class="sourceCode" id="cb65"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span class="va">long_colts</span> <span class="op">&lt;-</span> <span class="va">colt_df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>
    color <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/if_else.html">if_else</a></span><span class="op">(</span><span class="va">color</span> <span class="op">==</span> <span class="st">"#91c390"</span>, <span class="st">"grey"</span>, <span class="st">"#359fda"</span><span class="op">)</span>,
    fill <span class="op">=</span> <span class="va">color</span>
  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html">rename</a></span><span class="op">(</span>pass_affected_rate <span class="op">=</span> <span class="va">cov_rate</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html">pivot_longer</a></span><span class="op">(</span>
    cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">blitz_pct</span>, <span class="va">pass_affected_rate</span><span class="op">)</span>, 
    names_to <span class="op">=</span> <span class="st">"metric"</span>, values_to <span class="op">=</span> <span class="st">"value"</span>
    <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>
    metric <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/if_else.html">if_else</a></span><span class="op">(</span>
      <span class="va">metric</span> <span class="op">==</span> <span class="st">"blitz_pct"</span>, 
      <span class="st">"Blitz Rate"</span>, 
      <span class="st">"Pass Affected Rate"</span>
      <span class="op">)</span>
  <span class="op">)</span>

<span class="va">long_colts</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 64 × 13
   tm    press_pct pass_att   int pass_def  sack   ypa anypa color fill  att_def
   &lt;chr&gt;     &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;   &lt;dbl&gt;
 1 Pitt…      35.1      526    18       84    56   6.6   4.7 grey  grey      158
 2 Pitt…      35.1      526    18       84    56   6.6   4.7 grey  grey      158
 3 New …      26.3      557    18       84    45   6.7   5.4 grey  grey      147
 4 New …      26.3      557    18       84    45   6.7   5.4 grey  grey      147
 5 Miam…      24.8      545    18       76    41   8     6.2 grey  grey      135
 6 Miam…      24.8      545    18       76    41   8     6.2 grey  grey      135
 7 Los …      23.4      548    14       68    53   6.2   4.6 grey  grey      135
 8 Los …      23.4      548    14       68    53   6.2   4.6 grey  grey      135
 9 Wash…      25.9      529    16       66    47   6.4   4.8 grey  grey      129
10 Wash…      25.9      529    16       66    47   6.4   4.8 grey  grey      129
# … with 54 more rows, and 2 more variables: metric &lt;chr&gt;, value &lt;dbl&gt;</code></pre>
</div>
</div>
<section id="initial-slope-chart" class="level3"><h3 class="anchored" data-anchor-id="initial-slope-chart">Initial Slope Chart</h3>
<p>The initial slope chart is only a few lines of code. We’ll plot metric names on the x-axis, metric values on the y-axis, add lines by team between the compared measures, and then layer points on top of it all.</p>
<div class="cell" data-fig.dim="[4,6]">
<div class="sourceCode" id="cb67"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span class="va">long_colts</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">metric</span>, y <span class="op">=</span> <span class="va">value</span>, group <span class="op">=</span> <span class="va">tm</span>, color <span class="op">=</span> <span class="va">color</span>, fill <span class="op">=</span> <span class="va">fill</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/if_else.html">if_else</a></span><span class="op">(</span><span class="va">tm</span> <span class="op">==</span> <span class="st">"Indianapolis Colts"</span>, <span class="fl">2</span>, <span class="fl">0.5</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">5</span>, pch <span class="op">=</span> <span class="fl">21</span>, color <span class="op">=</span> <span class="st">"#f0f0f0"</span>, stroke <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_identity.html">scale_color_identity</a></span><span class="op">(</span>aesthetics <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"fill"</span>, <span class="st">"color"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_identity.html">scale_size_identity</a></span><span class="op">(</span><span class="op">)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-27-1.png" class="img-fluid" width="600"></p>
</div>
</div>
</section><section id="add-theme-and-context" class="level3"><h3 class="anchored" data-anchor-id="add-theme-and-context">Add theme and context</h3>
<p>We can further enhance the plot with the title/source data. I’ve also shared a little “hack” that allows you to plot outside of the plot area. By setting <code>clip = 'off'</code> in <code>coord_cartestian()</code>, we can add an annotation that falls “outside” of the plot area. This lets us add a description note similar to what FiveThirtyEight does with some of their plots.</p>
<details><summary>
Add Theme and Context
</summary><div class="cell" data-fig.dim="[4,6]">
<div class="sourceCode" id="cb68"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span class="va">colt_slope</span> <span class="op">&lt;-</span> <span class="va">long_colts</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">metric</span>, y <span class="op">=</span> <span class="va">value</span>, group <span class="op">=</span> <span class="va">tm</span>, color <span class="op">=</span> <span class="va">color</span>, fill <span class="op">=</span> <span class="va">fill</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/if_else.html">if_else</a></span><span class="op">(</span><span class="va">tm</span> <span class="op">==</span> <span class="st">"Indianapolis Colts"</span>, <span class="fl">2</span>, <span class="fl">0.5</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">5</span>, pch <span class="op">=</span> <span class="fl">21</span>, color <span class="op">=</span> <span class="st">"#f0f0f0"</span>, stroke <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_text.html">geom_label</a></span><span class="op">(</span>
    data <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">long_colts</span>, <span class="va">tm</span> <span class="op">==</span> <span class="st">"Indianapolis Colts"</span><span class="op">)</span>,
    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>label <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="va">value</span>, <span class="fl">0</span><span class="op">)</span>, <span class="st">"%"</span><span class="op">)</span><span class="op">)</span>,
    fill <span class="op">=</span> <span class="cn">NA</span>,
    hjust <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">0</span><span class="op">)</span>,
    nudge_x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">0.02</span>, <span class="fl">0.02</span><span class="op">)</span>,
    label.size <span class="op">=</span> <span class="cn">NA</span>,
    family <span class="op">=</span> <span class="st">"Chivo"</span>,
    fontface <span class="op">=</span> <span class="st">"bold"</span>,
    size <span class="op">=</span> <span class="fl">6</span>
  <span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/annotate.html">annotate</a></span><span class="op">(</span>
    <span class="st">"text"</span>, x <span class="op">=</span> <span class="fl">1</span>, y <span class="op">=</span> <span class="fl">12</span>, vjust <span class="op">=</span> <span class="fl">11</span>, hjust <span class="op">=</span> <span class="fl">0.4</span>, color <span class="op">=</span> <span class="st">"darkgrey"</span>,
    family <span class="op">=</span> <span class="st">"Chivo"</span>,
    label <span class="op">=</span> <span class="st">"Pass affected rate = (sacks + ints + passes defended)/pass att"</span>
    <span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_cartesian.html">coord_cartesian</a></span><span class="op">(</span>clip <span class="op">=</span> <span class="st">"off"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_y_continuous</a></span><span class="op">(</span>limits <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">12</span>, <span class="fl">43</span><span class="op">)</span>, breaks <span class="op">=</span> <span class="fu">scales</span><span class="fu">::</span><span class="fu"><a href="https://scales.r-lib.org/reference/pretty_breaks.html">pretty_breaks</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">7</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_discrete.html">scale_x_discrete</a></span><span class="op">(</span>expand <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0.2</span>, <span class="fl">0.2</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_identity.html">scale_color_identity</a></span><span class="op">(</span>aesthetics <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"fill"</span>, <span class="st">"color"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_identity.html">scale_size_identity</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">theme_538</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span>
    panel.grid.major.y <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank</a></span><span class="op">(</span><span class="op">)</span>,
    axis.text.y <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank</a></span><span class="op">(</span><span class="op">)</span>,
    plot.margin <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">margin</a></span><span class="op">(</span><span class="fl">0.5</span>, <span class="fl">0.5</span>, <span class="fl">0.1</span>, <span class="fl">0.5</span>, unit <span class="op">=</span> <span class="st">"cm"</span><span class="op">)</span>,
    axis.text.x <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"black"</span>, size <span class="op">=</span> <span class="fl">20</span><span class="op">)</span>,
    plot.caption <span class="op">=</span> <span class="fu"><a href="https://wilkelab.org/ggtext/reference/element_markdown.html">element_markdown</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">14</span><span class="op">)</span>
  <span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>
    x <span class="op">=</span> <span class="st">""</span>,
    y <span class="op">=</span> <span class="st">""</span>,
    title <span class="op">=</span> <span class="st">"The Colts affect more passes with fewer rushers"</span>,
    subtitle <span class="op">=</span> <span class="st">"Data since through Week 15 of the 2020 NFL season"</span>,
    caption <span class="op">=</span> <span class="st">"**Plot**: @thomas_mock | **Data**: PFR"</span>
  <span class="op">)</span>

<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsave.html">ggsave</a></span><span class="op">(</span><span class="st">"colt_slope.png"</span>, <span class="va">colt_slope</span>, height <span class="op">=</span> <span class="fl">5</span>, width <span class="op">=</span> <span class="fl">4</span>, dpi <span class="op">=</span> <span class="fl">500</span>, scale <span class="op">=</span> <span class="fl">1.75</span><span class="op">)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 1 row(s) containing missing values (geom_path).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 1 rows containing missing values (geom_point).</code></pre>
</div>
</div>
</details><p><img src="colt_slope.png" class="img-fluid"></p>
</section></section><section id="barbell" class="level2"><h2 class="anchored" data-anchor-id="barbell">Barbell</h2>
<p>For our last example with this data, we’re going to really highlight the Colt’s passing defense effectiveness without a blitz. A barbell plot is another combo of lines + points, where the line is a segment between the two measures of interest.</p>
<p>Our first attempt is pretty straightforward, we’ll plot the segment between the points, then layer two <code>geom_points()</code>, one for each measure.</p>
<details><summary>
Initial Barbell
</summary><div class="cell">
<div class="sourceCode" id="cb71"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span class="va">barbell_first</span> <span class="op">&lt;-</span> <span class="va">colt_df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html">rename</a></span><span class="op">(</span>pass_affected_rate <span class="op">=</span> <span class="va">cov_rate</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>
    color <span class="op">=</span> <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_replace.html">str_replace</a></span><span class="op">(</span><span class="va">color</span>, <span class="st">"#91c390"</span>, <span class="st">"grey"</span><span class="op">)</span>,
    fill <span class="op">=</span> <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_replace.html">str_replace</a></span><span class="op">(</span><span class="va">fill</span>, <span class="st">"#91c390"</span>, <span class="st">"grey"</span><span class="op">)</span>,
    tm <span class="op">=</span> <span class="fu"><a href="https://stringr.tidyverse.org/reference/word.html">word</a></span><span class="op">(</span><span class="va">tm</span>, <span class="op">-</span><span class="fl">1</span><span class="op">)</span>
    <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">blitz_pct</span>, y <span class="op">=</span> <span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_reorder.html">fct_reorder</a></span><span class="op">(</span><span class="va">tm</span>, <span class="va">pass_affected_rate</span><span class="op">)</span>, 
             group <span class="op">=</span> <span class="va">tm</span>, color <span class="op">=</span> <span class="va">color</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_segment.html">geom_segment</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>xend <span class="op">=</span> <span class="va">pass_affected_rate</span>, yend <span class="op">=</span> <span class="va">tm</span><span class="op">)</span>, size <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">5</span>, color <span class="op">=</span> <span class="st">"grey"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">pass_affected_rate</span>, y <span class="op">=</span> <span class="va">tm</span><span class="op">)</span>, size <span class="op">=</span> <span class="fl">5</span>, color <span class="op">=</span> <span class="st">"black"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_identity.html">scale_color_identity</a></span><span class="op">(</span><span class="op">)</span>

<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsave.html">ggsave</a></span><span class="op">(</span><span class="st">"barbell_first.png"</span>, <span class="va">barbell_first</span>, height <span class="op">=</span> <span class="fl">12</span>, width <span class="op">=</span> <span class="fl">8</span>, units <span class="op">=</span> <span class="st">"in"</span>, dpi <span class="op">=</span> <span class="fl">300</span><span class="op">)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</details><p><img src="barbell_first.png" class="img-fluid"></p>
<section id="theme-and-context" class="level3"><h3 class="anchored" data-anchor-id="theme-and-context">Theme and context</h3>
<p>We can add some more labels and context, along with our theme and a custom color placement to indicate the Colts as the outlier of interest.</p>
<details><summary>
Barbell Theme
</summary><div class="cell" data-fig.dim="[4,6]">
<div class="sourceCode" id="cb72"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span class="va">colt_colors</span> <span class="op">&lt;-</span> <span class="va">colt_df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="va">cov_rate</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>color <span class="op">=</span> <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_replace.html">str_replace</a></span><span class="op">(</span><span class="va">color</span>, <span class="st">"#91c390"</span>, <span class="st">"black"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html">pull</a></span><span class="op">(</span><span class="va">color</span><span class="op">)</span>

<span class="va">pass_label_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>
  x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">20</span>, <span class="fl">19.5</span><span class="op">)</span>,
  tm <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">30</span>, <span class="fl">25</span><span class="op">)</span>,
  label <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Blitz Rate"</span>, <span class="st">"Pass Affected&lt;br&gt;Rate"</span><span class="op">)</span>,
  color <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"grey"</span>, <span class="st">"black"</span><span class="op">)</span>
<span class="op">)</span>

<span class="va">ex_barbell</span> <span class="op">&lt;-</span> <span class="va">colt_df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html">rename</a></span><span class="op">(</span>pass_affected_rate <span class="op">=</span> <span class="va">cov_rate</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>
    color <span class="op">=</span> <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_replace.html">str_replace</a></span><span class="op">(</span><span class="va">color</span>, <span class="st">"#91c390"</span>, <span class="st">"grey"</span><span class="op">)</span>,
    fill <span class="op">=</span> <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_replace.html">str_replace</a></span><span class="op">(</span><span class="va">fill</span>, <span class="st">"#91c390"</span>, <span class="st">"grey"</span><span class="op">)</span>,
    tm <span class="op">=</span> <span class="fu"><a href="https://stringr.tidyverse.org/reference/word.html">word</a></span><span class="op">(</span><span class="va">tm</span>, <span class="op">-</span><span class="fl">1</span><span class="op">)</span>
  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">blitz_pct</span>, y <span class="op">=</span> <span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_reorder.html">fct_reorder</a></span><span class="op">(</span><span class="va">tm</span>, <span class="va">pass_affected_rate</span><span class="op">)</span>, 
             group <span class="op">=</span> <span class="va">tm</span>, color <span class="op">=</span> <span class="va">color</span>, fill <span class="op">=</span> <span class="va">fill</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_segment.html">geom_segment</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>xend <span class="op">=</span> <span class="va">pass_affected_rate</span>, yend <span class="op">=</span> <span class="va">tm</span><span class="op">)</span>, size <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">5</span>, color <span class="op">=</span> <span class="st">"grey"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">pass_affected_rate</span>, y <span class="op">=</span> <span class="va">tm</span><span class="op">)</span>, size <span class="op">=</span> <span class="fl">5</span>, color <span class="op">=</span> <span class="st">"black"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">ggtext</span><span class="fu">::</span><span class="fu"><a href="https://wilkelab.org/ggtext/reference/geom_richtext.html">geom_richtext</a></span><span class="op">(</span>
    data <span class="op">=</span> <span class="va">pass_label_df</span>,
    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">x</span>, y <span class="op">=</span> <span class="va">tm</span>, label <span class="op">=</span> <span class="va">label</span>, color <span class="op">=</span> <span class="va">color</span><span class="op">)</span>,
    fill <span class="op">=</span> <span class="st">"#f0f0f0"</span>,
    label.color <span class="op">=</span> <span class="cn">NA</span>,
    <span class="co"># remove background and outline</span>
    label.padding <span class="op">=</span> <span class="fu">grid</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/grid/unit.html">unit</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">4</span><span class="op">)</span>, <span class="st">"pt"</span><span class="op">)</span>,
    <span class="co"># remove padding</span>
    family <span class="op">=</span> <span class="st">"Chivo"</span>,
    hjust <span class="op">=</span> <span class="fl">1</span>,
    fontface <span class="op">=</span> <span class="st">"bold"</span>,
    size <span class="op">=</span> <span class="fl">5</span>
  <span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/annotate.html">annotate</a></span><span class="op">(</span>
    <span class="st">"text"</span>,
    x <span class="op">=</span> <span class="fl">10</span>,
    y <span class="op">=</span> <span class="fl">1</span>,
    vjust <span class="op">=</span> <span class="fl">10</span>,
    hjust <span class="op">=</span> <span class="fl">0.4</span>,
    color <span class="op">=</span> <span class="st">"darkgrey"</span>,
    family <span class="op">=</span> <span class="st">"Chivo"</span>,
    label <span class="op">=</span> <span class="st">"Pass affected rate = (sacks + ints + passes defended)/pass att"</span>
  <span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_x_continuous</a></span><span class="op">(</span>limits <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">45</span><span class="op">)</span>, breaks <span class="op">=</span> <span class="fu">scales</span><span class="fu">::</span><span class="fu"><a href="https://scales.r-lib.org/reference/pretty_breaks.html">pretty_breaks</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">7</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_identity.html">scale_color_identity</a></span><span class="op">(</span>aesthetics <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"fill"</span>, <span class="st">"color"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_cartesian.html">coord_cartesian</a></span><span class="op">(</span>clip <span class="op">=</span> <span class="st">"off"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>
    x <span class="op">=</span> <span class="st">"&lt;span style = 'color:grey;'&gt;Blitz rate&lt;/span&gt; vs Pass affected rate"</span>,
    y <span class="op">=</span> <span class="st">""</span>,
    title <span class="op">=</span> <span class="st">"The Colts affect more passes with fewer rushers"</span>,
    subtitle <span class="op">=</span> <span class="st">"Data through Week 15 of the 2020 NFL season"</span>,
    caption <span class="op">=</span> <span class="st">"**Plot**: @thomas_mock | **Data**: PFR"</span>
  <span class="op">)</span> <span class="op">+</span>
  <span class="fu">theme_538</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span>
    panel.grid.major.y <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank</a></span><span class="op">(</span><span class="op">)</span>,
    axis.text.y <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>color <span class="op">=</span> <span class="va">colt_colors</span>, size <span class="op">=</span> <span class="fl">18</span><span class="op">)</span>,
    axis.title.x <span class="op">=</span> <span class="fu"><a href="https://wilkelab.org/ggtext/reference/element_markdown.html">element_markdown</a></span><span class="op">(</span><span class="op">)</span>,
    plot.caption <span class="op">=</span> <span class="fu"><a href="https://wilkelab.org/ggtext/reference/element_markdown.html">element_markdown</a></span><span class="op">(</span><span class="op">)</span>
  <span class="op">)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Vectorized input to `element_text()` is not officially supported.
Results may be unexpected or may change in future versions of ggplot2.</code></pre>
</div>
<div class="sourceCode" id="cb74"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsave.html">ggsave</a></span><span class="op">(</span><span class="st">"barbell.png"</span>, <span class="va">ex_barbell</span>, height <span class="op">=</span> <span class="fl">12</span>, width <span class="op">=</span> <span class="fl">8</span>, units <span class="op">=</span> <span class="st">"in"</span>, dpi <span class="op">=</span> <span class="fl">300</span><span class="op">)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</details><p><img src="barbell.png" class="img-fluid"></p>
<hr></section></section></section><section id="the-end" class="level1"><h1>The end</h1>
<p>We’ve now covered quite a bit about themes and customization of <code>ggplot2</code> beyond the basics! You can dive back into other themes from <code>ggthemes</code> to recreate them/build off of them or develop your own novel theme to use.</p>
<p>If my blog has helped you, you can <a href="https://www.buymeacoffee.com/thomasmock">buy me a coffee</a>!</p>
<div class="callout-tip callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target="#callout-1" aria-controls="callout-1" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Expand for Session Info
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-1" class="callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>─ Session info ───────────────────────────────────────────────────────────────
 setting  value
 version  R version 4.2.0 (2022-04-22)
 os       macOS Monterey 12.2.1
 system   aarch64, darwin20
 ui       X11
 language (EN)
 collate  en_US.UTF-8
 ctype    en_US.UTF-8
 tz       America/Chicago
 date     2022-04-28
 pandoc   2.18 @ /Applications/RStudio.app/Contents/MacOS/quarto/bin/tools/ (via rmarkdown)
 quarto   0.9.294 @ /usr/local/bin/quarto

─ Packages ───────────────────────────────────────────────────────────────────
 package     * version date (UTC) lib source
 colorspace  * 2.0-3   2022-02-21 [1] CRAN (R 4.2.0)
 dplyr       * 1.0.8   2022-02-08 [1] CRAN (R 4.2.0)
 espnscrapeR * 0.6.5   2022-04-26 [1] Github (jthomasmock/espnscrapeR@084ce80)
 forcats     * 0.5.1   2021-01-27 [1] CRAN (R 4.2.0)
 ggplot2     * 3.3.5   2021-06-25 [1] CRAN (R 4.2.0)
 ggridges    * 0.5.3   2021-01-08 [1] CRAN (R 4.2.0)
 ggtext      * 0.1.1   2020-12-17 [1] CRAN (R 4.2.0)
 ggthemes    * 4.2.4   2021-01-20 [1] CRAN (R 4.2.0)
 purrr       * 0.3.4   2020-04-17 [1] CRAN (R 4.2.0)
 readr       * 2.1.2   2022-01-30 [1] CRAN (R 4.2.0)
 rvest       * 1.0.2   2021-10-16 [1] CRAN (R 4.2.0)
 sessioninfo * 1.2.2   2021-12-06 [1] CRAN (R 4.2.0)
 stringr     * 1.4.0   2019-02-10 [1] CRAN (R 4.2.0)
 systemfonts * 1.0.4   2022-02-11 [1] CRAN (R 4.2.0)
 tibble      * 3.1.6   2021-11-07 [1] CRAN (R 4.2.0)
 tidyr       * 1.2.0   2022-02-01 [1] CRAN (R 4.2.0)
 tidyverse   * 1.3.1   2021-04-15 [1] CRAN (R 4.2.0)

 [1] /Library/Frameworks/R.framework/Versions/4.2-arm64/Resources/library

──────────────────────────────────────────────────────────────────────────────</code></pre>
</div>
</div>
</div>
</div>
</div>


</section></main><!-- /main --><script type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      let href = ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script><script src="https://utteranc.es/client.js" repo="jthomasmock/themockup-blog" issue-term="pathname" theme="github-light" crossorigin="anonymous" async="">
</script>
</div> <!-- /content -->



</body></html>