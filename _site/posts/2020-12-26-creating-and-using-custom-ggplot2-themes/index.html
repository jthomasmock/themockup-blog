<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">

<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"/>
  <meta name="generator" content="distill" />

  <style type="text/css">
  /* Hide doc at startup (prevent jankiness while JS renders/transforms) */
  body {
    visibility: hidden;
  }
  </style>

 <!--radix_placeholder_import_source-->
 <!--/radix_placeholder_import_source-->

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ad0000; } /* Alert */
code span.an { color: #5e5e5e; } /* Annotation */
code span.at { color: #20794d; } /* Attribute */
code span.bn { color: #ad0000; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007ba5; } /* ControlFlow */
code span.ch { color: #20794d; } /* Char */
code span.cn { color: #8f5902; } /* Constant */
code span.co { color: #5e5e5e; } /* Comment */
code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
code span.dt { color: #ad0000; } /* DataType */
code span.dv { color: #ad0000; } /* DecVal */
code span.er { color: #ad0000; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #ad0000; } /* Float */
code span.fu { color: #4758ab; } /* Function */
code span.im { } /* Import */
code span.in { color: #5e5e5e; } /* Information */
code span.kw { color: #007ba5; } /* Keyword */
code span.op { color: #5e5e5e; } /* Operator */
code span.ot { color: #007ba5; } /* Other */
code span.pp { color: #ad0000; } /* Preprocessor */
code span.sc { color: #20794d; } /* SpecialChar */
code span.ss { color: #20794d; } /* SpecialString */
code span.st { color: #20794d; } /* String */
code span.va { color: #111111; } /* Variable */
code span.vs { color: #20794d; } /* VerbatimString */
code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
</style>

  <!--radix_placeholder_meta_tags-->
<title>The Mockup Blog: Creating and using custom ggplot2 themes</title>

<meta property="description" itemprop="description" content="The best way to make each plot your own."/>

<link rel="canonical" href="https://themockup.blog/posts/2020-12-26-creating-and-using-custom-ggplot2-themes/"/>

<!--  https://schema.org/Article -->
<meta property="article:published" itemprop="datePublished" content="2020-12-26"/>
<meta property="article:created" itemprop="dateCreated" content="2020-12-26"/>
<meta name="article:author" content="Thomas Mock"/>

<!--  https://developers.facebook.com/docs/sharing/webmasters#markup -->
<meta property="og:title" content="The Mockup Blog: Creating and using custom ggplot2 themes"/>
<meta property="og:type" content="article"/>
<meta property="og:description" content="The best way to make each plot your own."/>
<meta property="og:url" content="https://themockup.blog/posts/2020-12-26-creating-and-using-custom-ggplot2-themes/"/>
<meta property="og:image" content="https://themockup.blog/posts/2020-12-26-creating-and-using-custom-ggplot2-themes/preview.png"/>
<meta property="og:image:width" content="1000"/>
<meta property="og:image:height" content="778"/>
<meta property="og:locale" content="en_US"/>
<meta property="og:site_name" content="The Mockup Blog"/>

<!--  https://dev.twitter.com/cards/types/summary -->
<meta property="twitter:card" content="summary_large_image"/>
<meta property="twitter:title" content="The Mockup Blog: Creating and using custom ggplot2 themes"/>
<meta property="twitter:description" content="The best way to make each plot your own."/>
<meta property="twitter:url" content="https://themockup.blog/posts/2020-12-26-creating-and-using-custom-ggplot2-themes/"/>
<meta property="twitter:image" content="https://themockup.blog/posts/2020-12-26-creating-and-using-custom-ggplot2-themes/preview.png"/>
<meta property="twitter:image:width" content="1000"/>
<meta property="twitter:image:height" content="778"/>
<meta property="twitter:site" content="@thomas_mock"/>
<meta property="twitter:creator" content="@thomas_mock"/>

<!--  https://scholar.google.com/intl/en/scholar/inclusion.html#indexing -->
<meta name="citation_title" content="The Mockup Blog: Creating and using custom ggplot2 themes"/>
<meta name="citation_fulltext_html_url" content="https://themockup.blog/posts/2020-12-26-creating-and-using-custom-ggplot2-themes/"/>
<meta name="citation_online_date" content="2020/12/26"/>
<meta name="citation_publication_date" content="2020/12/26"/>
<meta name="citation_author" content="Thomas Mock"/>
<!--/radix_placeholder_meta_tags-->
  <!--radix_placeholder_rmarkdown_metadata-->

<script type="text/json" id="radix-rmarkdown-metadata">
{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["title","description","author","date","base_url","output","preview","twitter","categories","citation_url","canonical_url"]}},"value":[{"type":"character","attributes":{},"value":["Creating and using custom ggplot2 themes"]},{"type":"character","attributes":{},"value":["The best way to make each plot your own."]},{"type":"list","attributes":{},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","url"]}},"value":[{"type":"character","attributes":{},"value":["Thomas Mock"]},{"type":"character","attributes":{},"value":["https://twitter.com/thomas_mock"]}]}]},{"type":"character","attributes":{},"value":["12-26-2020"]},{"type":"character","attributes":{},"value":["https://themockup.blog"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["distill::distill_article"]}},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["toc","toc_depth","self_contained","highlight","highlight_downlit"]}},"value":[{"type":"logical","attributes":{},"value":[true]},{"type":"integer","attributes":{},"value":[3]},{"type":"logical","attributes":{},"value":[false]},{"type":"character","attributes":{},"value":["default"]},{"type":"logical","attributes":{},"value":[true]}]}]},{"type":"character","attributes":{},"value":["preview.png"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["site","creator"]}},"value":[{"type":"character","attributes":{},"value":["@thomas_mock"]},{"type":"character","attributes":{},"value":["@thomas_mock"]}]},{"type":"character","attributes":{},"value":["ggplot2","data visualization","theme","tidyverse","NFL","espnscrapeR"]},{"type":"character","attributes":{},"value":["https://themockup.blog/posts/2020-12-26-creating-and-using-custom-ggplot2-themes/"]},{"type":"character","attributes":{},"value":["https://themockup.blog/posts/2020-12-26-creating-and-using-custom-ggplot2-themes/"]}]}
</script>
<!--/radix_placeholder_rmarkdown_metadata-->
  
  <script type="text/json" id="radix-resource-manifest">
  {"type":"character","attributes":{},"value":["barbell_first.png","barbell.png","colt_slope.png","creating-and-using-custom-ggplot2-themes_files/anchor-4.2.2/anchor.min.js","creating-and-using-custom-ggplot2-themes_files/bowser-1.9.3/bowser.min.js","creating-and-using-custom-ggplot2-themes_files/distill-2.2.21/template.v2.js","creating-and-using-custom-ggplot2-themes_files/figure-html5/colt-annotate-1.png","creating-and-using-custom-ggplot2-themes_files/figure-html5/colt-blitz-1.png","creating-and-using-custom-ggplot2-themes_files/figure-html5/colt-blitz-label-1.png","creating-and-using-custom-ggplot2-themes_files/figure-html5/nfl_stand_color2-1.png","creating-and-using-custom-ggplot2-themes_files/figure-html5/nfl-stand-color-1.png","creating-and-using-custom-ggplot2-themes_files/figure-html5/playoff-seed-1.png","creating-and-using-custom-ggplot2-themes_files/figure-html5/ridge-plot-1.png","creating-and-using-custom-ggplot2-themes_files/figure-html5/stand-direct-labels-1.png","creating-and-using-custom-ggplot2-themes_files/figure-html5/unnamed-chunk-10-1.png","creating-and-using-custom-ggplot2-themes_files/figure-html5/unnamed-chunk-11-1.png","creating-and-using-custom-ggplot2-themes_files/figure-html5/unnamed-chunk-12-1.png","creating-and-using-custom-ggplot2-themes_files/figure-html5/unnamed-chunk-13-1.png","creating-and-using-custom-ggplot2-themes_files/figure-html5/unnamed-chunk-14-1.png","creating-and-using-custom-ggplot2-themes_files/figure-html5/unnamed-chunk-15-1.png","creating-and-using-custom-ggplot2-themes_files/figure-html5/unnamed-chunk-16-1.png","creating-and-using-custom-ggplot2-themes_files/figure-html5/unnamed-chunk-17-1.png","creating-and-using-custom-ggplot2-themes_files/figure-html5/unnamed-chunk-18-1.png","creating-and-using-custom-ggplot2-themes_files/figure-html5/unnamed-chunk-19-1.png","creating-and-using-custom-ggplot2-themes_files/figure-html5/unnamed-chunk-20-1.png","creating-and-using-custom-ggplot2-themes_files/figure-html5/unnamed-chunk-23-1.png","creating-and-using-custom-ggplot2-themes_files/figure-html5/unnamed-chunk-24-1.png","creating-and-using-custom-ggplot2-themes_files/figure-html5/unnamed-chunk-26-1.png","creating-and-using-custom-ggplot2-themes_files/figure-html5/unnamed-chunk-27-1.png","creating-and-using-custom-ggplot2-themes_files/figure-html5/unnamed-chunk-3-1.png","creating-and-using-custom-ggplot2-themes_files/figure-html5/unnamed-chunk-4-1.png","creating-and-using-custom-ggplot2-themes_files/figure-html5/unnamed-chunk-5-1.png","creating-and-using-custom-ggplot2-themes_files/figure-html5/unnamed-chunk-6-1.png","creating-and-using-custom-ggplot2-themes_files/figure-html5/unnamed-chunk-7-1.png","creating-and-using-custom-ggplot2-themes_files/figure-html5/unnamed-chunk-8-1.png","creating-and-using-custom-ggplot2-themes_files/figure-html5/unnamed-chunk-9-1.png","creating-and-using-custom-ggplot2-themes_files/header-attrs-2.5.3/header-attrs.js","creating-and-using-custom-ggplot2-themes_files/jquery-1.11.3/jquery.min.js","creating-and-using-custom-ggplot2-themes_files/webcomponents-2.0.0/webcomponents.js","preview.png","stand_plot_logo.png"]}
  </script>
  <!--radix_placeholder_navigation_in_header-->
<meta name="distill:offset" content="../.."/>

<script type="application/javascript">

  window.headroom_prevent_pin = false;

  window.document.addEventListener("DOMContentLoaded", function (event) {

    // initialize headroom for banner
    var header = $('header').get(0);
    var headerHeight = header.offsetHeight;
    var headroom = new Headroom(header, {
      tolerance: 5,
      onPin : function() {
        if (window.headroom_prevent_pin) {
          window.headroom_prevent_pin = false;
          headroom.unpin();
        }
      }
    });
    headroom.init();
    if(window.location.hash)
      headroom.unpin();
    $(header).addClass('headroom--transition');

    // offset scroll location for banner on hash change
    // (see: https://github.com/WickyNilliams/headroom.js/issues/38)
    window.addEventListener("hashchange", function(event) {
      window.scrollTo(0, window.pageYOffset - (headerHeight + 25));
    });

    // responsive menu
    $('.distill-site-header').each(function(i, val) {
      var topnav = $(this);
      var toggle = topnav.find('.nav-toggle');
      toggle.on('click', function() {
        topnav.toggleClass('responsive');
      });
    });

    // nav dropdowns
    $('.nav-dropbtn').click(function(e) {
      $(this).next('.nav-dropdown-content').toggleClass('nav-dropdown-active');
      $(this).parent().siblings('.nav-dropdown')
         .children('.nav-dropdown-content').removeClass('nav-dropdown-active');
    });
    $("body").click(function(e){
      $('.nav-dropdown-content').removeClass('nav-dropdown-active');
    });
    $(".nav-dropdown").click(function(e){
      e.stopPropagation();
    });
  });
</script>

<style type="text/css">

/* Theme (user-documented overrideables for nav appearance) */

.distill-site-nav {
  color: rgba(255, 255, 255, 0.8);
  background-color: #0F2E3D;
  font-size: 15px;
  font-weight: 300;
}

.distill-site-nav a {
  color: inherit;
  text-decoration: none;
}

.distill-site-nav a:hover {
  color: white;
}

@media print {
  .distill-site-nav {
    display: none;
  }
}

.distill-site-header {

}

.distill-site-footer {

}


/* Site Header */

.distill-site-header {
  width: 100%;
  box-sizing: border-box;
  z-index: 3;
}

.distill-site-header .nav-left {
  display: inline-block;
  margin-left: 8px;
}

@media screen and (max-width: 768px) {
  .distill-site-header .nav-left {
    margin-left: 0;
  }
}


.distill-site-header .nav-right {
  float: right;
  margin-right: 8px;
}

.distill-site-header a,
.distill-site-header .title {
  display: inline-block;
  text-align: center;
  padding: 14px 10px 14px 10px;
}

.distill-site-header .title {
  font-size: 18px;
  min-width: 150px;
}

.distill-site-header .logo {
  padding: 0;
}

.distill-site-header .logo img {
  display: none;
  max-height: 20px;
  width: auto;
  margin-bottom: -4px;
}

.distill-site-header .nav-image img {
  max-height: 18px;
  width: auto;
  display: inline-block;
  margin-bottom: -3px;
}



@media screen and (min-width: 1000px) {
  .distill-site-header .logo img {
    display: inline-block;
  }
  .distill-site-header .nav-left {
    margin-left: 20px;
  }
  .distill-site-header .nav-right {
    margin-right: 20px;
  }
  .distill-site-header .title {
    padding-left: 12px;
  }
}


.distill-site-header .nav-toggle {
  display: none;
}

.nav-dropdown {
  display: inline-block;
  position: relative;
}

.nav-dropdown .nav-dropbtn {
  border: none;
  outline: none;
  color: rgba(255, 255, 255, 0.8);
  padding: 16px 10px;
  background-color: transparent;
  font-family: inherit;
  font-size: inherit;
  font-weight: inherit;
  margin: 0;
  margin-top: 1px;
  z-index: 2;
}

.nav-dropdown-content {
  display: none;
  position: absolute;
  background-color: white;
  min-width: 200px;
  border: 1px solid rgba(0,0,0,0.15);
  border-radius: 4px;
  box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.1);
  z-index: 1;
  margin-top: 2px;
  white-space: nowrap;
  padding-top: 4px;
  padding-bottom: 4px;
}

.nav-dropdown-content hr {
  margin-top: 4px;
  margin-bottom: 4px;
  border: none;
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
}

.nav-dropdown-active {
  display: block;
}

.nav-dropdown-content a, .nav-dropdown-content .nav-dropdown-header {
  color: black;
  padding: 6px 24px;
  text-decoration: none;
  display: block;
  text-align: left;
}

.nav-dropdown-content .nav-dropdown-header {
  display: block;
  padding: 5px 24px;
  padding-bottom: 0;
  text-transform: uppercase;
  font-size: 14px;
  color: #999999;
  white-space: nowrap;
}

.nav-dropdown:hover .nav-dropbtn {
  color: white;
}

.nav-dropdown-content a:hover {
  background-color: #ddd;
  color: black;
}

.nav-right .nav-dropdown-content {
  margin-left: -45%;
  right: 0;
}

@media screen and (max-width: 768px) {
  .distill-site-header a, .distill-site-header .nav-dropdown  {display: none;}
  .distill-site-header a.nav-toggle {
    float: right;
    display: block;
  }
  .distill-site-header .title {
    margin-left: 0;
  }
  .distill-site-header .nav-right {
    margin-right: 0;
  }
  .distill-site-header {
    overflow: hidden;
  }
  .nav-right .nav-dropdown-content {
    margin-left: 0;
  }
}


@media screen and (max-width: 768px) {
  .distill-site-header.responsive {position: relative; min-height: 500px; }
  .distill-site-header.responsive a.nav-toggle {
    position: absolute;
    right: 0;
    top: 0;
  }
  .distill-site-header.responsive a,
  .distill-site-header.responsive .nav-dropdown {
    display: block;
    text-align: left;
  }
  .distill-site-header.responsive .nav-left,
  .distill-site-header.responsive .nav-right {
    width: 100%;
  }
  .distill-site-header.responsive .nav-dropdown {float: none;}
  .distill-site-header.responsive .nav-dropdown-content {position: relative;}
  .distill-site-header.responsive .nav-dropdown .nav-dropbtn {
    display: block;
    width: 100%;
    text-align: left;
  }
}

/* Site Footer */

.distill-site-footer {
  width: 100%;
  overflow: hidden;
  box-sizing: border-box;
  z-index: 3;
  margin-top: 30px;
  padding-top: 30px;
  padding-bottom: 30px;
  text-align: center;
}

/* Headroom */

d-title {
  padding-top: 6rem;
}

@media print {
  d-title {
    padding-top: 4rem;
  }
}

.headroom {
  z-index: 1000;
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
}

.headroom--transition {
  transition: all .4s ease-in-out;
}

.headroom--unpinned {
  top: -100px;
}

.headroom--pinned {
  top: 0;
}

/* adjust viewport for navbar height */
/* helps vertically center bootstrap (non-distill) content */
.min-vh-100 {
  min-height: calc(100vh - 100px) !important;
}

</style>

<script src="../../site_libs/jquery-1.11.3/jquery.min.js"></script>
<link href="../../site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet"/>
<link href="../../site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet"/>
<script src="../../site_libs/headroom-0.9.4/headroom.min.js"></script>
<script src="../../site_libs/autocomplete-0.37.1/autocomplete.min.js"></script>
<script src="../../site_libs/fuse-6.4.1/fuse.min.js"></script>

<script type="application/javascript">

function getMeta(metaName) {
  var metas = document.getElementsByTagName('meta');
  for (let i = 0; i < metas.length; i++) {
    if (metas[i].getAttribute('name') === metaName) {
      return metas[i].getAttribute('content');
    }
  }
  return '';
}

function offsetURL(url) {
  var offset = getMeta('distill:offset');
  return offset ? offset + '/' + url : url;
}

function createFuseIndex() {

  // create fuse index
  var options = {
    keys: [
      { name: 'title', weight: 20 },
      { name: 'categories', weight: 15 },
      { name: 'description', weight: 10 },
      { name: 'contents', weight: 5 },
    ],
    ignoreLocation: true,
    threshold: 0
  };
  var fuse = new window.Fuse([], options);

  // fetch the main search.json
  return fetch(offsetURL('search.json'))
    .then(function(response) {
      if (response.status == 200) {
        return response.json().then(function(json) {
          // index main articles
          json.articles.forEach(function(article) {
            fuse.add(article);
          });
          // download collections and index their articles
          return Promise.all(json.collections.map(function(collection) {
            return fetch(offsetURL(collection)).then(function(response) {
              if (response.status === 200) {
                return response.json().then(function(articles) {
                  articles.forEach(function(article) {
                    fuse.add(article);
                  });
                })
              } else {
                return Promise.reject(
                  new Error('Unexpected status from search index request: ' +
                            response.status)
                );
              }
            });
          })).then(function() {
            return fuse;
          });
        });

      } else {
        return Promise.reject(
          new Error('Unexpected status from search index request: ' +
                      response.status)
        );
      }
    });
}

window.document.addEventListener("DOMContentLoaded", function (event) {

  // get search element (bail if we don't have one)
  var searchEl = window.document.getElementById('distill-search');
  if (!searchEl)
    return;

  createFuseIndex()
    .then(function(fuse) {

      // make search box visible
      searchEl.classList.remove('hidden');

      // initialize autocomplete
      var options = {
        autoselect: true,
        hint: false,
        minLength: 2,
      };
      window.autocomplete(searchEl, options, [{
        source: function(query, callback) {
          const searchOptions = {
            isCaseSensitive: false,
            shouldSort: true,
            minMatchCharLength: 2,
            limit: 10,
          };
          var results = fuse.search(query, searchOptions);
          callback(results
            .map(function(result) { return result.item; })
          );
        },
        templates: {
          suggestion: function(suggestion) {
            var img = suggestion.preview && Object.keys(suggestion.preview).length > 0
              ? `<img src="${offsetURL(suggestion.preview)}"</img>`
              : '';
            var html = `
              <div class="search-item">
                <h3>${suggestion.title}</h3>
                <div class="search-item-description">
                  ${suggestion.description || ''}
                </div>
                <div class="search-item-preview">
                  ${img}
                </div>
              </div>
            `;
            return html;
          }
        }
      }]).on('autocomplete:selected', function(event, suggestion) {
        window.location.href = offsetURL(suggestion.path);
      });
      // remove inline display style on autocompleter (we want to
      // manage responsive display via css)
      $('.algolia-autocomplete').css("display", "");
    })
    .catch(function(error) {
      console.log(error);
    });

});

</script>

<style type="text/css">

.nav-search {
  font-size: x-small;
}

/* Algolioa Autocomplete */

.algolia-autocomplete {
  display: inline-block;
  margin-left: 10px;
  vertical-align: sub;
  background-color: white;
  color: black;
  padding: 6px;
  padding-top: 8px;
  padding-bottom: 0;
  border-radius: 6px;
  border: 1px #0F2E3D solid;
  width: 180px;
}


@media screen and (max-width: 768px) {
  .distill-site-nav .algolia-autocomplete {
    display: none;
    visibility: hidden;
  }
  .distill-site-nav.responsive .algolia-autocomplete {
    display: inline-block;
    visibility: visible;
  }
  .distill-site-nav.responsive .algolia-autocomplete .aa-dropdown-menu {
    margin-left: 0;
    width: 400px;
    max-height: 400px;
  }
}

.algolia-autocomplete .aa-input, .algolia-autocomplete .aa-hint {
  width: 90%;
  outline: none;
  border: none;
}

.algolia-autocomplete .aa-hint {
  color: #999;
}
.algolia-autocomplete .aa-dropdown-menu {
  width: 550px;
  max-height: 70vh;
  overflow-x: visible;
  overflow-y: scroll;
  padding: 5px;
  margin-top: 3px;
  margin-left: -150px;
  background-color: #fff;
  border-radius: 5px;
  border: 1px solid #999;
  border-top: none;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion {
  cursor: pointer;
  padding: 5px 4px;
  border-bottom: 1px solid #eee;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion:last-of-type {
  border-bottom: none;
  margin-bottom: 2px;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item {
  overflow: hidden;
  font-size: 0.8em;
  line-height: 1.4em;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item h3 {
  font-size: 1rem;
  margin-block-start: 0;
  margin-block-end: 5px;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-description {
  display: inline-block;
  overflow: hidden;
  height: 2.8em;
  width: 80%;
  margin-right: 4%;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview {
  display: inline-block;
  width: 15%;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview img {
  height: 3em;
  width: auto;
  display: none;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview img[src] {
  display: initial;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion.aa-cursor {
  background-color: #eee;
}
.algolia-autocomplete .aa-dropdown-menu .aa-suggestion em {
  font-weight: bold;
  font-style: normal;
}

</style>


<!--/radix_placeholder_navigation_in_header-->
  <!--radix_placeholder_distill-->

<style type="text/css">

body {
  background-color: white;
}

.pandoc-table {
  width: 100%;
}

.pandoc-table>caption {
  margin-bottom: 10px;
}

.pandoc-table th:not([align]) {
  text-align: left;
}

.pagedtable-footer {
  font-size: 15px;
}

d-byline .byline {
  grid-template-columns: 2fr 2fr;
}

d-byline .byline h3 {
  margin-block-start: 1.5em;
}

d-byline .byline .authors-affiliations h3 {
  margin-block-start: 0.5em;
}

.authors-affiliations .orcid-id {
  width: 16px;
  height:16px;
  margin-left: 4px;
  margin-right: 4px;
  vertical-align: middle;
  padding-bottom: 2px;
}

d-title .dt-tags {
  margin-top: 1em;
  grid-column: text;
}

.dt-tags .dt-tag {
  text-decoration: none;
  display: inline-block;
  color: rgba(0,0,0,0.6);
  padding: 0em 0.4em;
  margin-right: 0.5em;
  margin-bottom: 0.4em;
  font-size: 70%;
  border: 1px solid rgba(0,0,0,0.2);
  border-radius: 3px;
  text-transform: uppercase;
  font-weight: 500;
}

d-article table.gt_table td,
d-article table.gt_table th {
  border-bottom: none;
}

.html-widget {
  margin-bottom: 2.0em;
}

.l-screen-inset {
  padding-right: 16px;
}

.l-screen .caption {
  margin-left: 10px;
}

.shaded {
  background: rgb(247, 247, 247);
  padding-top: 20px;
  padding-bottom: 20px;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
}

.shaded .html-widget {
  margin-bottom: 0;
  border: 1px solid rgba(0, 0, 0, 0.1);
}

.shaded .shaded-content {
  background: white;
}

.text-output {
  margin-top: 0;
  line-height: 1.5em;
}

.hidden {
  display: none !important;
}

d-article {
  padding-top: 2.5rem;
  padding-bottom: 30px;
}

d-appendix {
  padding-top: 30px;
}

d-article>p>img {
  width: 100%;
}

d-article h2 {
  margin: 1rem 0 1.5rem 0;
}

d-article h3 {
  margin-top: 1.5rem;
}

d-article iframe {
  border: 1px solid rgba(0, 0, 0, 0.1);
  margin-bottom: 2.0em;
  width: 100%;
}

/* Tweak code blocks */

d-article div.sourceCode code,
d-article pre code {
  font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
}

d-article pre,
d-article div.sourceCode,
d-article div.sourceCode pre {
  overflow: auto;
}

d-article div.sourceCode {
  background-color: white;
}

d-article div.sourceCode pre {
  padding-left: 10px;
  font-size: 12px;
  border-left: 2px solid rgba(0,0,0,0.1);
}

d-article pre {
  font-size: 12px;
  color: black;
  background: none;
  margin-top: 0;
  text-align: left;
  white-space: pre;
  word-spacing: normal;
  word-break: normal;
  word-wrap: normal;
  line-height: 1.5;

  -moz-tab-size: 4;
  -o-tab-size: 4;
  tab-size: 4;

  -webkit-hyphens: none;
  -moz-hyphens: none;
  -ms-hyphens: none;
  hyphens: none;
}

d-article pre a {
  border-bottom: none;
}

d-article pre a:hover {
  border-bottom: none;
  text-decoration: underline;
}

d-article details {
  grid-column: text;
  margin-bottom: 0.8em;
}

@media(min-width: 768px) {

d-article pre,
d-article div.sourceCode,
d-article div.sourceCode pre {
  overflow: visible !important;
}

d-article div.sourceCode pre {
  padding-left: 18px;
  font-size: 14px;
}

d-article pre {
  font-size: 14px;
}

}

figure img.external {
  background: white;
  border: 1px solid rgba(0, 0, 0, 0.1);
  box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
  padding: 18px;
  box-sizing: border-box;
}

/* CSS for d-contents */

.d-contents {
  grid-column: text;
  color: rgba(0,0,0,0.8);
  font-size: 0.9em;
  padding-bottom: 1em;
  margin-bottom: 1em;
  padding-bottom: 0.5em;
  margin-bottom: 1em;
  padding-left: 0.25em;
  justify-self: start;
}

@media(min-width: 1000px) {
  .d-contents.d-contents-float {
    height: 0;
    grid-column-start: 1;
    grid-column-end: 4;
    justify-self: center;
    padding-right: 3em;
    padding-left: 2em;
  }
}

.d-contents nav h3 {
  font-size: 18px;
  margin-top: 0;
  margin-bottom: 1em;
}

.d-contents li {
  list-style-type: none
}

.d-contents nav > ul {
  padding-left: 0;
}

.d-contents ul {
  padding-left: 1em
}

.d-contents nav ul li {
  margin-top: 0.6em;
  margin-bottom: 0.2em;
}

.d-contents nav a {
  font-size: 13px;
  border-bottom: none;
  text-decoration: none
  color: rgba(0, 0, 0, 0.8);
}

.d-contents nav a:hover {
  text-decoration: underline solid rgba(0, 0, 0, 0.6)
}

.d-contents nav > ul > li > a {
  font-weight: 600;
}

.d-contents nav > ul > li > ul {
  font-weight: inherit;
}

.d-contents nav > ul > li > ul > li {
  margin-top: 0.2em;
}


.d-contents nav ul {
  margin-top: 0;
  margin-bottom: 0.25em;
}

.d-article-with-toc h2:nth-child(2) {
  margin-top: 0;
}


/* Figure */

.figure {
  position: relative;
  margin-bottom: 2.5em;
  margin-top: 1.5em;
}

.figure img {
  width: 100%;
}

.figure .caption {
  color: rgba(0, 0, 0, 0.6);
  font-size: 12px;
  line-height: 1.5em;
}

.figure img.external {
  background: white;
  border: 1px solid rgba(0, 0, 0, 0.1);
  box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
  padding: 18px;
  box-sizing: border-box;
}

.figure .caption a {
  color: rgba(0, 0, 0, 0.6);
}

.figure .caption b,
.figure .caption strong, {
  font-weight: 600;
  color: rgba(0, 0, 0, 1.0);
}

/* Citations */

d-article .citation {
  color: inherit;
  cursor: inherit;
}

div.hanging-indent{
  margin-left: 1em; text-indent: -1em;
}

/* Citation hover box */

.tippy-box[data-theme~=light-border] {
  background-color: rgba(250, 250, 250, 0.95);
}

.tippy-content > p {
  margin-bottom: 0;
  padding: 2px;
}


/* Tweak 1000px media break to show more text */

@media(min-width: 1000px) {
  .base-grid,
  distill-header,
  d-title,
  d-abstract,
  d-article,
  d-appendix,
  distill-appendix,
  d-byline,
  d-footnote-list,
  d-citation-list,
  distill-footer {
    grid-template-columns: [screen-start] 1fr [page-start kicker-start] 80px [middle-start] 50px [text-start kicker-end] 65px 65px 65px 65px 65px 65px 65px 65px [text-end gutter-start] 65px [middle-end] 65px [page-end gutter-end] 1fr [screen-end];
    grid-column-gap: 16px;
  }

  .grid {
    grid-column-gap: 16px;
  }

  d-article {
    font-size: 1.06rem;
    line-height: 1.7em;
  }
  figure .caption, .figure .caption, figure figcaption {
    font-size: 13px;
  }
}

@media(min-width: 1180px) {
  .base-grid,
  distill-header,
  d-title,
  d-abstract,
  d-article,
  d-appendix,
  distill-appendix,
  d-byline,
  d-footnote-list,
  d-citation-list,
  distill-footer {
    grid-template-columns: [screen-start] 1fr [page-start kicker-start] 60px [middle-start] 60px [text-start kicker-end] 60px 60px 60px 60px 60px 60px 60px 60px [text-end gutter-start] 60px [middle-end] 60px [page-end gutter-end] 1fr [screen-end];
    grid-column-gap: 32px;
  }

  .grid {
    grid-column-gap: 32px;
  }
}


/* Get the citation styles for the appendix (not auto-injected on render since
   we do our own rendering of the citation appendix) */

d-appendix .citation-appendix,
.d-appendix .citation-appendix {
  font-size: 11px;
  line-height: 15px;
  border-left: 1px solid rgba(0, 0, 0, 0.1);
  padding-left: 18px;
  border: 1px solid rgba(0,0,0,0.1);
  background: rgba(0, 0, 0, 0.02);
  padding: 10px 18px;
  border-radius: 3px;
  color: rgba(150, 150, 150, 1);
  overflow: hidden;
  margin-top: -12px;
  white-space: pre-wrap;
  word-wrap: break-word;
}

/* Include appendix styles here so they can be overridden */

d-appendix {
  contain: layout style;
  font-size: 0.8em;
  line-height: 1.7em;
  margin-top: 60px;
  margin-bottom: 0;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
  color: rgba(0,0,0,0.5);
  padding-top: 60px;
  padding-bottom: 48px;
}

d-appendix h3 {
  grid-column: page-start / text-start;
  font-size: 15px;
  font-weight: 500;
  margin-top: 1em;
  margin-bottom: 0;
  color: rgba(0,0,0,0.65);
}

d-appendix h3 + * {
  margin-top: 1em;
}

d-appendix ol {
  padding: 0 0 0 15px;
}

@media (min-width: 768px) {
  d-appendix ol {
    padding: 0 0 0 30px;
    margin-left: -30px;
  }
}

d-appendix li {
  margin-bottom: 1em;
}

d-appendix a {
  color: rgba(0, 0, 0, 0.6);
}

d-appendix > * {
  grid-column: text;
}

d-appendix > d-footnote-list,
d-appendix > d-citation-list,
d-appendix > distill-appendix {
  grid-column: screen;
}

/* Include footnote styles here so they can be overridden */

d-footnote-list {
  contain: layout style;
}

d-footnote-list > * {
  grid-column: text;
}

d-footnote-list a.footnote-backlink {
  color: rgba(0,0,0,0.3);
  padding-left: 0.5em;
}



/* Anchor.js */

.anchorjs-link {
  /*transition: all .25s linear; */
  text-decoration: none;
  border-bottom: none;
}
*:hover > .anchorjs-link {
  margin-left: -1.125em !important;
  text-decoration: none;
  border-bottom: none;
}

/* Social footer */

.social_footer {
  margin-top: 30px;
  margin-bottom: 0;
  color: rgba(0,0,0,0.67);
}

.disqus-comments {
  margin-right: 30px;
}

.disqus-comment-count {
  border-bottom: 1px solid rgba(0, 0, 0, 0.4);
  cursor: pointer;
}

#disqus_thread {
  margin-top: 30px;
}

.article-sharing a {
  border-bottom: none;
  margin-right: 8px;
}

.article-sharing a:hover {
  border-bottom: none;
}

.sidebar-section.subscribe {
  font-size: 12px;
  line-height: 1.6em;
}

.subscribe p {
  margin-bottom: 0.5em;
}


.article-footer .subscribe {
  font-size: 15px;
  margin-top: 45px;
}


.sidebar-section.custom {
  font-size: 12px;
  line-height: 1.6em;
}

.custom p {
  margin-bottom: 0.5em;
}

/* Styles for listing layout (hide title) */
.layout-listing d-title, .layout-listing .d-title {
  display: none;
}

/* Styles for posts lists (not auto-injected) */


.posts-with-sidebar {
  padding-left: 45px;
  padding-right: 45px;
}

.posts-list .description h2,
.posts-list .description p {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
}

.posts-list .description h2 {
  font-weight: 700;
  border-bottom: none;
  padding-bottom: 0;
}

.posts-list h2.post-tag {
  border-bottom: 1px solid rgba(0, 0, 0, 0.2);
  padding-bottom: 12px;
}
.posts-list {
  margin-top: 60px;
  margin-bottom: 24px;
}

.posts-list .post-preview {
  text-decoration: none;
  overflow: hidden;
  display: block;
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  padding: 24px 0;
}

.post-preview-last {
  border-bottom: none !important;
}

.posts-list .posts-list-caption {
  grid-column: screen;
  font-weight: 400;
}

.posts-list .post-preview h2 {
  margin: 0 0 6px 0;
  line-height: 1.2em;
  font-style: normal;
  font-size: 24px;
}

.posts-list .post-preview p {
  margin: 0 0 12px 0;
  line-height: 1.4em;
  font-size: 16px;
}

.posts-list .post-preview .thumbnail {
  box-sizing: border-box;
  margin-bottom: 24px;
  position: relative;
  max-width: 500px;
}
.posts-list .post-preview img {
  width: 100%;
  display: block;
}

.posts-list .metadata {
  font-size: 12px;
  line-height: 1.4em;
  margin-bottom: 18px;
}

.posts-list .metadata > * {
  display: inline-block;
}

.posts-list .metadata .publishedDate {
  margin-right: 2em;
}

.posts-list .metadata .dt-authors {
  display: block;
  margin-top: 0.3em;
  margin-right: 2em;
}

.posts-list .dt-tags {
  display: block;
  line-height: 1em;
}

.posts-list .dt-tags .dt-tag {
  display: inline-block;
  color: rgba(0,0,0,0.6);
  padding: 0.3em 0.4em;
  margin-right: 0.2em;
  margin-bottom: 0.4em;
  font-size: 60%;
  border: 1px solid rgba(0,0,0,0.2);
  border-radius: 3px;
  text-transform: uppercase;
  font-weight: 500;
}

.posts-list img {
  opacity: 1;
}

.posts-list img[data-src] {
  opacity: 0;
}

.posts-more {
  clear: both;
}


.posts-sidebar {
  font-size: 16px;
}

.posts-sidebar h3 {
  font-size: 16px;
  margin-top: 0;
  margin-bottom: 0.5em;
  font-weight: 400;
  text-transform: uppercase;
}

.sidebar-section {
  margin-bottom: 30px;
}

.categories ul {
  list-style-type: none;
  margin: 0;
  padding: 0;
}

.categories li {
  color: rgba(0, 0, 0, 0.8);
  margin-bottom: 0;
}

.categories li>a {
  border-bottom: none;
}

.categories li>a:hover {
  border-bottom: 1px solid rgba(0, 0, 0, 0.4);
}

.categories .active {
  font-weight: 600;
}

.categories .category-count {
  color: rgba(0, 0, 0, 0.4);
}


@media(min-width: 768px) {
  .posts-list .post-preview h2 {
    font-size: 26px;
  }
  .posts-list .post-preview .thumbnail {
    float: right;
    width: 30%;
    margin-bottom: 0;
  }
  .posts-list .post-preview .description {
    float: left;
    width: 45%;
  }
  .posts-list .post-preview .metadata {
    float: left;
    width: 20%;
    margin-top: 8px;
  }
  .posts-list .post-preview p {
    margin: 0 0 12px 0;
    line-height: 1.5em;
    font-size: 16px;
  }
  .posts-with-sidebar .posts-list {
    float: left;
    width: 75%;
  }
  .posts-with-sidebar .posts-sidebar {
    float: right;
    width: 20%;
    margin-top: 60px;
    padding-top: 24px;
    padding-bottom: 24px;
  }
}


/* Improve display for browsers without grid (IE/Edge <= 15) */

.downlevel {
  line-height: 1.6em;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
  margin: 0;
}

.downlevel .d-title {
  padding-top: 6rem;
  padding-bottom: 1.5rem;
}

.downlevel .d-title h1 {
  font-size: 50px;
  font-weight: 700;
  line-height: 1.1em;
  margin: 0 0 0.5rem;
}

.downlevel .d-title p {
  font-weight: 300;
  font-size: 1.2rem;
  line-height: 1.55em;
  margin-top: 0;
}

.downlevel .d-byline {
  padding-top: 0.8em;
  padding-bottom: 0.8em;
  font-size: 0.8rem;
  line-height: 1.8em;
}

.downlevel .section-separator {
  border: none;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
}

.downlevel .d-article {
  font-size: 1.06rem;
  line-height: 1.7em;
  padding-top: 1rem;
  padding-bottom: 2rem;
}


.downlevel .d-appendix {
  padding-left: 0;
  padding-right: 0;
  max-width: none;
  font-size: 0.8em;
  line-height: 1.7em;
  margin-bottom: 0;
  color: rgba(0,0,0,0.5);
  padding-top: 40px;
  padding-bottom: 48px;
}

.downlevel .footnotes ol {
  padding-left: 13px;
}

.downlevel .base-grid,
.downlevel .distill-header,
.downlevel .d-title,
.downlevel .d-abstract,
.downlevel .d-article,
.downlevel .d-appendix,
.downlevel .distill-appendix,
.downlevel .d-byline,
.downlevel .d-footnote-list,
.downlevel .d-citation-list,
.downlevel .distill-footer,
.downlevel .appendix-bottom,
.downlevel .posts-container {
  padding-left: 40px;
  padding-right: 40px;
}

@media(min-width: 768px) {
  .downlevel .base-grid,
  .downlevel .distill-header,
  .downlevel .d-title,
  .downlevel .d-abstract,
  .downlevel .d-article,
  .downlevel .d-appendix,
  .downlevel .distill-appendix,
  .downlevel .d-byline,
  .downlevel .d-footnote-list,
  .downlevel .d-citation-list,
  .downlevel .distill-footer,
  .downlevel .appendix-bottom,
  .downlevel .posts-container {
  padding-left: 150px;
  padding-right: 150px;
  max-width: 900px;
}
}

.downlevel pre code {
  display: block;
  border-left: 2px solid rgba(0, 0, 0, .1);
  padding: 0 0 0 20px;
  font-size: 14px;
}

.downlevel code, .downlevel pre {
  color: black;
  background: none;
  font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  text-align: left;
  white-space: pre;
  word-spacing: normal;
  word-break: normal;
  word-wrap: normal;
  line-height: 1.5;

  -moz-tab-size: 4;
  -o-tab-size: 4;
  tab-size: 4;

  -webkit-hyphens: none;
  -moz-hyphens: none;
  -ms-hyphens: none;
  hyphens: none;
}

.downlevel .posts-list .post-preview {
  color: inherit;
}



</style>

<script type="application/javascript">

function is_downlevel_browser() {
  if (bowser.isUnsupportedBrowser({ msie: "12", msedge: "16"},
                                 window.navigator.userAgent)) {
    return true;
  } else {
    return window.load_distill_framework === undefined;
  }
}

// show body when load is complete
function on_load_complete() {

  // add anchors
  if (window.anchors) {
    window.anchors.options.placement = 'left';
    window.anchors.add('d-article > h2, d-article > h3, d-article > h4, d-article > h5');
  }


  // set body to visible
  document.body.style.visibility = 'visible';

  // force redraw for leaflet widgets
  if (window.HTMLWidgets) {
    var maps = window.HTMLWidgets.findAll(".leaflet");
    $.each(maps, function(i, el) {
      var map = this.getMap();
      map.invalidateSize();
      map.eachLayer(function(layer) {
        if (layer instanceof L.TileLayer)
          layer.redraw();
      });
    });
  }

  // trigger 'shown' so htmlwidgets resize
  $('d-article').trigger('shown');
}

function init_distill() {

  init_common();

  // create front matter
  var front_matter = $('<d-front-matter></d-front-matter>');
  $('#distill-front-matter').wrap(front_matter);

  // create d-title
  $('.d-title').changeElementType('d-title');

  // create d-byline
  var byline = $('<d-byline></d-byline>');
  $('.d-byline').replaceWith(byline);

  // create d-article
  var article = $('<d-article></d-article>');
  $('.d-article').wrap(article).children().unwrap();

  // move posts container into article
  $('.posts-container').appendTo($('d-article'));

  // create d-appendix
  $('.d-appendix').changeElementType('d-appendix');

  // flag indicating that we have appendix items
  var appendix = $('.appendix-bottom').children('h3').length > 0;

  // replace footnotes with <d-footnote>
  $('.footnote-ref').each(function(i, val) {
    appendix = true;
    var href = $(this).attr('href');
    var id = href.replace('#', '');
    var fn = $('#' + id);
    var fn_p = $('#' + id + '>p');
    fn_p.find('.footnote-back').remove();
    var text = fn_p.html();
    var dtfn = $('<d-footnote></d-footnote>');
    dtfn.html(text);
    $(this).replaceWith(dtfn);
  });
  // remove footnotes
  $('.footnotes').remove();

  // move refs into #references-listing
  $('#references-listing').replaceWith($('#refs'));

  $('h1.appendix, h2.appendix').each(function(i, val) {
    $(this).changeElementType('h3');
  });
  $('h3.appendix').each(function(i, val) {
    var id = $(this).attr('id');
    $('.d-contents a[href="#' + id + '"]').parent().remove();
    appendix = true;
    $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('d-appendix'));
  });

  // show d-appendix if we have appendix content
  $("d-appendix").css('display', appendix ? 'grid' : 'none');

  // localize layout chunks to just output
  $('.layout-chunk').each(function(i, val) {

    // capture layout
    var layout = $(this).attr('data-layout');

    // apply layout to markdown level block elements
    var elements = $(this).children().not('details, div.sourceCode, pre, script');
    elements.each(function(i, el) {
      var layout_div = $('<div class="' + layout + '"></div>');
      if (layout_div.hasClass('shaded')) {
        var shaded_content = $('<div class="shaded-content"></div>');
        $(this).wrap(shaded_content);
        $(this).parent().wrap(layout_div);
      } else {
        $(this).wrap(layout_div);
      }
    });


    // unwrap the layout-chunk div
    $(this).children().unwrap();
  });

  // remove code block used to force  highlighting css
  $('.distill-force-highlighting-css').parent().remove();

  // remove empty line numbers inserted by pandoc when using a
  // custom syntax highlighting theme
  $('code.sourceCode a:empty').remove();

  // load distill framework
  load_distill_framework();

  // wait for window.distillRunlevel == 4 to do post processing
  function distill_post_process() {

    if (!window.distillRunlevel || window.distillRunlevel < 4)
      return;

    // hide author/affiliations entirely if we have no authors
    var front_matter = JSON.parse($("#distill-front-matter").html());
    var have_authors = front_matter.authors && front_matter.authors.length > 0;
    if (!have_authors)
      $('d-byline').addClass('hidden');

    // article with toc class
    $('.d-contents').parent().addClass('d-article-with-toc');

    // strip links that point to #
    $('.authors-affiliations').find('a[href="#"]').removeAttr('href');

    // add orcid ids
    $('.authors-affiliations').find('.author').each(function(i, el) {
      var orcid_id = front_matter.authors[i].orcidID;
      if (orcid_id) {
        var a = $('<a></a>');
        a.attr('href', 'https://orcid.org/' + orcid_id);
        var img = $('<img></img>');
        img.addClass('orcid-id');
        img.attr('alt', 'ORCID ID');
        img.attr('src','data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg==');
        a.append(img);
        $(this).append(a);
      }
    });

    // hide elements of author/affiliations grid that have no value
    function hide_byline_column(caption) {
      $('d-byline').find('h3:contains("' + caption + '")').parent().css('visibility', 'hidden');
    }

    // affiliations
    var have_affiliations = false;
    for (var i = 0; i<front_matter.authors.length; ++i) {
      var author = front_matter.authors[i];
      if (author.affiliation !== "&nbsp;") {
        have_affiliations = true;
        break;
      }
    }
    if (!have_affiliations)
      $('d-byline').find('h3:contains("Affiliations")').css('visibility', 'hidden');

    // published date
    if (!front_matter.publishedDate)
      hide_byline_column("Published");

    // document object identifier
    var doi = $('d-byline').find('h3:contains("DOI")');
    var doi_p = doi.next().empty();
    if (!front_matter.doi) {
      // if we have a citation and valid citationText then link to that
      if ($('#citation').length > 0 && front_matter.citationText) {
        doi.html('Citation');
        $('<a href="#citation"></a>')
          .text(front_matter.citationText)
          .appendTo(doi_p);
      } else {
        hide_byline_column("DOI");
      }
    } else {
      $('<a></a>')
         .attr('href', "https://doi.org/" + front_matter.doi)
         .html(front_matter.doi)
         .appendTo(doi_p);
    }

     // change plural form of authors/affiliations
    if (front_matter.authors.length === 1) {
      var grid = $('.authors-affiliations');
      grid.children('h3:contains("Authors")').text('Author');
      grid.children('h3:contains("Affiliations")').text('Affiliation');
    }

    // remove d-appendix and d-footnote-list local styles
    $('d-appendix > style:first-child').remove();
    $('d-footnote-list > style:first-child').remove();

    // move appendix-bottom entries to the bottom
    $('.appendix-bottom').appendTo('d-appendix').children().unwrap();
    $('.appendix-bottom').remove();

    // hoverable references
    $('span.citation[data-cites]').each(function() {
      var refHtml = $('#ref-' + $(this).attr('data-cites')).html();
      window.tippy(this, {
        allowHTML: true,
        content: refHtml,
        maxWidth: 500,
        interactive: true,
        interactiveBorder: 10,
        theme: 'light-border',
        placement: 'bottom-start'
      });
    });

    // clear polling timer
    clearInterval(tid);

    // show body now that everything is ready
    on_load_complete();
  }

  var tid = setInterval(distill_post_process, 50);
  distill_post_process();

}

function init_downlevel() {

  init_common();

   // insert hr after d-title
  $('.d-title').after($('<hr class="section-separator"/>'));

  // check if we have authors
  var front_matter = JSON.parse($("#distill-front-matter").html());
  var have_authors = front_matter.authors && front_matter.authors.length > 0;

  // manage byline/border
  if (!have_authors)
    $('.d-byline').remove();
  $('.d-byline').after($('<hr class="section-separator"/>'));
  $('.d-byline a').remove();

  // remove toc
  $('.d-contents').remove();

  // move appendix elements
  $('h1.appendix, h2.appendix').each(function(i, val) {
    $(this).changeElementType('h3');
  });
  $('h3.appendix').each(function(i, val) {
    $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('.d-appendix'));
  });


  // inject headers into references and footnotes
  var refs_header = $('<h3></h3>');
  refs_header.text('References');
  $('#refs').prepend(refs_header);

  var footnotes_header = $('<h3></h3');
  footnotes_header.text('Footnotes');
  $('.footnotes').children('hr').first().replaceWith(footnotes_header);

  // move appendix-bottom entries to the bottom
  $('.appendix-bottom').appendTo('.d-appendix').children().unwrap();
  $('.appendix-bottom').remove();

  // remove appendix if it's empty
  if ($('.d-appendix').children().length === 0)
    $('.d-appendix').remove();

  // prepend separator above appendix
  $('.d-appendix').before($('<hr class="section-separator" style="clear: both"/>'));

  // trim code
  $('pre>code').each(function(i, val) {
    $(this).html($.trim($(this).html()));
  });

  // move posts-container right before article
  $('.posts-container').insertBefore($('.d-article'));

  $('body').addClass('downlevel');

  on_load_complete();
}


function init_common() {

  // jquery plugin to change element types
  (function($) {
    $.fn.changeElementType = function(newType) {
      var attrs = {};

      $.each(this[0].attributes, function(idx, attr) {
        attrs[attr.nodeName] = attr.nodeValue;
      });

      this.replaceWith(function() {
        return $("<" + newType + "/>", attrs).append($(this).contents());
      });
    };
  })(jQuery);

  // prevent underline for linked images
  $('a > img').parent().css({'border-bottom' : 'none'});

  // mark non-body figures created by knitr chunks as 100% width
  $('.layout-chunk').each(function(i, val) {
    var figures = $(this).find('img, .html-widget');
    if ($(this).attr('data-layout') !== "l-body") {
      figures.css('width', '100%');
    } else {
      figures.css('max-width', '100%');
      figures.filter("[width]").each(function(i, val) {
        var fig = $(this);
        fig.css('width', fig.attr('width') + 'px');
      });

    }
  });

  // auto-append index.html to post-preview links in file: protocol
  // and in rstudio ide preview
  $('.post-preview').each(function(i, val) {
    if (window.location.protocol === "file:")
      $(this).attr('href', $(this).attr('href') + "index.html");
  });

  // get rid of index.html references in header
  if (window.location.protocol !== "file:") {
    $('.distill-site-header a[href]').each(function(i,val) {
      $(this).attr('href', $(this).attr('href').replace("index.html", "./"));
    });
  }

  // add class to pandoc style tables
  $('tr.header').parent('thead').parent('table').addClass('pandoc-table');
  $('.kable-table').children('table').addClass('pandoc-table');

  // add figcaption style to table captions
  $('caption').parent('table').addClass("figcaption");

  // initialize posts list
  if (window.init_posts_list)
    window.init_posts_list();

  // implmement disqus comment link
  $('.disqus-comment-count').click(function() {
    window.headroom_prevent_pin = true;
    $('#disqus_thread').toggleClass('hidden');
    if (!$('#disqus_thread').hasClass('hidden')) {
      var offset = $(this).offset();
      $(window).resize();
      $('html, body').animate({
        scrollTop: offset.top - 35
      });
    }
  });
}

document.addEventListener('DOMContentLoaded', function() {
  if (is_downlevel_browser())
    init_downlevel();
  else
    window.addEventListener('WebComponentsReady', init_distill);
});

</script>

<style type="text/css">
/* base variables */

/* Edit the CSS properties in this file to create a custom
   Distill theme. Only edit values in the right column
   for each row; values shown are the CSS defaults.
   To return any property to the default,
   you may set its value to: unset
   All rows must end with a semi-colon.                      */

/* Optional: embed custom fonts here with `@import`          */
/* This must remain at the top of this file.                 */



html {
  /*-- Main font sizes --*/
  --title-size:      50px;
  --body-size:       1.06rem;
  --code-size:       14px;
  --aside-size:      12px;
  --fig-cap-size:    13px;
  /*-- Main font colors --*/
  --title-color:     #000000;
  --header-color:    rgba(0, 0, 0, 0.8);
  --body-color:      rgba(0, 0, 0, 0.8);
  --aside-color:     rgba(0, 0, 0, 0.6);
  --fig-cap-color:   rgba(0, 0, 0, 0.6);
  /*-- Specify custom fonts ~~~ must be imported above   --*/
  --heading-font:    sans-serif;
  --mono-font:       monospace;
  --body-font:       sans-serif;
  --navbar-font:     sans-serif;  /* websites + blogs only */
}

/*-- ARTICLE METADATA --*/
d-byline {
  --heading-size:    0.6rem;
  --heading-color:   rgba(0, 0, 0, 0.5);
  --body-size:       0.8rem;
  --body-color:      rgba(0, 0, 0, 0.8);
}

/*-- ARTICLE TABLE OF CONTENTS --*/
.d-contents {
  --heading-size:    18px;
  --contents-size:   13px;
}

/*-- ARTICLE APPENDIX --*/
d-appendix {
  --heading-size:    15px;
  --heading-color:   rgba(0, 0, 0, 0.65);
  --text-size:       0.8em;
  --text-color:      rgba(0, 0, 0, 0.5);
}

/*-- WEBSITE HEADER + FOOTER --*/
/* These properties only apply to Distill sites and blogs  */

.distill-site-header {
  --title-size:       18px;
  --text-color:       rgba(255, 255, 255, 0.8);
  --text-size:        15px;
  --hover-color:      white;
  --bkgd-color:       #0F2E3D;
}

.distill-site-footer {
  --text-color:       rgba(255, 255, 255, 0.8);
  --text-size:        15px;
  --hover-color:      white;
  --bkgd-color:       #0F2E3D;
}

/*-- Additional custom styles --*/
/* Add any additional CSS rules below                      */
</style>
<style type="text/css">
/* base variables */

/* Edit the CSS properties in this file to create a custom
   Distill theme. Only edit values in the right column
   for each row; values shown are the CSS defaults.
   To return any property to the default,
   you may set its value to: unset
   All rows must end with a semi-colon.                      */

/* Optional: embed custom fonts here with `@import`          */
/* This must remain at the top of this file.                 */
@import url('https://fonts.googleapis.com/css2?family=Lato');
@import url('https://fonts.googleapis.com/css2?family=Chivo');
@import url('https://fonts.googleapis.com/css2?family=Fira+Mono');



html {
  /*-- Main font sizes --*/
  --title-size:      50px;
  --body-size:       1.06rem;
  --code-size:       14px;
  --aside-size:      12px;
  --fig-cap-size:    13px;
  /*-- Main font colors --*/
  --title-color:     #000000;
  --header-color:    rgba(0, 0, 0, 0.8);
  --body-color:      rgba(0, 0, 0, 0.8);
  --aside-color:     rgba(0, 0, 0, 0.6);
  --fig-cap-color:   rgba(0, 0, 0, 0.6);
  /*-- Specify custom fonts ~~~ must be imported above   --*/
  --heading-font:    'Fira Mono', sans-serif;
  --mono-font:       'Fira Mono', monospace;
  --body-font:       'Lato', sans-serif;
  --navbar-font:     "Fira Mono", serif;
}

/*-- ARTICLE METADATA --*/
.d-byline {
  --heading-size:    0.6rem;
  --heading-color:   rgba(0, 0, 0, 0.5);
  --body-size:       0.8rem;
  --body-color:      rgba(0, 0, 0, 0.8);
}

/*-- ARTICLE TABLE OF CONTENTS --*/
.d-contents {
  --heading-size:    18px;
  --contents-size:   13px;
}

/*-- ARTICLE APPENDIX --*/
d-appendix {
  --heading-size:    15px;
  --heading-color:   rgba(0, 0, 0, 0.65);
  --text-size:       0.8em;
  --text-color:      rgba(0, 0, 0, 0.5);
}

/*-- WEBSITE HEADER + FOOTER --*/
/* These properties only apply to Distill sites and blogs  */

.distill-site-header {
  --title-size:       18px;
  --text-color:       #000;
  --text-size:        15px;
  --hover-color:      #ff6700;
  --bkgd-color:       white;
}

.distill-site-footer {
  --text-color:       #000;
  --text-size:        15px;
  --hover-color:      #ff6700;
  --bkgd-color:       white;
}</style>
<style type="text/css">
/* base style */

/* FONT FAMILIES */

:root {
  --heading-default: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
  --mono-default: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  --body-default: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
}

body,
.posts-list .post-preview p,
.posts-list .description p {
  font-family: var(--body-font), var(--body-default);
}

h1, h2, h3, h4, h5, h6,
.posts-list .post-preview h2,
.posts-list .description h2 {
  font-family: var(--heading-font), var(--heading-default);
}

d-article div.sourceCode code,
d-article pre code {
  font-family: var(--mono-font), var(--mono-default);
}


/*-- TITLE --*/
d-title h1,
.posts-list > h1 {
  color: var(--title-color, black);
}

d-title h1 {
  font-size: var(--title-size, 50px);
}

/*-- HEADERS --*/
d-article h1,
d-article h2,
d-article h3,
d-article h4,
d-article h5,
d-article h6 {
  color: var(--header-color, rgba(0, 0, 0, 0.8));
}

/*-- BODY --*/
d-article > p,  /* only text inside of <p> tags */
d-article > ul, /* lists */
d-article > ol {
  color: var(--body-color, rgba(0, 0, 0, 0.8));
  font-size: var(--body-size, 1.06rem);
}


/*-- CODE --*/
d-article div.sourceCode code,
d-article pre code {
  font-size: var(--code-size, 14px);
}

/*-- ASIDE --*/
d-article aside {
  font-size: var(--aside-size, 12px);
  color: var(--aside-color, rgba(0, 0, 0, 0.6));
}

/*-- FIGURE CAPTIONS --*/
figure .caption,
figure figcaption,
.figure .caption {
  font-size: var(--fig-cap-size, 13px);
  color: var(--fig-cap-color, rgba(0, 0, 0, 0.6));
}

/*-- METADATA --*/
d-byline h3 {
  font-size: var(--heading-size, 0.6rem);
  color: var(--heading-color, rgba(0, 0, 0, 0.5));
}

d-byline {
  font-size: var(--body-size, 0.8rem);
  color: var(--body-color, rgba(0, 0, 0, 0.8));
}

d-byline a,
d-article d-byline a {
  color: var(--body-color, rgba(0, 0, 0, 0.8));
}

/*-- TABLE OF CONTENTS --*/
.d-contents nav h3 {
  font-size: var(--heading-size, 18px);
}

.d-contents nav a {
  font-size: var(--contents-size, 13px);
}

/*-- APPENDIX --*/
d-appendix h3 {
  font-size: var(--heading-size, 15px);
  color: var(--heading-color, rgba(0, 0, 0, 0.65));
}

d-appendix {
  font-size: var(--text-size, 0.8em);
  color: var(--text-color, rgba(0, 0, 0, 0.5));
}

d-appendix d-footnote-list a.footnote-backlink {
  color: var(--text-color, rgba(0, 0, 0, 0.5));
}

/*-- WEBSITE HEADER + FOOTER --*/
.distill-site-header .title {
  font-size: var(--title-size, 18px);
  font-family: var(--navbar-font), var(--heading-default);
}

.distill-site-header a,
.nav-dropdown .nav-dropbtn {
  font-family: var(--navbar-font), var(--heading-default);
}

.nav-dropdown .nav-dropbtn {
  color: var(--text-color, rgba(255, 255, 255, 0.8));
  font-size: var(--text-size, 15px);
}

.distill-site-header a:hover,
.nav-dropdown:hover .nav-dropbtn {
  color: var(--hover-color, white);
}

.distill-site-header {
  font-size: var(--text-size, 15px);
  color: var(--text-color, rgba(255, 255, 255, 0.8));
  background-color: var(--bkgd-color, #0F2E3D);
}

.distill-site-footer {
  font-size: var(--text-size, 15px);
  color: var(--text-color, rgba(255, 255, 255, 0.8));
  background-color: var(--bkgd-color, #0F2E3D);
}

.distill-site-footer a:hover {
  color: var(--hover-color, white);
}</style>
<!--/radix_placeholder_distill-->
  <script src="../../site_libs/header-attrs-2.5.3/header-attrs.js"></script>
  <script src="../../site_libs/jquery-1.11.3/jquery.min.js"></script>
  <script src="../../site_libs/anchor-4.2.2/anchor.min.js"></script>
  <script src="../../site_libs/bowser-1.9.3/bowser.min.js"></script>
  <script src="../../site_libs/webcomponents-2.0.0/webcomponents.js"></script>
  <script src="../../site_libs/distill-2.2.21/template.v2.js"></script>
  <!--radix_placeholder_site_in_header-->
<script>
  document.addEventListener("DOMContentLoaded", function () {
    if (!/posts/.test(location.pathname)) {
      return;
    }

    var script = document.createElement("script");
    script.src = "https://utteranc.es/client.js";
    script.setAttribute("repo", "jthomasmock/radix_themockup");
    script.setAttribute("issue-term", "og:title");
    script.setAttribute("crossorigin", "anonymous");
    script.setAttribute("label", "comment_thread");

    /* wait for article to load, append script to article element */
    var observer = new MutationObserver(function (mutations, observer) {
      var article = document.querySelector("d-article");
      if (article) {
        observer.disconnect();
        /* HACK: article scroll */
        article.setAttribute("style", "overflow-y: hidden");
        article.appendChild(script);
      }
    });

    observer.observe(document.body, { childList: true });
  });
</script>
<script type="text/javascript" cookie-consent="tracking" async src="https://www.googletagmanager.com/gtag/js?id=UA-166026965-1"></script>
<script type="text/javascript" cookie-consent="tracking">
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-166026965-1');
</script>
<!--/radix_placeholder_site_in_header-->


</head>

<body>

<!--radix_placeholder_front_matter-->

<script id="distill-front-matter" type="text/json">
{"title":"Creating and using custom ggplot2 themes","description":"The best way to make each plot your own.","authors":[{"author":"Thomas Mock","authorURL":"https://twitter.com/thomas_mock","affiliation":"&nbsp;","affiliationURL":"#","orcidID":""}],"publishedDate":"2020-12-26T00:00:00.000+00:00","citationText":"Mock, 2020"}
</script>

<!--/radix_placeholder_front_matter-->
<!--radix_placeholder_navigation_before_body-->
<header class="header header--fixed" role="banner">
<nav class="distill-site-nav distill-site-header">
<div class="nav-left">
<a href="../../index.html" class="title">The Mockup Blog</a>
<input id="distill-search" class="nav-search hidden" type="text" placeholder="Search..."/>
</div>
<div class="nav-right">
<a href="../../index.html">Home</a>
<a href="../../resources.html">Resources</a>
<a href="../../about.html">About</a>
<a href="../../subscribe.html">Subscribe</a>
<a href="https://twitter.com/thomas_mock">
<i class="fa fa-twitter" aria-hidden="true"></i>
</a>
<a href="https://github.com/jthomasmock">
<i class="fa fa-github" aria-hidden="true"></i>
</a>
<a href="../../index.xml">
<i class="fa fa-rss" aria-hidden="true"></i>
</a>
<a href="javascript:void(0);" class="nav-toggle">&#9776;</a>
</div>
</nav>
</header>
<!--/radix_placeholder_navigation_before_body-->
<!--radix_placeholder_site_before_body-->
<!--/radix_placeholder_site_before_body-->

<div class="d-title">
<h1>Creating and using custom ggplot2 themes</h1>
<!--radix_placeholder_categories-->
<div class="dt-tags">
  <a href="../../index.html#category:ggplot2" class="dt-tag">ggplot2</a>
  <a href="../../index.html#category:data_visualization" class="dt-tag">data visualization</a>
  <a href="../../index.html#category:theme" class="dt-tag">theme</a>
  <a href="../../index.html#category:tidyverse" class="dt-tag">tidyverse</a>
  <a href="../../index.html#category:NFL" class="dt-tag">NFL</a>
  <a href="../../index.html#category:espnscrapeR" class="dt-tag">espnscrapeR</a>
</div>
<!--/radix_placeholder_categories-->
<p><p>The best way to make each plot your own.</p></p>
</div>

<div class="d-byline">
  Thomas Mock <a href="https://twitter.com/thomas_mock" class="uri">https://twitter.com/thomas_mock</a> 
  
<br/>12-26-2020
</div>

<div class="d-article">
<div class="d-contents d-contents-float">
<nav class="l-text toc figcaption" id="TOC">
<h3>Contents</h3>
<ul>
<li><a href="#graphs-for-communication">Graphs for Communication</a>
<ul>
<li><a href="#themes">Themes</a>
<ul>
<li><a href="#theme_grey"><code>theme_grey()</code></a></li>
<li><a href="#theme_minimal"><code>theme_minimal()</code></a></li>
<li><a href="#theme_bw"><code>theme_bw()</code></a></li>
<li><a href="#other-themes">Other themes</a></li>
</ul></li>
<li><a href="#ggplot2-theme-components"><code>ggplot2</code> theme components</a>
<ul>
<li><a href="#ggplot2-theme-elements"><code>ggplot2</code> theme elements</a></li>
</ul></li>
</ul></li>
<li><a href="#inspiration">Inspiration</a></li>
<li><a href="#a-dataviz-journey">A DataViz Journey</a></li>
<li><a href="#point-differential">Point Differential</a>
<ul>
<li><a href="#playoff-teams">Playoff Teams</a></li>
<li><a href="#add-some-color">Add some color</a></li>
<li><a href="#refine-labels">Refine labels</a></li>
<li><a href="#premade-themes">Premade themes</a></li>
<li><a href="#custom-themes">Custom Themes</a>
<ul>
<li><a href="#theme"><code>theme()</code></a></li>
<li><a href="#theme_-replace"><code>theme_?? %+replace%</code></a></li>
</ul></li>
<li><a href="#same-data-different-story">Same Data, Different Story</a>
<ul>
<li><a href="#add-context">Add context</a></li>
</ul></li>
<li><a href="#sdds-2-rise-of-2020">SDDS 2: Rise of 2020</a>
<ul>
<li><a href="#add-context-1">Add Context</a></li>
<li><a href="#team-vs-seed">Team vs Seed</a></li>
</ul></li>
</ul></li>
<li><a href="#blitzing">Blitzing</a>
<ul>
<li><a href="#get-the-data">Get the data</a></li>
<li><a href="#initial-plot">Initial Plot</a></li>
<li><a href="#add-color">Add color</a></li>
<li><a href="#add-labels">Add labels</a></li>
</ul></li>
<li><a href="#pass-affected-rate">Pass Affected Rate</a>
<ul>
<li><a href="#slope-chart">Slope Chart</a>
<ul>
<li><a href="#initial-slope-chart">Initial Slope Chart</a></li>
<li><a href="#add-theme-and-context">Add theme and context</a></li>
</ul></li>
<li><a href="#barbell">Barbell</a>
<ul>
<li><a href="#theme-and-context">Theme and context</a></li>
</ul></li>
</ul></li>
<li><a href="#the-end">The end</a></li>
</ul>
</nav>
</div>
<h1 id="graphs-for-communication">Graphs for Communication</h1>
<p><code>ggplot2</code> is an R package for producing statistical graphics, and is an implementation of the Grammar of Graphics by Leland Wilkinson. As such the primary way that folks use <code>ggplot2</code> initially is for robust, fast, and easy exploratory data analysis or the creation of scientific/statistical plots while analyzing data. Here the primary use-case is for the data scientist themself, and the quick iteration of graphs. Relatively little time is spent on adjusting the theme or on making the graph beautiful as it may be ephemeral, or simply a visual check of the underlying relationships.</p>
<p>The next stage in many analyses is creating a graphic primarily intended for <em>others</em> to consume. At this point, the graphic needs to be more engaging, and often needs to be more focused on telling a story or reinforcing some point that you are trying to present from the underlying data.</p>
<p>In this blogpost, Ill be covering some example themes, how to create and apply a theme, and then walk through some real life applications. Ill leave larger color theory, and creating your own <code>ggplot2</code> color scales for a future blogpost.</p>
<h2 id="themes">Themes</h2>
<p><code>ggplot2</code> is remarkably extensible and customizable both through specific graphical components (<code>geom_</code>, <code>scale_</code>, <code>aes</code>, etc) or by theme components (grid lines, background colors, fonts, etc). There is also the concept of fully established themes which change many theme components at once.</p>
<p>First, well get some data and load our libraries of interest.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='http://tidyverse.tidyverse.org'>tidyverse</a></span><span class='op'>)</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://github.com/jthomasmock/espnscrapeR'>espnscrapeR</a></span><span class='op'>)</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='http://github.com/jrnold/ggthemes'>ggthemes</a></span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>Were returning some data on NFL win rates, playoff seeding, and point differentials (ie difference between points given up and points scored).</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>nfl_stand</span> <span class='op'>&lt;-</span> <span class='fl'>2014</span><span class='op'>:</span><span class='fl'>2020</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>map_dfr</span><span class='op'>(</span><span class='va'>get_nfl_standings</span><span class='op'>)</span>

<span class='va'>diff_df</span> <span class='op'>&lt;-</span> <span class='va'>nfl_stand</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>arrange</span><span class='op'>(</span><span class='va'>year</span>, <span class='va'>conf</span>, <span class='fu'>desc</span><span class='op'>(</span><span class='va'>win_percent</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>select</span><span class='op'>(</span><span class='va'>year</span>, <span class='va'>conf</span>, <span class='va'>team_name</span>, <span class='va'>abb_name</span>, <span class='va'>logos</span>, <span class='va'>win_percent</span>, <span class='va'>differential</span><span class='op'>)</span>

<span class='va'>diff_df</span>
</code></pre>
</div>
<pre><code># A tibble: 224 x 7
    year conf  team_name abb_name logos       win_percent differential
   &lt;int&gt; &lt;chr&gt; &lt;chr&gt;     &lt;chr&gt;    &lt;chr&gt;             &lt;dbl&gt;        &lt;dbl&gt;
 1  2014 AFC   Patriots  NE       https://a.       0.75           155
 2  2014 AFC   Broncos   DEN      https://a.       0.75           128
 3  2014 AFC   Steelers  PIT      https://a.       0.688           68
 4  2014 AFC   Colts     IND      https://a.       0.688           89
 5  2014 AFC   Bengals   CIN      https://a.       0.656           21
 6  2014 AFC   Ravens    BAL      https://a.       0.625          107
 7  2014 AFC   Chiefs    KC       https://a.       0.562           72
 8  2014 AFC   Texans    HOU      https://a.       0.562           65
 9  2014 AFC   Chargers  SD       https://a.       0.562            0
10  2014 AFC   Bills     BUF      https://a.       0.562           54
#  with 214 more rows</code></pre>
</div>
<h3 id="theme_grey"><code>theme_grey()</code></h3>
<p>The default <code>ggplot2</code> theme is <code>theme_grey()</code>, its major components are a grey <code>panel.background</code>, white <code>panel.grid</code> lines, coupled with a white <code>plot.background</code>, black <code>text</code> and a default black color for <code>geom_</code> components.</p>
<blockquote>
<p>The signature ggplot2 theme with a grey background and white gridlines, designed to put the data forward yet make comparisons easy.</p>
</blockquote>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='fu'>ggplot</span><span class='op'>(</span><span class='va'>diff_df</span>, <span class='fu'>aes</span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>differential</span>, y <span class='op'>=</span> <span class='va'>win_percent</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_point</span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="creating-and-using-custom-ggplot2-themes_files/figure-html5/unnamed-chunk-3-1.png" width="624" /></p>
</div>
<h3 id="theme_minimal"><code>theme_minimal()</code></h3>
<p>This theme drops the <code>panel.background</code> and no longer has the visual separation between the panel vs plot areas.</p>
<blockquote>
<p>A minimalistic theme with no background annotations.</p>
</blockquote>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='fu'>ggplot</span><span class='op'>(</span><span class='va'>diff_df</span>, <span class='fu'>aes</span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>differential</span>, y <span class='op'>=</span> <span class='va'>win_percent</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_point</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>theme_minimal</span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="creating-and-using-custom-ggplot2-themes_files/figure-html5/unnamed-chunk-4-1.png" width="624" /></p>
</div>
<h3 id="theme_bw"><code>theme_bw()</code></h3>
<p>Its major components are a white <code>panel.background</code>, grey <code>panel.grid</code> lines, coupled with a white <code>plot.background</code>, black <code>text</code> and a default black color for <code>geom_</code> components.</p>
<blockquote>
<p>The classic dark-on-light ggplot2 theme. May work better for presentations displayed with a projector.</p>
</blockquote>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='fu'>ggplot</span><span class='op'>(</span><span class='va'>diff_df</span>, <span class='fu'>aes</span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>differential</span>, y <span class='op'>=</span> <span class='va'>win_percent</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_point</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>theme_bw</span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="creating-and-using-custom-ggplot2-themes_files/figure-html5/unnamed-chunk-5-1.png" width="624" /></p>
</div>
<h3 id="other-themes">Other themes</h3>
<p>There are several other themes built into <code>ggplot2</code>, and other packages that provide new themes. The most well-known external theme package is <code>ggthemes</code>, which provides a number of Data Journalism themes such as <code>theme_few()</code>, <code>theme_fivethirtyeight()</code>, <code>theme_economist()</code> and others.</p>
<p>These are implementations of very opinionated frameworks, and highlight the extensibility of the <code>ggplot2</code> theme components.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='fu'>ggplot</span><span class='op'>(</span><span class='va'>diff_df</span>, <span class='fu'>aes</span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>differential</span>, y <span class='op'>=</span> <span class='va'>win_percent</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_point</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>ggthemes</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/ggthemes/man/theme_fivethirtyeight.html'>theme_fivethirtyeight</a></span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="creating-and-using-custom-ggplot2-themes_files/figure-html5/unnamed-chunk-6-1.png" width="624" /></p>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='fu'>ggplot</span><span class='op'>(</span><span class='va'>diff_df</span>, <span class='fu'>aes</span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>differential</span>, y <span class='op'>=</span> <span class='va'>win_percent</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_point</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>ggthemes</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/ggthemes/man/theme_economist.html'>theme_economist</a></span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="creating-and-using-custom-ggplot2-themes_files/figure-html5/unnamed-chunk-7-1.png" width="624" /></p>
</div>
<h2 id="ggplot2-theme-components"><code>ggplot2</code> theme components</h2>
<p>You can always change specific theme components one at a time or in conjunction with a proper <code>theme_</code>. For example, we can apply the <code>theme_fivethirtyeight()</code> theme and then change one of the theme components individually.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='fu'>ggplot</span><span class='op'>(</span><span class='va'>diff_df</span>, <span class='fu'>aes</span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>differential</span>, y <span class='op'>=</span> <span class='va'>win_percent</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_point</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>ggthemes</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/ggthemes/man/theme_fivethirtyeight.html'>theme_fivethirtyeight</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>theme</span><span class='op'>(</span>
    panel.grid.major <span class='op'>=</span> <span class='fu'>element_line</span><span class='op'>(</span>color <span class='op'>=</span> <span class='st'>"red"</span><span class='op'>)</span>
  <span class='op'>)</span>
</code></pre>
</div>
<p><img src="creating-and-using-custom-ggplot2-themes_files/figure-html5/unnamed-chunk-8-1.png" width="624" /></p>
</div>
<p>There are dozens of customizable theme components. They are outlined in the <a href="https://ggplot2.tidyverse.org/reference/theme.html"><code>ggplot2</code> documentation</a>. A deep walkthrough of a lot of <code>ggplot2</code> customizations can be found on <a href="https://cedricscherer.netlify.app/2019/08/05/a-ggplot2-tutorial-for-beautiful-plotting-in-r/#toc">Cedric Scherers blog</a>. Kieran Healys <a href="https://socviz.co/refineplots.html#refineplots">Data Visualization: A practical introduction</a> covers additional considerations for refining and customizing plots and why certain decisions are good.</p>
<h3 id="ggplot2-theme-elements"><code>ggplot2</code> theme elements</h3>
<p>For each of the theme components there are one of a few theme <a href="https://ggplot2.tidyverse.org/reference/element.html"><strong>elements</strong></a>. For example, to change the axis grid line color, youll use <code>element_line()</code> as in the following pseudocode:</p>
<pre><code>plot_object +
  theme(panel.grid.major = element_line(color = &quot;red&quot;))</code></pre>
<p>For the theme elements, there are:<br />
- <code>element_line()</code> - change line element components, takes arguments like <code>color</code>, <code>size</code>, <code>linetype</code> (dotted, dashed, solid, etc)</p>
<ul>
<li><p><code>element_rect()</code> - change rectangular components like plot backgrounds, legend backgrounds, etc, takes arguments like <code>fill</code>, <code>color</code>, <code>size</code></p></li>
<li><p><code>element_text()</code> - change text components like axis labels, titles, and takes arguments like <code>family</code> (font family), <code>face</code> (bold, italics, etc), <code>hjust</code>/<code>vjust</code> (horizontal or vertical alignment), <code>color</code>, etc</p></li>
<li><p><code>element_blank()</code> - completely remove an element by name</p></li>
<li><p><code>margin()</code> - adjust margins of an element, can be used within some other theme componenets, and takes arguments of <code>t</code> (top), <code>r</code> (right), <code>b</code> (bottom), <code>l</code> (left), and <code>unit</code> (unit such as points, in, cm, etc)</p></li>
<li><p><code>rel()</code> - relative sizing of elements, useful for text especially, ie choosing a base font size and scaling the titles vs body fonts relative to each other</p></li>
</ul>
<p>You can always refer to the <a href="https://ggplot2.tidyverse.org/reference/theme.html"><code>ggplot2</code> documentation</a> for which theme element to use, but you can also typically <em>guess</em> which is the right one to use by referring to the output <em>type</em> (ie text uses <code>element_text()</code>, lines use <code>element_line()</code>, etc).</p>
<hr />
<h1 id="inspiration">Inspiration</h1>
<p>For inspiration, I often find that <a href="https://austinkleon.com/steal/">Stealing like an artist</a> is my favorite approach.</p>
<blockquote>
<p>Your job is to collect good ideas. The more good ideas you collect, the more you can choose from to be influenced by.</p>
</blockquote>
<blockquote>
<p>Plagiarism is trying to pass someone elses work off as your own. Copying is about reverse-engineering.</p>
</blockquote>
<p>With this approach, you are allowing yourself to be influenced by good work, and learning how to implement the approaches of experts while making it your own. I find that FiveThirtyEight as an organization produces great graphics and tables, and thus I take a lot of influence from their approaches with my own novel data. It helps that they do produce some of their graphics in <code>ggplot2</code>!</p>
<p>That being said, projects like <a href="http://tidytuesday.rocks/"><code>#TidyTuesday</code></a> or <code>#StorytellingWithData</code> can also give you a much more focused batch of concepts to borrow from as the focus is on applying concepts as a community with either a similar output or similar starting data.</p>
<ul>
<li><p><a href="https://fivethirtyeight.com/features/the-56-best-and-weirdest-charts-we-made-in-2019/">FiveThirtyEights Best charts of the year</a></p></li>
<li><p><a href="https://www.nytimes.com/2020/06/10/learning/over-60-new-york-times-graphs-for-students-to-analyze.html">New York Times Graphs of 2020</a></p></li>
<li><p><a href="http://www.storytellingwithdata.com/blog/2018/6/19/june-swdchallenge-recap-slopegraphs">Storytelling with Datas challenges</a></p></li>
<li><p><a href="http://tidytuesday.rocks/"><code>TidyTuesday.rocks</code></a> - a shiny app that collects <code>#TidyTuesday</code> dataviz and lets you interact with them by a specific topic/week</p></li>
</ul>
<hr />
<h1 id="a-dataviz-journey">A DataViz Journey</h1>
<p>Lets begin our journey by telling two stories, and working through the refinement of plots to help tell your story.</p>
<p>Story one is a continuation of our data above. Were exploring the relationship between scoring points (offense), preventing the opposing team from scoring points (defense), and how this relates to wins. This is a relatively obvious story, but has some neat sub stories we can look into.</p>
<p>The second story will be about a specific team (the Indianapolis Colts), and how their approach to defense is effective while being very different than other teams.</p>
<p>Note that since this is using <em>live</em> data feeds, to recreate the plots exactly as they are youd need to read in the data I used below.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>diff_df</span> <span class='op'>&lt;-</span> <span class='fu'>readr</span><span class='fu'>::</span><span class='fu'><a href='https://readr.tidyverse.org/reference/read_delim.html'>read_csv</a></span><span class='op'>(</span><span class='st'>"https://raw.githubusercontent.com/jthomasmock/radix_themockup/master/static/diff_df.csv"</span><span class='op'>)</span>
<span class='va'>combo_pass</span> <span class='op'>&lt;-</span> <span class='fu'>readr</span><span class='fu'>::</span><span class='fu'><a href='https://readr.tidyverse.org/reference/read_delim.html'>read_csv</a></span><span class='op'>(</span><span class='st'>"https://raw.githubusercontent.com/jthomasmock/radix_themockup/master/static/combo_pass.csv"</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<hr />
<h1 id="point-differential">Point Differential</h1>
<p>Point differential is a simple metric (points scored - points against) that is pretty predictive of overall win rate and making the playoffs. Teams that score more points than the other team typically win more games, which is fairly obvious!</p>
<p>However simply returning the plot below may not be as engaging to a lay audience or tell some of the nuance of what happens in individual seasons.</p>
<details>
<summary>
Data Collection and Plot
</summary>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>nfl_stand</span> <span class='op'>&lt;-</span> <span class='fl'>2014</span><span class='op'>:</span><span class='fl'>2020</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>map_dfr</span><span class='op'>(</span><span class='va'>get_nfl_standings</span><span class='op'>)</span>

<span class='va'>nfl_stand_plot</span> <span class='op'>&lt;-</span> <span class='va'>nfl_stand</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>ggplot</span><span class='op'>(</span><span class='fu'>aes</span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>differential</span>, y <span class='op'>=</span> <span class='va'>win_percent</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_point</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_smooth</span><span class='op'>(</span>method <span class='op'>=</span> <span class='st'>"lm"</span><span class='op'>)</span>
</code></pre>
</div>
</div>
</details>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>nfl_stand_plot</span>
</code></pre>
</div>
<p><img src="creating-and-using-custom-ggplot2-themes_files/figure-html5/unnamed-chunk-10-1.png" width="624" /></p>
</div>
<p>That plot told us there is a fairly linear response between having a larger point differential and having a better win rate, but does winning games and scoring more points always guarantee a playoff spot or even possibly missing the playoffs?</p>
<h2 id="playoff-teams">Playoff Teams</h2>
<p>Lets add a color that shows where playoff teams fit into the big picture. Note that in 2020 teams with a ranking of 7th or better make the playoffs vs previously only the top 6 teams made it.</p>
<details>
<summary>
Add Color
</summary>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>nfl_stand</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>mutate</span><span class='op'>(</span>
    color <span class='op'>=</span> <span class='fu'>case_when</span><span class='op'>(</span>
      <span class='va'>year</span> <span class='op'>&lt;</span> <span class='fl'>2020</span> <span class='op'>&amp;</span> <span class='va'>playoff_seed</span> <span class='op'>&lt;=</span> <span class='fl'>6</span> <span class='op'>~</span> <span class='st'>"blue"</span>,
      <span class='va'>year</span> <span class='op'>==</span> <span class='fl'>2020</span> <span class='op'>&amp;</span> <span class='va'>playoff_seed</span> <span class='op'>&lt;=</span> <span class='fl'>7</span> <span class='op'>~</span> <span class='st'>"blue"</span>,
      <span class='cn'>TRUE</span> <span class='op'>~</span>  <span class='st'>"red"</span>
    <span class='op'>)</span>
  <span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>ggplot</span><span class='op'>(</span><span class='fu'>aes</span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>differential</span>, y <span class='op'>=</span> <span class='va'>win_percent</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_vline</span><span class='op'>(</span>xintercept <span class='op'>=</span> <span class='fl'>0</span>, size <span class='op'>=</span> <span class='fl'>0.75</span>, color <span class='op'>=</span> <span class='st'>"#737373"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_point</span><span class='op'>(</span><span class='fu'>aes</span><span class='op'>(</span>color <span class='op'>=</span> <span class='va'>color</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="creating-and-using-custom-ggplot2-themes_files/figure-html5/nfl-stand-color-1.png" width="4000" /></p>
</div>
</details>
<div class="layout-chunk" data-layout="l-body">
<p><img src="creating-and-using-custom-ggplot2-themes_files/figure-html5/nfl-stand-color-1.png" width="4000" /></p>
</div>
<h2 id="add-some-color">Add some color</h2>
<p>Uh-oh what happened with the colors??? We told it to be blue and red but it reversed the colors!</p>
<p>We needed a <code>scale_color_identity()</code> call. While were adding color, lets also add some color commentary of the axes, a title, and a source caption. There we go! Now we can show that: Playoff teams typically have a positive point differential. Ill also bump up the size of the points to bump up the ink to white ratio and some transparency (alpha) so that overlapping points are clear.</p>
<p>Lastly, Ive added a vertical line at the 0 mark to clearly indicate the transition from negative to positive point differential.</p>
<details>
<summary>
Proper Colors and Text
</summary>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>nfl_stand</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>mutate</span><span class='op'>(</span>
    color <span class='op'>=</span> <span class='fu'>case_when</span><span class='op'>(</span>
      <span class='va'>year</span> <span class='op'>&lt;</span> <span class='fl'>2020</span> <span class='op'>&amp;</span> <span class='va'>playoff_seed</span> <span class='op'>&lt;=</span> <span class='fl'>6</span> <span class='op'>~</span> <span class='st'>"blue"</span>,
      <span class='va'>year</span> <span class='op'>==</span> <span class='fl'>2020</span> <span class='op'>&amp;</span> <span class='va'>playoff_seed</span> <span class='op'>&lt;=</span> <span class='fl'>7</span> <span class='op'>~</span> <span class='st'>"blue"</span>,
      <span class='cn'>TRUE</span> <span class='op'>~</span>  <span class='st'>"red"</span>
    <span class='op'>)</span>
  <span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>ggplot</span><span class='op'>(</span><span class='fu'>aes</span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>differential</span>, y <span class='op'>=</span> <span class='va'>win_percent</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_vline</span><span class='op'>(</span>xintercept <span class='op'>=</span> <span class='fl'>0</span>, size <span class='op'>=</span> <span class='fl'>0.75</span>, color <span class='op'>=</span> <span class='st'>"#737373"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_point</span><span class='op'>(</span>
    <span class='fu'>aes</span><span class='op'>(</span>color <span class='op'>=</span> <span class='va'>color</span><span class='op'>)</span>,
    size <span class='op'>=</span> <span class='fl'>3</span>, alpha <span class='op'>=</span> <span class='fl'>0.8</span>
    <span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>scale_color_identity</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>labs</span><span class='op'>(</span>x <span class='op'>=</span> <span class='st'>"Points Differential"</span>, y <span class='op'>=</span> <span class='st'>"Win Percent"</span>,
       title <span class='op'>=</span> <span class='st'>"Playoff teams typically have a positive point differential"</span>,
       subtitle <span class='op'>=</span> <span class='st'>"Data through week 15 of the 2020 NFL Season"</span>,
       caption <span class='op'>=</span> <span class='st'>"Plot: @thomas_mock | Data: ESPN"</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="creating-and-using-custom-ggplot2-themes_files/figure-html5/nfl_stand_color2-1.png" width="3000" /></p>
</div>
</details>
<div class="layout-chunk" data-layout="l-body">
<p><img src="creating-and-using-custom-ggplot2-themes_files/figure-html5/nfl_stand_color2-1.png" width="3000" /></p>
</div>
<h2 id="refine-labels">Refine labels</h2>
<p>Now, because we dont have a legend for the colors, lets add some direct labels to indicate whats going on. Ill use <code>ggtext</code> to add nicely formatted color text. Note that Ive also borrowed the NFL shields blue and red hex color code to add a bit more engaging color for both the labels and points. Lastly, Ive also converted the y-axis from decimals to proper percent labels via <code>scales::percent_format()</code> and some better breakpoints.</p>
<p>This is starting to look a lot better, but Im not a huge fan of the base theme.</p>
<details>
<summary>
Refine Labels
</summary>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://wilkelab.org/ggtext'>ggtext</a></span><span class='op'>)</span>

<span class='va'>playoff_label_scatter</span> <span class='op'>&lt;-</span> <span class='fu'>tibble</span><span class='op'>(</span>
  differential <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>25</span>,<span class='op'>-</span><span class='fl'>125</span><span class='op'>)</span>, y <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0.3</span>, <span class='fl'>0.8</span><span class='op'>)</span>, 
  label <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Missed&lt;br&gt;Playoffs"</span>, <span class='st'>"Made&lt;br&gt;Playoffs"</span><span class='op'>)</span>,
  color <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"#D50A0A"</span>, <span class='st'>"#013369"</span><span class='op'>)</span>
<span class='op'>)</span>


<span class='va'>playoff_diff_plot</span> <span class='op'>&lt;-</span> <span class='va'>nfl_stand</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>mutate</span><span class='op'>(</span>
    color <span class='op'>=</span> <span class='fu'>case_when</span><span class='op'>(</span>
      <span class='va'>year</span> <span class='op'>&lt;</span> <span class='fl'>2020</span> <span class='op'>&amp;</span> <span class='va'>playoff_seed</span> <span class='op'>&lt;=</span> <span class='fl'>6</span> <span class='op'>~</span> <span class='st'>"#013369"</span>,
      <span class='va'>year</span> <span class='op'>==</span> <span class='fl'>2020</span> <span class='op'>&amp;</span> <span class='va'>playoff_seed</span> <span class='op'>&lt;=</span> <span class='fl'>7</span> <span class='op'>~</span> <span class='st'>"#013369"</span>,
      <span class='cn'>TRUE</span> <span class='op'>~</span>  <span class='st'>"#D50A0A"</span>
    <span class='op'>)</span>
  <span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>ggplot</span><span class='op'>(</span><span class='fu'>aes</span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>differential</span>, y <span class='op'>=</span> <span class='va'>win_percent</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_vline</span><span class='op'>(</span>xintercept <span class='op'>=</span> <span class='fl'>0</span>, size <span class='op'>=</span> <span class='fl'>0.75</span>, color <span class='op'>=</span> <span class='st'>"#737373"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_hline</span><span class='op'>(</span>yintercept <span class='op'>=</span> <span class='fl'>0</span>, size <span class='op'>=</span> <span class='fl'>0.75</span>, color <span class='op'>=</span> <span class='st'>"#737373"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_point</span><span class='op'>(</span>
    <span class='fu'>aes</span><span class='op'>(</span>color <span class='op'>=</span> <span class='va'>color</span><span class='op'>)</span>,
    size <span class='op'>=</span> <span class='fl'>3</span>, alpha <span class='op'>=</span> <span class='fl'>0.8</span>
    <span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>ggtext</span><span class='fu'>::</span><span class='fu'><a href='https://wilkelab.org/ggtext/reference/geom_richtext.html'>geom_richtext</a></span><span class='op'>(</span>
    data <span class='op'>=</span> <span class='va'>playoff_label_scatter</span>,
    <span class='fu'>aes</span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>differential</span>, y <span class='op'>=</span> <span class='va'>y</span>, label <span class='op'>=</span> <span class='va'>label</span>, color <span class='op'>=</span> <span class='va'>color</span><span class='op'>)</span>,
    fill <span class='op'>=</span> <span class='st'>"#f0f0f0"</span>, label.color <span class='op'>=</span> <span class='cn'>NA</span>, <span class='co'># remove background and outline</span>
    label.padding <span class='op'>=</span> <span class='fu'>grid</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/r/grid/unit.html'>unit</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span><span class='op'>(</span><span class='fl'>0</span>, <span class='fl'>4</span><span class='op'>)</span>, <span class='st'>"pt"</span><span class='op'>)</span>, <span class='co'># remove padding</span>
    family <span class='op'>=</span> <span class='st'>"Chivo"</span>, hjust <span class='op'>=</span> <span class='fl'>0.1</span>, fontface <span class='op'>=</span> <span class='st'>"bold"</span>,
    size <span class='op'>=</span> <span class='fl'>8</span>
  <span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>scale_color_identity</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>labs</span><span class='op'>(</span>x <span class='op'>=</span> <span class='st'>"Points Differential"</span>, y <span class='op'>=</span> <span class='st'>"Win Percent"</span>,
       title <span class='op'>=</span> <span class='st'>"Playoff teams typically have a positive point differential"</span>,
       subtitle <span class='op'>=</span> <span class='st'>"Data through week 15 of the 2020 NFL Season"</span>,
       caption <span class='op'>=</span> <span class='fu'>str_to_upper</span><span class='op'>(</span><span class='st'>"Plot: @thomas_mock | Data: ESPN"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>scale_y_continuous</span><span class='op'>(</span>
    labels <span class='op'>=</span> <span class='fu'>scales</span><span class='fu'>::</span><span class='fu'><a href='https://scales.r-lib.org//reference/label_percent.html'>percent_format</a></span><span class='op'>(</span>accuracy <span class='op'>=</span> <span class='fl'>1</span><span class='op'>)</span>,
    breaks <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/seq.html'>seq</a></span><span class='op'>(</span><span class='fl'>.0</span>, <span class='fl'>1</span>, by <span class='op'>=</span> <span class='fl'>.10</span><span class='op'>)</span>
    <span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>scale_x_continuous</span><span class='op'>(</span>
    breaks <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/seq.html'>seq</a></span><span class='op'>(</span><span class='op'>-</span><span class='fl'>200</span>, <span class='fl'>250</span>, by <span class='op'>=</span> <span class='fl'>50</span><span class='op'>)</span>
  <span class='op'>)</span>
</code></pre>
</div>
</div>
</details>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>playoff_diff_plot</span>
</code></pre>
</div>
<p><img src="creating-and-using-custom-ggplot2-themes_files/figure-html5/unnamed-chunk-12-1.png" width="4000" /></p>
</div>
<h2 id="premade-themes">Premade themes</h2>
<p>Now, as mentioned earlier we can use themes to change theme components in bulk. Since were interested in some FiveThirtyEight style plots, lets try the <code>theme_fivethirtyeight()</code> from <code>ggthemes</code>.</p>
<p>This looks relatively close to the right overall style, but we lost axis labels, and the fonts are still a bit basic. Lets try and build our own!</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>playoff_diff_plot</span> <span class='op'>+</span>
  <span class='fu'>ggthemes</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/ggthemes/man/theme_fivethirtyeight.html'>theme_fivethirtyeight</a></span><span class='op'>(</span><span class='op'>)</span> 
</code></pre>
</div>
<p><img src="creating-and-using-custom-ggplot2-themes_files/figure-html5/unnamed-chunk-13-1.png" width="4000" /></p>
</div>
<h2 id="custom-themes">Custom Themes</h2>
<p>There are two ways of building your own themes:</p>
<ul>
<li><code>theme()</code> - Add theme components individually<br />
</li>
<li><code>theme_?? %+replace%</code> - Apply an existing theme and overwriting components of it</li>
</ul>
<h3 id="theme"><code>theme()</code></h3>
<p>Lets first just build up the theme components, well be attempting to recreate the FiveThirtyEight theme from scratch. Im focusing on the minimal changes necessary to recreate the plotting style. We need a lightgrey background, grey gridlines, larger text with a specific font. Note that Im using <code>systemfonts</code> to load all my system font libraries into R.</p>
<p>A quick example of a FiveThirtyEight style plot:</p>
<p><img src="https://fivethirtyeight.com/wp-content/uploads/2019/04/roeder-jeopary-folo-2.png?w=700" /></p>
<p>In short, a few concepts that make up the FiveThirtyEight style guide:<br />
- Focus on Web, ie relatively small graphics<br />
- Light smoke-grey background with grey gridlines<br />
- Black Plot Titles/Subtitles and Axis Labels<br />
- Grey axis text (ie numbers on axis)<br />
- LARGE plot titles and axis labels, with medium subtitles and axis text<br />
- Always add a source<br />
- Bright colors for plots</p>
<p>Theres a bit more fine details to what makes their plots so <em>good</em> but that covers the big parts well try to capture in our theme. Some of the nuance is up to the individual to enact (ie choosing fonts, specific colors, <em>just</em> how big to make the fonts/points/etc).</p>
<p>The first pass at a theme that weve created to match that style. Ive added comments as to what different theme elements change.</p>
<details>
<summary>
Custom Theme Code
</summary>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>theme_538</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>...</span>, <span class='va'>base_size</span> <span class='op'>=</span> <span class='fl'>12</span><span class='op'>)</span> <span class='op'>{</span>
  
    <span class='fu'>theme</span><span class='op'>(</span>
      <span class='co'># plotting components</span>
      
      <span class='co'>## drop minor gridlines</span>
      panel.grid.minor <span class='op'>=</span> <span class='fu'>element_blank</span><span class='op'>(</span><span class='op'>)</span>,
      <span class='co'># change grid lines to gray</span>
      panel.grid.major <span class='op'>=</span>  <span class='fu'>element_line</span><span class='op'>(</span>color <span class='op'>=</span> <span class='st'>"#d0d0d0"</span><span class='op'>)</span>,
      <span class='co'># fill the plot and panel spaces with grey and remove border</span>
      panel.background <span class='op'>=</span> <span class='fu'>element_rect</span><span class='op'>(</span>fill <span class='op'>=</span> <span class='st'>"#f0f0f0"</span>, color <span class='op'>=</span> <span class='cn'>NA</span><span class='op'>)</span>,
      plot.background <span class='op'>=</span> <span class='fu'>element_rect</span><span class='op'>(</span>fill <span class='op'>=</span> <span class='st'>"#f0f0f0"</span>, color <span class='op'>=</span> <span class='cn'>NA</span><span class='op'>)</span>,
      panel.border <span class='op'>=</span> <span class='fu'>element_blank</span><span class='op'>(</span><span class='op'>)</span>,
      <span class='co'># remove strip background</span>
      strip.background <span class='op'>=</span> <span class='fu'>element_blank</span><span class='op'>(</span><span class='op'>)</span>,
      <span class='co'># adjust the margins of plots and remove axis ticks</span>
      plot.margin <span class='op'>=</span> <span class='fu'>margin</span><span class='op'>(</span><span class='fl'>0.5</span>, <span class='fl'>1</span>, <span class='fl'>0.5</span>, <span class='fl'>1</span>, unit <span class='op'>=</span> <span class='st'>"cm"</span><span class='op'>)</span>,
      axis.ticks <span class='op'>=</span> <span class='fu'>element_blank</span><span class='op'>(</span><span class='op'>)</span>,
      <span class='co'># change text family, size, and adjust position of titles</span>
      text <span class='op'>=</span> <span class='fu'>element_text</span><span class='op'>(</span>family <span class='op'>=</span> <span class='st'>"Chivo"</span>, size <span class='op'>=</span> <span class='va'>base_size</span><span class='op'>)</span>,
      axis.text <span class='op'>=</span> <span class='fu'>element_text</span><span class='op'>(</span>face <span class='op'>=</span> <span class='st'>"bold"</span>, color <span class='op'>=</span> <span class='st'>"grey"</span>, size <span class='op'>=</span> <span class='va'>base_size</span><span class='op'>)</span>,
      axis.title <span class='op'>=</span> <span class='fu'>element_text</span><span class='op'>(</span>face <span class='op'>=</span> <span class='st'>"bold"</span>, size <span class='op'>=</span> <span class='fu'>rel</span><span class='op'>(</span><span class='fl'>1.33</span><span class='op'>)</span><span class='op'>)</span>,
      axis.title.x <span class='op'>=</span> <span class='fu'>element_text</span><span class='op'>(</span>margin <span class='op'>=</span> <span class='fu'>margin</span><span class='op'>(</span><span class='fl'>0.5</span>, <span class='fl'>0</span>, <span class='fl'>0</span>, <span class='fl'>0</span>, unit <span class='op'>=</span> <span class='st'>"cm"</span><span class='op'>)</span><span class='op'>)</span>,
      axis.title.y <span class='op'>=</span> <span class='fu'>element_text</span><span class='op'>(</span>margin <span class='op'>=</span> <span class='fu'>margin</span><span class='op'>(</span><span class='fl'>0</span>, <span class='fl'>0.5</span>, <span class='fl'>0</span>, <span class='fl'>0</span>, unit <span class='op'>=</span> <span class='st'>"cm"</span><span class='op'>)</span>, angle <span class='op'>=</span><span class='fl'>90</span><span class='op'>)</span>,
      plot.title <span class='op'>=</span> <span class='fu'>element_text</span><span class='op'>(</span>face <span class='op'>=</span> <span class='st'>"bold"</span>, size <span class='op'>=</span> <span class='fu'>rel</span><span class='op'>(</span><span class='fl'>1.67</span><span class='op'>)</span>, hjust <span class='op'>=</span> <span class='fl'>0</span><span class='op'>)</span>,
      plot.title.position <span class='op'>=</span> <span class='st'>"plot"</span>,
      plot.subtitle <span class='op'>=</span> <span class='fu'>element_text</span><span class='op'>(</span>size <span class='op'>=</span> <span class='fl'>16</span>, margin <span class='op'>=</span> <span class='fu'>margin</span><span class='op'>(</span><span class='fl'>0.2</span>, <span class='fl'>0</span>, <span class='fl'>1</span>, <span class='fl'>0</span>, unit <span class='op'>=</span> <span class='st'>"cm"</span><span class='op'>)</span>, hjust <span class='op'>=</span> <span class='fl'>0</span><span class='op'>)</span>,
      plot.caption <span class='op'>=</span> <span class='fu'>element_text</span><span class='op'>(</span>size <span class='op'>=</span> <span class='fl'>10</span>, margin <span class='op'>=</span> <span class='fu'>margin</span><span class='op'>(</span><span class='fl'>1</span>, <span class='fl'>0</span>, <span class='fl'>0</span>, <span class='fl'>0</span>, unit <span class='op'>=</span> <span class='st'>"cm"</span><span class='op'>)</span>, hjust <span class='op'>=</span> <span class='fl'>1</span><span class='op'>)</span>,
      strip.text <span class='op'>=</span> <span class='fu'>element_text</span><span class='op'>(</span>size <span class='op'>=</span> <span class='fu'>rel</span><span class='op'>(</span><span class='fl'>1.33</span><span class='op'>)</span>, face <span class='op'>=</span> <span class='st'>"bold"</span><span class='op'>)</span>,
      <span class='va'>...</span>
    <span class='op'>)</span>
<span class='op'>}</span>
</code></pre>
</div>
</div>
</details>
<p>Now lets apply the theme to our plot.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>playoff_diff_plot</span> <span class='op'>+</span>
  <span class='fu'>theme_538</span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="creating-and-using-custom-ggplot2-themes_files/figure-html5/unnamed-chunk-15-1.png" width="4000" /></p>
</div>
<p>I think weve created a nice representation of the FiveThirtyEight style!</p>
<h3 id="theme_-replace"><code>theme_?? %+replace%</code></h3>
<p>The <code>%+replace%</code> version instead applies a theme and then completely replaces those components rather than adding to them. This is typically more robust, but requires you to specific more arguments as theyre removed otherwise. For our purposes the code inside <code>theme()</code> is identical but there are situations where building up by <code>theme()</code> alone requires less initial work but is less robust to real life edge cases.</p>
<details>
<summary>
<code>%+replace%</code> theme
</summary>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>theme_539</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>base_size</span> <span class='op'>=</span> <span class='fl'>12</span>, <span class='va'>base_family</span> <span class='op'>=</span> <span class='st'>"Chivo"</span><span class='op'>)</span> <span class='op'>{</span>
  
  <span class='fu'>theme_grey</span><span class='op'>(</span>base_size <span class='op'>=</span> <span class='va'>base_size</span>, base_family <span class='op'>=</span> <span class='va'>base_family</span><span class='op'>)</span> <span class='op'>%+replace%</span>
    <span class='fu'>theme</span><span class='op'>(</span>
      panel.grid.minor <span class='op'>=</span> <span class='fu'>element_blank</span><span class='op'>(</span><span class='op'>)</span>,
      axis.ticks <span class='op'>=</span> <span class='fu'>element_blank</span><span class='op'>(</span><span class='op'>)</span>,
      text <span class='op'>=</span> <span class='fu'>element_text</span><span class='op'>(</span>family <span class='op'>=</span> <span class='st'>"Chivo"</span>, size <span class='op'>=</span> <span class='va'>base_size</span><span class='op'>)</span>,
      axis.text <span class='op'>=</span> <span class='fu'>element_text</span><span class='op'>(</span>face <span class='op'>=</span> <span class='st'>"bold"</span>, color <span class='op'>=</span> <span class='st'>"grey"</span>, size <span class='op'>=</span> <span class='va'>base_size</span><span class='op'>)</span>,
      axis.title <span class='op'>=</span> <span class='fu'>element_text</span><span class='op'>(</span>face <span class='op'>=</span> <span class='st'>"bold"</span>, size <span class='op'>=</span> <span class='fu'>rel</span><span class='op'>(</span><span class='fl'>1.33</span><span class='op'>)</span><span class='op'>)</span>,
      axis.title.x <span class='op'>=</span> <span class='fu'>element_text</span><span class='op'>(</span>margin <span class='op'>=</span> <span class='fu'>margin</span><span class='op'>(</span><span class='fl'>0.5</span>, <span class='fl'>0</span>, <span class='fl'>0</span>, <span class='fl'>0</span>, unit <span class='op'>=</span> <span class='st'>"cm"</span><span class='op'>)</span><span class='op'>)</span>,
      axis.title.y <span class='op'>=</span> <span class='fu'>element_text</span><span class='op'>(</span>margin <span class='op'>=</span> <span class='fu'>margin</span><span class='op'>(</span><span class='fl'>0</span>, <span class='fl'>0.5</span>, <span class='fl'>0</span>, <span class='fl'>0</span>, unit <span class='op'>=</span> <span class='st'>"cm"</span><span class='op'>)</span>, angle <span class='op'>=</span><span class='fl'>90</span><span class='op'>)</span>,
      plot.title <span class='op'>=</span> <span class='fu'>element_text</span><span class='op'>(</span>face <span class='op'>=</span> <span class='st'>"bold"</span>, size <span class='op'>=</span> <span class='fu'>rel</span><span class='op'>(</span><span class='fl'>1.67</span><span class='op'>)</span>, hjust <span class='op'>=</span> <span class='fl'>0</span><span class='op'>)</span>,
      plot.title.position <span class='op'>=</span> <span class='st'>"plot"</span>,
      plot.subtitle <span class='op'>=</span> <span class='fu'>element_text</span><span class='op'>(</span>size <span class='op'>=</span> <span class='fl'>16</span>, margin <span class='op'>=</span> <span class='fu'>margin</span><span class='op'>(</span><span class='fl'>0.2</span>, <span class='fl'>0</span>, <span class='fl'>1</span>, <span class='fl'>0</span>, unit <span class='op'>=</span> <span class='st'>"cm"</span><span class='op'>)</span>, hjust <span class='op'>=</span> <span class='fl'>0</span><span class='op'>)</span>,
      plot.caption <span class='op'>=</span> <span class='fu'>element_text</span><span class='op'>(</span>size <span class='op'>=</span> <span class='fl'>10</span>, margin <span class='op'>=</span> <span class='fu'>margin</span><span class='op'>(</span><span class='fl'>1</span>, <span class='fl'>0</span>, <span class='fl'>0</span>, <span class='fl'>0</span>, unit <span class='op'>=</span> <span class='st'>"cm"</span><span class='op'>)</span>, hjust <span class='op'>=</span> <span class='fl'>1</span><span class='op'>)</span>,
      plot.background <span class='op'>=</span> <span class='fu'>element_rect</span><span class='op'>(</span>fill <span class='op'>=</span> <span class='st'>"#f0f0f0"</span>, color <span class='op'>=</span> <span class='cn'>NA</span><span class='op'>)</span>,
      panel.background <span class='op'>=</span> <span class='fu'>element_rect</span><span class='op'>(</span>fill <span class='op'>=</span> <span class='st'>"#f0f0f0"</span>, color <span class='op'>=</span> <span class='cn'>NA</span><span class='op'>)</span>,
      panel.grid.major <span class='op'>=</span>  <span class='fu'>element_line</span><span class='op'>(</span>color <span class='op'>=</span> <span class='st'>"#d0d0d0"</span><span class='op'>)</span>,
      panel.border <span class='op'>=</span> <span class='fu'>element_blank</span><span class='op'>(</span><span class='op'>)</span>,
      plot.margin <span class='op'>=</span> <span class='fu'>margin</span><span class='op'>(</span><span class='fl'>0.5</span>, <span class='fl'>1</span>, <span class='fl'>0.5</span>, <span class='fl'>1</span>, unit <span class='op'>=</span> <span class='st'>"cm"</span><span class='op'>)</span>,
      strip.background <span class='op'>=</span> <span class='fu'>element_blank</span><span class='op'>(</span><span class='op'>)</span>,
      strip.text <span class='op'>=</span> <span class='fu'>element_text</span><span class='op'>(</span>size <span class='op'>=</span> <span class='fu'>rel</span><span class='op'>(</span><span class='fl'>1.33</span><span class='op'>)</span>, face <span class='op'>=</span> <span class='st'>"bold"</span><span class='op'>)</span>
    <span class='op'>)</span>
<span class='op'>}</span>
</code></pre>
</div>
</div>
</details>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>playoff_diff_plot</span> <span class='op'>+</span>
  <span class='fu'>theme_539</span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="creating-and-using-custom-ggplot2-themes_files/figure-html5/unnamed-chunk-17-1.png" width="4000" /></p>
</div>
<h2 id="same-data-different-story">Same Data, Different Story</h2>
<p>The Same Data, Different Story (SDDS) means we can use the same data in a different plot to tell a slightly different story. We can now represent theNow were going to use our theme and the same data, but represent the data a bit differently. Well load the <code>ggridges</code> package to let us plot many distributions at once. Again were adjusting the colors, plotting the data, and adding our theme. Overall this looks pretty excellent out of the gate! This is why themes + custom colors are so useful as you can get 80% of the way there with just those two changes.</p>
<p>We can see that for most years playoff teams are more frequently with positive point differentials and non-playoff teams have negative differentials, but there are clear cases (2014, 2016) where the story is not as clean!</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://wilkelab.org/ggridges'>ggridges</a></span><span class='op'>)</span>

<span class='va'>stand_density</span> <span class='op'>&lt;-</span> <span class='va'>nfl_stand</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>mutate</span><span class='op'>(</span>
    color <span class='op'>=</span> <span class='fu'>case_when</span><span class='op'>(</span>
      <span class='va'>year</span> <span class='op'>&lt;</span> <span class='fl'>2020</span> <span class='op'>&amp;</span> <span class='va'>playoff_seed</span> <span class='op'>&lt;=</span> <span class='fl'>6</span> <span class='op'>~</span> <span class='st'>"#013369"</span>,
      <span class='va'>year</span> <span class='op'>==</span> <span class='fl'>2020</span> <span class='op'>&amp;</span> <span class='va'>playoff_seed</span> <span class='op'>&lt;=</span> <span class='fl'>7</span> <span class='op'>~</span> <span class='st'>"#013369"</span>,
      <span class='cn'>TRUE</span> <span class='op'>~</span>  <span class='st'>"#D50A0A"</span>
    <span class='op'>)</span>
  <span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>ggplot</span><span class='op'>(</span><span class='fu'>aes</span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>differential</span>, y <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>factor</a></span><span class='op'>(</span><span class='va'>year</span><span class='op'>)</span>, color <span class='op'>=</span> <span class='va'>color</span>, fill <span class='op'>=</span> <span class='va'>color</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_vline</span><span class='op'>(</span>xintercept <span class='op'>=</span> <span class='fl'>0.5</span>, size <span class='op'>=</span> <span class='fl'>0.75</span>, color <span class='op'>=</span> <span class='st'>"#737373"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://wilkelab.org/ggridges/reference/geom_density_ridges.html'>geom_density_ridges</a></span><span class='op'>(</span>alpha <span class='op'>=</span> <span class='fl'>0.8</span>, scale <span class='op'>=</span> <span class='fl'>1.1</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>scale_color_identity</span><span class='op'>(</span>aesthetics <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"fill"</span>, <span class='st'>"color"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>theme_538</span><span class='op'>(</span><span class='op'>)</span>

<span class='va'>stand_density</span>
</code></pre>
</div>
<p><img src="creating-and-using-custom-ggplot2-themes_files/figure-html5/unnamed-chunk-18-1.png" width="4000" /></p>
</div>
<h3 id="add-context">Add context</h3>
<p>We can add a bit more context with custom embedded labels, a title, subtitle, etc and by adjusting some of the x/y breaks. Im going to completely drop the y-gridlines since theyre not needed. Note that for the custom annotations that factors are represented essentially as discrete ordered integers, so for the 7 years we have plotted we can put a label just above the last year by plotting at 7.5 (just above the 7th year/2020).</p>
<details>
<summary>
Add Context
</summary>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='co'># create a small dataset for the custom annotations</span>
<span class='va'>playoff_label_ridge</span> <span class='op'>&lt;-</span> <span class='fu'>tibble</span><span class='op'>(</span>
  y <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>7.75</span>, <span class='fl'>7.75</span><span class='op'>)</span>, differential <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='op'>-</span><span class='fl'>250</span>,<span class='fl'>150</span><span class='op'>)</span>,
  label <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Missed&lt;br&gt;Playoffs"</span>, <span class='st'>"Made&lt;br&gt;Playoffs"</span><span class='op'>)</span>,
  color <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"#D50A0A"</span>, <span class='st'>"#013369"</span><span class='op'>)</span>
<span class='op'>)</span>

<span class='va'>stand_density</span> <span class='op'>+</span>
  <span class='fu'>scale_x_continuous</span><span class='op'>(</span>breaks <span class='op'>=</span> <span class='fu'>scales</span><span class='fu'>::</span><span class='fu'><a href='https://scales.r-lib.org//reference/breaks_pretty.html'>pretty_breaks</a></span><span class='op'>(</span>n <span class='op'>=</span> <span class='fl'>10</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>coord_cartesian</span><span class='op'>(</span>xlim <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='op'>-</span><span class='fl'>250</span>, <span class='fl'>250</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>ggtext</span><span class='fu'>::</span><span class='fu'><a href='https://wilkelab.org/ggtext/reference/geom_richtext.html'>geom_richtext</a></span><span class='op'>(</span>
    data <span class='op'>=</span> <span class='va'>playoff_label_ridge</span>,
    <span class='fu'>aes</span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>differential</span>, y <span class='op'>=</span> <span class='va'>y</span>, label <span class='op'>=</span> <span class='va'>label</span>, color <span class='op'>=</span> <span class='va'>color</span><span class='op'>)</span>,
    fill <span class='op'>=</span> <span class='st'>"#f0f0f0"</span>, label.color <span class='op'>=</span> <span class='cn'>NA</span>, <span class='co'># remove background and outline</span>
    label.padding <span class='op'>=</span> <span class='fu'>grid</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/r/grid/unit.html'>unit</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span><span class='op'>(</span><span class='fl'>0</span>, <span class='fl'>4</span><span class='op'>)</span>, <span class='st'>"pt"</span><span class='op'>)</span>, <span class='co'># remove padding</span>
    family <span class='op'>=</span> <span class='st'>"Chivo"</span>, hjust <span class='op'>=</span> <span class='fl'>0</span> , fontface <span class='op'>=</span> <span class='st'>"bold"</span>,
    size <span class='op'>=</span> <span class='fl'>6</span>
  <span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>theme_538</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span> 
  <span class='fu'>theme</span><span class='op'>(</span>panel.grid.major.y <span class='op'>=</span> <span class='fu'>element_blank</span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>labs</span><span class='op'>(</span>
    x <span class='op'>=</span> <span class='st'>"Point Differential"</span>, y <span class='op'>=</span> <span class='st'>""</span>,
    title <span class='op'>=</span> <span class='st'>"Playoff teams typically have a positive point differential"</span>,
    subtitle <span class='op'>=</span> <span class='st'>"Data through week 15 of the 2020 NFL Season"</span>,
    caption <span class='op'>=</span> <span class='st'>"Plot: @thomas_mock | Data: ESPN"</span>
    <span class='op'>)</span>
</code></pre>
</div>
<p><img src="creating-and-using-custom-ggplot2-themes_files/figure-html5/ridge-plot-1.png" width="4000" /></p>
</div>
</details>
<div class="layout-chunk" data-layout="l-body">
<p><img src="creating-and-using-custom-ggplot2-themes_files/figure-html5/ridge-plot-1.png" width="4000" /></p>
</div>
<p>And if you want to look at the full code to create this all at once, see the expandable tag below.</p>
<details>
<summary>
Full code
</summary>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://wilkelab.org/ggridges'>ggridges</a></span><span class='op'>)</span>

<span class='va'>playoff_label_ridge</span> <span class='op'>&lt;-</span> <span class='fu'>tibble</span><span class='op'>(</span>
  y <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>7.5</span>, <span class='fl'>7.5</span><span class='op'>)</span>, differential <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='op'>-</span><span class='fl'>225</span>,<span class='fl'>150</span><span class='op'>)</span>,
  label <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Missed&lt;br&gt;Playoffs"</span>, <span class='st'>"Made&lt;br&gt;Playoffs"</span><span class='op'>)</span>,
  color <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"#D50A0A"</span>, <span class='st'>"#013369"</span><span class='op'>)</span>
<span class='op'>)</span>


<span class='va'>nfl_stand</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>mutate</span><span class='op'>(</span>
    color <span class='op'>=</span> <span class='fu'>case_when</span><span class='op'>(</span>
      <span class='va'>year</span> <span class='op'>&lt;</span> <span class='fl'>2020</span> <span class='op'>&amp;</span> <span class='va'>playoff_seed</span> <span class='op'>&lt;=</span> <span class='fl'>6</span> <span class='op'>~</span> <span class='st'>"#013369"</span>,
      <span class='va'>year</span> <span class='op'>==</span> <span class='fl'>2020</span> <span class='op'>&amp;</span> <span class='va'>playoff_seed</span> <span class='op'>&lt;=</span> <span class='fl'>7</span> <span class='op'>~</span> <span class='st'>"#013369"</span>,
      <span class='cn'>TRUE</span> <span class='op'>~</span>  <span class='st'>"#D50A0A"</span>
    <span class='op'>)</span>
  <span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>ggplot</span><span class='op'>(</span><span class='fu'>aes</span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>differential</span>, y <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>factor</a></span><span class='op'>(</span><span class='va'>year</span><span class='op'>)</span>, color <span class='op'>=</span> <span class='va'>color</span>, fill <span class='op'>=</span> <span class='va'>color</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_vline</span><span class='op'>(</span>xintercept <span class='op'>=</span> <span class='fl'>0.5</span>, size <span class='op'>=</span> <span class='fl'>0.75</span>, color <span class='op'>=</span> <span class='st'>"#737373"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://wilkelab.org/ggridges/reference/geom_density_ridges.html'>geom_density_ridges</a></span><span class='op'>(</span>alpha <span class='op'>=</span> <span class='fl'>0.8</span>, scale <span class='op'>=</span> <span class='fl'>1.1</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>ggtext</span><span class='fu'>::</span><span class='fu'><a href='https://wilkelab.org/ggtext/reference/geom_richtext.html'>geom_richtext</a></span><span class='op'>(</span>
    data <span class='op'>=</span> <span class='va'>playoff_label_ridge</span>,
    <span class='fu'>aes</span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>differential</span>, y <span class='op'>=</span> <span class='va'>y</span>, label <span class='op'>=</span> <span class='va'>label</span>, color <span class='op'>=</span> <span class='va'>color</span><span class='op'>)</span>,
    fill <span class='op'>=</span> <span class='st'>"#f0f0f0"</span>, label.color <span class='op'>=</span> <span class='cn'>NA</span>, <span class='co'># remove background and outline</span>
    label.padding <span class='op'>=</span> <span class='fu'>grid</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/r/grid/unit.html'>unit</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span><span class='op'>(</span><span class='fl'>0</span>, <span class='fl'>4</span><span class='op'>)</span>, <span class='st'>"pt"</span><span class='op'>)</span>, <span class='co'># remove padding</span>
    family <span class='op'>=</span> <span class='st'>"Chivo"</span>, hjust <span class='op'>=</span> <span class='fl'>0</span> , fontface <span class='op'>=</span> <span class='st'>"bold"</span>,
    size <span class='op'>=</span> <span class='fl'>6</span>
  <span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>scale_x_continuous</span><span class='op'>(</span>breaks <span class='op'>=</span> <span class='fu'>scales</span><span class='fu'>::</span><span class='fu'><a href='https://scales.r-lib.org//reference/breaks_pretty.html'>pretty_breaks</a></span><span class='op'>(</span>n <span class='op'>=</span> <span class='fl'>10</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>coord_cartesian</span><span class='op'>(</span>xlim <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='op'>-</span><span class='fl'>250</span>, <span class='fl'>250</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>scale_color_identity</span><span class='op'>(</span>aesthetics <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"fill"</span>, <span class='st'>"color"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>theme_538</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>theme</span><span class='op'>(</span>panel.grid.major.y <span class='op'>=</span> <span class='fu'>element_blank</span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>labs</span><span class='op'>(</span>
    x <span class='op'>=</span> <span class='st'>"Point Differential"</span>, y <span class='op'>=</span> <span class='st'>""</span>,
    title <span class='op'>=</span> <span class='st'>"Playoff teams typically have a positive point differential"</span>,
    subtitle <span class='op'>=</span> <span class='st'>"Data through Week 15 of the 2020 NFL Season"</span>,
    caption <span class='op'>=</span> <span class='st'>"Plot: @thomas_mock | Data: ESPN"</span>
    <span class='op'>)</span>
</code></pre>
</div>
<p><img src="creating-and-using-custom-ggplot2-themes_files/figure-html5/unnamed-chunk-19-1.png" width="4000" /></p>
</div>
</details>
<hr />
<h2 id="sdds-2-rise-of-2020">SDDS 2: Rise of 2020</h2>
<p>We can go one step deeper on the Same Data, Different Story principle and plot the data just a bit differently. Lets plot the playoff teams for 2020 (top 7), and the top two on-the-bubble teams. Ive added the <code>theme_538()</code>, and a horizontal line at the 0 mark again. Note that Im using <code>tidytext::reorder_within()</code> to reorder the teams by their playoff seed within a conference. <code>reorder()</code> would work here as well, so <code>tidytext::reorder_within()</code> isnt <em>truly</em> necessary, but can be very useful when re-ordering columns across facets.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>stand_df</span> <span class='op'>&lt;-</span> <span class='va'>nfl_stand</span> <span class='op'>%&gt;%</span> 
  <span class='fu'><a href='https://rdrr.io/r/stats/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>year</span> <span class='op'>==</span> <span class='fl'>2020</span><span class='op'>)</span>

<span class='va'>stand_df</span> <span class='op'>%&gt;%</span> 
  <span class='fu'><a href='https://rdrr.io/r/stats/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>playoff_seed</span> <span class='op'>&lt;=</span> <span class='fl'>12</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>ggplot</span><span class='op'>(</span><span class='fu'>aes</span><span class='op'>(</span>x <span class='op'>=</span> <span class='fu'>tidytext</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/tidytext/man/reorder_within.html'>reorder_within</a></span><span class='op'>(</span><span class='va'>abb_name</span>, <span class='va'>playoff_seed</span>, <span class='va'>conf</span><span class='op'>)</span>, y <span class='op'>=</span> <span class='va'>differential</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_col</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span> 
  <span class='fu'>tidytext</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/tidytext/man/reorder_within.html'>scale_x_reordered</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>facet_grid</span><span class='op'>(</span><span class='op'>~</span><span class='va'>conf</span>, scales <span class='op'>=</span> <span class='st'>"free_x"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_hline</span><span class='op'>(</span>yintercept <span class='op'>=</span> <span class='fl'>0</span>, size <span class='op'>=</span> <span class='fl'>0.75</span>, color <span class='op'>=</span> <span class='st'>"#737373"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>theme_538</span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="creating-and-using-custom-ggplot2-themes_files/figure-html5/unnamed-chunk-20-1.png" width="5000" /></p>
</div>
<h3 id="add-context-1">Add Context</h3>
<p>Rather than labeling the x-axis with team, we could supply playoff seed. Well add our titles, captions, etc along with a vertical line for separation of the playoff vs non-playoff teams, and a vertical line to separate the Y-axis from the X-axis baseline. Weve also expanded the break points on the y-axis and dropped the x-axis gridlines.</p>
<details>
<summary>
Add Context
</summary>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='co'># Small label dataset</span>
<span class='va'>playoff_label</span> <span class='op'>&lt;-</span> <span class='fu'>tibble</span><span class='op'>(</span>
  playoff_seed <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>9</span>, <span class='fl'>4</span><span class='op'>)</span>,
  differential <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>30</span>, <span class='fl'>100</span><span class='op'>)</span>,
  conf <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"AFC"</span>, <span class='st'>"AFC"</span><span class='op'>)</span>,
  label <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Outside&lt;br&gt;looking in"</span>, <span class='st'>"Playoff&lt;br&gt;teams"</span><span class='op'>)</span>,
  color <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"#D50A0A"</span>, <span class='st'>"#013369"</span><span class='op'>)</span>
<span class='op'>)</span>

<span class='va'>stand_df</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://rdrr.io/r/stats/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>playoff_seed</span> <span class='op'>&lt;=</span> <span class='fl'>12</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>ggplot</span><span class='op'>(</span><span class='fu'>aes</span><span class='op'>(</span>x <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>as.factor</a></span><span class='op'>(</span><span class='va'>playoff_seed</span><span class='op'>)</span>, y <span class='op'>=</span> <span class='va'>differential</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_col</span><span class='op'>(</span>
    <span class='fu'>aes</span><span class='op'>(</span>fill <span class='op'>=</span> <span class='fu'>if_else</span><span class='op'>(</span><span class='va'>playoff_seed</span> <span class='op'>&lt;=</span> <span class='fl'>7</span>, <span class='st'>"#013369"</span>, <span class='st'>"#D50A0A"</span><span class='op'>)</span><span class='op'>)</span>,
    width <span class='op'>=</span> <span class='fl'>0.8</span>
  <span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>ggtext</span><span class='fu'>::</span><span class='fu'><a href='https://wilkelab.org/ggtext/reference/geom_richtext.html'>geom_richtext</a></span><span class='op'>(</span>
    data <span class='op'>=</span> <span class='va'>playoff_label</span>,
    <span class='fu'>aes</span><span class='op'>(</span>label <span class='op'>=</span> <span class='va'>label</span>, color <span class='op'>=</span> <span class='va'>color</span><span class='op'>)</span>,
    fill <span class='op'>=</span> <span class='st'>"#f0f0f0"</span>,
    label.color <span class='op'>=</span> <span class='cn'>NA</span>,
    <span class='co'># remove background and outline</span>
    label.padding <span class='op'>=</span> <span class='fu'>grid</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/r/grid/unit.html'>unit</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span><span class='op'>(</span><span class='fl'>0</span>, <span class='fl'>4</span><span class='op'>)</span>, <span class='st'>"pt"</span><span class='op'>)</span>,
    <span class='co'># remove padding</span>
    family <span class='op'>=</span> <span class='st'>"Chivo"</span>,
    hjust <span class='op'>=</span> <span class='fl'>0.1</span>,
    fontface <span class='op'>=</span> <span class='st'>"bold"</span>,
    size <span class='op'>=</span> <span class='fl'>6</span>
  <span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_hline</span><span class='op'>(</span>yintercept <span class='op'>=</span> <span class='fl'>0</span>, size <span class='op'>=</span> <span class='fl'>0.75</span>, color <span class='op'>=</span> <span class='st'>"#737373"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_vline</span><span class='op'>(</span>xintercept <span class='op'>=</span> <span class='fl'>7.5</span>, size <span class='op'>=</span> <span class='fl'>1</span>, color <span class='op'>=</span> <span class='st'>"grey"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_vline</span><span class='op'>(</span>xintercept <span class='op'>=</span> <span class='fl'>0.5</span>, size <span class='op'>=</span> <span class='fl'>0.75</span>, color <span class='op'>=</span> <span class='st'>"#737373"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>facet_grid</span><span class='op'>(</span><span class='op'>~</span><span class='va'>conf</span>, scales <span class='op'>=</span> <span class='st'>"free_x"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>scale_y_continuous</span><span class='op'>(</span>breaks <span class='op'>=</span> <span class='fu'>scales</span><span class='fu'>::</span><span class='fu'><a href='https://scales.r-lib.org//reference/breaks_pretty.html'>pretty_breaks</a></span><span class='op'>(</span>n <span class='op'>=</span> <span class='fl'>10</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>scale_fill_identity</span><span class='op'>(</span>aesthetics <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"fill"</span>, <span class='st'>"color"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>theme_538</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>theme</span><span class='op'>(</span>panel.grid.major.x <span class='op'>=</span> <span class='fu'>element_blank</span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>labs</span><span class='op'>(</span>
    x <span class='op'>=</span> <span class='st'>"Playoff Seed"</span>,
    y <span class='op'>=</span> <span class='st'>"Points Differential"</span>,
    title <span class='op'>=</span> <span class='st'>"Playoff teams typically have a positive point differential"</span>,
    subtitle <span class='op'>=</span> <span class='st'>"Data through week 15 of the 2020 NFL Season"</span>,
    caption <span class='op'>=</span> <span class='st'>"Plot: @thomas_mock | Data: ESPN"</span>
  <span class='op'>)</span>
</code></pre>
</div>
<p><img src="creating-and-using-custom-ggplot2-themes_files/figure-html5/playoff-seed-1.png" width="5000" /></p>
</div>
</details>
<div class="layout-chunk" data-layout="l-body">
<p><img src="creating-and-using-custom-ggplot2-themes_files/figure-html5/playoff-seed-1.png" width="5000" /></p>
</div>
<h3 id="team-vs-seed">Team vs Seed</h3>
<p>By converting the x-axis to playoff seed instead of team, weve lost some data here, specifically which teams are which. We could add these back with by adding in an image at the end of each bar.</p>
<details>
<summary>
Add images
</summary>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>link_to_img</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>x</span>, <span class='va'>width</span> <span class='op'>=</span> <span class='fl'>25</span><span class='op'>)</span> <span class='op'>{</span>
  <span class='fu'>glue</span><span class='fu'>::</span><span class='fu'><a href='https://glue.tidyverse.org/reference/glue.html'>glue</a></span><span class='op'>(</span><span class='st'>"&lt;img src='{x}' width='{width}'/&gt;"</span><span class='op'>)</span>
<span class='op'>}</span>

<span class='va'>playoff_label</span> <span class='op'>&lt;-</span> <span class='fu'>tibble</span><span class='op'>(</span>
  playoff_seed <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>9</span>, <span class='fl'>4</span><span class='op'>)</span>,
  differential <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>90</span>, <span class='fl'>110</span><span class='op'>)</span>,
  conf <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"AFC"</span>, <span class='st'>"AFC"</span><span class='op'>)</span>,
  label <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Outside&lt;br&gt;looking in"</span>, <span class='st'>"Playoff&lt;br&gt;teams"</span><span class='op'>)</span>,
  color <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"#D50A0A"</span>, <span class='st'>"#013369"</span><span class='op'>)</span>
<span class='op'>)</span>

<span class='va'>stand_plot_logo</span> <span class='op'>&lt;-</span> <span class='va'>stand_df</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://rdrr.io/r/stats/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>playoff_seed</span> <span class='op'>&lt;=</span> <span class='fl'>12</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>mutate</span><span class='op'>(</span>label <span class='op'>=</span> <span class='fu'>link_to_img</span><span class='op'>(</span><span class='va'>logos</span>, width <span class='op'>=</span> <span class='fl'>25</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>ggplot</span><span class='op'>(</span><span class='fu'>aes</span><span class='op'>(</span>x <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>as.factor</a></span><span class='op'>(</span><span class='va'>playoff_seed</span><span class='op'>)</span>, y <span class='op'>=</span> <span class='va'>differential</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_col</span><span class='op'>(</span>
    <span class='fu'>aes</span><span class='op'>(</span>fill <span class='op'>=</span> <span class='fu'>if_else</span><span class='op'>(</span><span class='va'>playoff_seed</span> <span class='op'>&lt;=</span> <span class='fl'>7</span>, <span class='st'>"#013369"</span>, <span class='st'>"#D50A0A"</span><span class='op'>)</span><span class='op'>)</span>,
    width <span class='op'>=</span> <span class='fl'>0.8</span>
  <span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>ggtext</span><span class='fu'>::</span><span class='fu'><a href='https://wilkelab.org/ggtext/reference/geom_richtext.html'>geom_richtext</a></span><span class='op'>(</span>
    data <span class='op'>=</span> <span class='va'>playoff_label</span>,
    <span class='fu'>aes</span><span class='op'>(</span>label <span class='op'>=</span> <span class='va'>label</span>, color <span class='op'>=</span> <span class='va'>color</span><span class='op'>)</span>,
    fill <span class='op'>=</span> <span class='st'>"#f0f0f0"</span>,
    label.color <span class='op'>=</span> <span class='cn'>NA</span>,
    <span class='co'># remove background and outline</span>
    label.padding <span class='op'>=</span> <span class='fu'>grid</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/r/grid/unit.html'>unit</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span><span class='op'>(</span><span class='fl'>0</span>, <span class='fl'>4</span><span class='op'>)</span>, <span class='st'>"pt"</span><span class='op'>)</span>,
    <span class='co'># remove padding</span>
    family <span class='op'>=</span> <span class='st'>"Chivo"</span>,
    hjust <span class='op'>=</span> <span class='fl'>0.1</span>,
    fontface <span class='op'>=</span> <span class='st'>"bold"</span>,
    size <span class='op'>=</span> <span class='fl'>5</span>
  <span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://wilkelab.org/ggtext/reference/geom_richtext.html'>geom_richtext</a></span><span class='op'>(</span>
    <span class='fu'>aes</span><span class='op'>(</span>
      x <span class='op'>=</span> <span class='va'>playoff_seed</span>,
      y <span class='op'>=</span> <span class='va'>differential</span>,
      label <span class='op'>=</span> <span class='va'>label</span>,
      vjust <span class='op'>=</span> <span class='fu'>if_else</span><span class='op'>(</span><span class='va'>differential</span> <span class='op'>&lt;=</span> <span class='fl'>1</span>, <span class='fl'>1.1</span>, <span class='op'>-</span><span class='fl'>0.1</span><span class='op'>)</span>
    <span class='op'>)</span>,
    size <span class='op'>=</span> <span class='fl'>1</span>,
    fill <span class='op'>=</span> <span class='st'>"#f0f0f0"</span>,
    label.color <span class='op'>=</span> <span class='cn'>NA</span>,
    <span class='co'># remove background and outline</span>
    label.padding <span class='op'>=</span> <span class='fu'>grid</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/r/grid/unit.html'>unit</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span><span class='op'>(</span><span class='fl'>0</span>, <span class='fl'>4</span><span class='op'>)</span>, <span class='st'>"pt"</span><span class='op'>)</span> <span class='co'># remove padding</span>
  <span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_hline</span><span class='op'>(</span>yintercept <span class='op'>=</span> <span class='fl'>0</span>, size <span class='op'>=</span> <span class='fl'>0.75</span>, color <span class='op'>=</span> <span class='st'>"#737373"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_vline</span><span class='op'>(</span>xintercept <span class='op'>=</span> <span class='fl'>7.5</span>, size <span class='op'>=</span> <span class='fl'>1</span>, color <span class='op'>=</span> <span class='st'>"grey"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_vline</span><span class='op'>(</span>xintercept <span class='op'>=</span> <span class='fl'>0.5</span>, size <span class='op'>=</span> <span class='fl'>0.75</span>, color <span class='op'>=</span> <span class='st'>"#737373"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>facet_grid</span><span class='op'>(</span><span class='op'>~</span><span class='va'>conf</span>, scales <span class='op'>=</span> <span class='st'>"free_x"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>scale_y_continuous</span><span class='op'>(</span>
    breaks <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/seq.html'>seq</a></span><span class='op'>(</span><span class='op'>-</span><span class='fl'>125</span>, <span class='fl'>125</span>, by <span class='op'>=</span> <span class='fl'>25</span><span class='op'>)</span>,
    limits <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='op'>-</span><span class='fl'>130</span>, <span class='fl'>130</span><span class='op'>)</span>
  <span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>scale_fill_identity</span><span class='op'>(</span>aesthetics <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"fill"</span>, <span class='st'>"color"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>theme_538</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>theme</span><span class='op'>(</span>
    panel.grid.major.x <span class='op'>=</span> <span class='fu'>element_blank</span><span class='op'>(</span><span class='op'>)</span>
  <span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>labs</span><span class='op'>(</span>
    x <span class='op'>=</span> <span class='st'>"Playoff Seed"</span>,
    y <span class='op'>=</span> <span class='st'>"Points Differential"</span>,
    title <span class='op'>=</span> <span class='st'>"Playoff teams typically have a positive point differential"</span>,
    subtitle <span class='op'>=</span> <span class='st'>"Amongst the bubble teams, Baltimore appears to be the most 'deservering' of a playoff spot"</span>,
    caption <span class='op'>=</span> <span class='st'>"Plot: @thomas_mock | Data: ESPN"</span>
  <span class='op'>)</span>

<span class='fu'>ggsave</span><span class='op'>(</span><span class='st'>"stand_plot_logo.png"</span>, <span class='va'>stand_plot_logo</span>, height <span class='op'>=</span> <span class='fl'>8</span>, width <span class='op'>=</span> <span class='fl'>10</span>, dpi <span class='op'>=</span> <span class='fl'>300</span><span class='op'>)</span>
</code></pre>
</div>
</div>
</details>
<p><img src="stand_plot_logo.png" /></p>
<p>Alternatively, we could convert the X-axis <em>back</em> to team, and then add playoff seed numbers back to each of the bars. This is getting a bit busier, but I think its useful to show the <code>if_else()</code> workflow for plotting a label at a specific point based on a criterion. That can be very helpful in plotting where you cant control the direction of a bar just like we see here.</p>
<details>
<summary>
Direct Labels
</summary>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>stand_df</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://rdrr.io/r/stats/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>playoff_seed</span> <span class='op'>&lt;=</span> <span class='fl'>12</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>ggplot</span><span class='op'>(</span><span class='fu'>aes</span><span class='op'>(</span>x <span class='op'>=</span> <span class='fu'>tidytext</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/tidytext/man/reorder_within.html'>reorder_within</a></span><span class='op'>(</span><span class='va'>abb_name</span>, <span class='va'>playoff_seed</span>, <span class='va'>conf</span><span class='op'>)</span>, y <span class='op'>=</span> <span class='va'>differential</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_col</span><span class='op'>(</span>
    <span class='fu'>aes</span><span class='op'>(</span>fill <span class='op'>=</span> <span class='fu'>if_else</span><span class='op'>(</span><span class='va'>playoff_seed</span> <span class='op'>&lt;=</span> <span class='fl'>7</span>, <span class='st'>"#013369"</span>, <span class='st'>"#D50A0A"</span><span class='op'>)</span><span class='op'>)</span>,
    width <span class='op'>=</span> <span class='fl'>0.8</span>
  <span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>ggtext</span><span class='fu'>::</span><span class='fu'><a href='https://wilkelab.org/ggtext/reference/geom_richtext.html'>geom_richtext</a></span><span class='op'>(</span>
    data <span class='op'>=</span> <span class='va'>playoff_label</span>,
    <span class='fu'>aes</span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>playoff_seed</span>, label <span class='op'>=</span> <span class='va'>label</span>, color <span class='op'>=</span> <span class='va'>color</span><span class='op'>)</span>,
    fill <span class='op'>=</span> <span class='st'>"#f0f0f0"</span>,
    label.color <span class='op'>=</span> <span class='cn'>NA</span>,
    <span class='co'># remove background and outline</span>
    label.padding <span class='op'>=</span> <span class='fu'>grid</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/r/grid/unit.html'>unit</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span><span class='op'>(</span><span class='fl'>0</span>, <span class='fl'>4</span><span class='op'>)</span>, <span class='st'>"pt"</span><span class='op'>)</span>,
    <span class='co'># remove padding</span>
    family <span class='op'>=</span> <span class='st'>"Chivo"</span>,
    hjust <span class='op'>=</span> <span class='fl'>0.1</span>,
    fontface <span class='op'>=</span> <span class='st'>"bold"</span>,
    size <span class='op'>=</span> <span class='fl'>6</span>
  <span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>ggtext</span><span class='fu'>::</span><span class='fu'><a href='https://wilkelab.org/ggtext/reference/geom_richtext.html'>geom_richtext</a></span><span class='op'>(</span>
    <span class='fu'>aes</span><span class='op'>(</span>label <span class='op'>=</span> <span class='va'>playoff_seed</span>, y <span class='op'>=</span> <span class='fu'>if_else</span><span class='op'>(</span><span class='va'>differential</span> <span class='op'>&lt;=</span> <span class='fl'>0</span>, <span class='fl'>10</span>, <span class='op'>-</span><span class='fl'>10</span><span class='op'>)</span><span class='op'>)</span>,
    color <span class='op'>=</span> <span class='st'>"black"</span>,
    fill <span class='op'>=</span> <span class='st'>"#f0f0f0"</span>,
    label.color <span class='op'>=</span> <span class='cn'>NA</span>,
    <span class='co'># remove background and outline</span>
    label.padding <span class='op'>=</span> <span class='fu'>grid</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/r/grid/unit.html'>unit</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span><span class='op'>(</span><span class='fl'>0</span>, <span class='fl'>4</span><span class='op'>)</span>, <span class='st'>"pt"</span><span class='op'>)</span>,
    <span class='co'># remove padding</span>
    family <span class='op'>=</span> <span class='st'>"Chivo"</span>,
    hjust <span class='op'>=</span> <span class='fl'>0.5</span>,
    fontface <span class='op'>=</span> <span class='st'>"bold"</span>,
    size <span class='op'>=</span> <span class='fl'>4</span>
  <span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_hline</span><span class='op'>(</span>yintercept <span class='op'>=</span> <span class='fl'>0</span>, size <span class='op'>=</span> <span class='fl'>0.75</span>, color <span class='op'>=</span> <span class='st'>"#737373"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_vline</span><span class='op'>(</span>xintercept <span class='op'>=</span> <span class='fl'>7.5</span>, size <span class='op'>=</span> <span class='fl'>1</span>, color <span class='op'>=</span> <span class='st'>"grey"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_vline</span><span class='op'>(</span>xintercept <span class='op'>=</span> <span class='fl'>0.5</span>, size <span class='op'>=</span> <span class='fl'>0.75</span>, color <span class='op'>=</span> <span class='st'>"#737373"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>facet_grid</span><span class='op'>(</span><span class='op'>~</span><span class='va'>conf</span>, scales <span class='op'>=</span> <span class='st'>"free_x"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>tidytext</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/tidytext/man/reorder_within.html'>scale_x_reordered</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>scale_y_continuous</span><span class='op'>(</span>breaks <span class='op'>=</span> <span class='fu'>scales</span><span class='fu'>::</span><span class='fu'><a href='https://scales.r-lib.org//reference/breaks_pretty.html'>pretty_breaks</a></span><span class='op'>(</span>n <span class='op'>=</span> <span class='fl'>10</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>scale_fill_identity</span><span class='op'>(</span>aesthetics <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"fill"</span>, <span class='st'>"color"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>theme_538</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>theme</span><span class='op'>(</span>
    panel.grid.major.x <span class='op'>=</span> <span class='fu'>element_blank</span><span class='op'>(</span><span class='op'>)</span>
  <span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>labs</span><span class='op'>(</span>
    x <span class='op'>=</span> <span class='st'>"Playoff Seed"</span>,
    y <span class='op'>=</span> <span class='st'>"Points Differential"</span>,
    title <span class='op'>=</span> <span class='st'>"Playoff teams typically have a positive point differential"</span>,
    subtitle <span class='op'>=</span> <span class='st'>"Amongst the bubble teams, Baltimore appears to be the most 'deservering' of a playoff spot"</span>,
    caption <span class='op'>=</span> <span class='st'>"Plot: @thomas_mock | Data: ESPN"</span>
  <span class='op'>)</span>
</code></pre>
</div>
<p><img src="creating-and-using-custom-ggplot2-themes_files/figure-html5/stand-direct-labels-1.png" width="5000" /></p>
</div>
</details>
<div class="layout-chunk" data-layout="l-body">
<p><img src="creating-and-using-custom-ggplot2-themes_files/figure-html5/stand-direct-labels-1.png" width="5000" /></p>
</div>
<hr />
<h1 id="blitzing">Blitzing</h1>
<p>Now for the next example of a story with various components, we can look at blitz rate vs pressure rate, or blitz rate vs pass affected rate (sacks + ints + passes defended)/pass att. This is building off an article from <a href="https://fivethirtyeight.com/features/the-indianapolis-colts-finally-built-a-defensive-monster/">FiveThirtyEight highlighting the Colts defense</a> about a month ago.</p>
<p><img src="https://fivethirtyeight.com/wp-content/uploads/2020/11/schalter-COLTS-1118-1.png?w=575" /></p>
<p>The data they used is available at <a href="https://www.pro-football-reference.com/years/2020/opp.htm">Pro-Football-Reference</a> under a few defensive categories.</p>
<h2 id="get-the-data">Get the data</h2>
<p>First we have to download the data from PFR. There are two defensive datasets well need, the Advanced Stats for pressure/blitz rates and the general Passing Stats for passes defended + intercetions.</p>
<p>Well get them via the script below, and then combine by team.</p>
<details>
<summary>
Data Collection
</summary>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>raw_url</span> <span class='op'>&lt;-</span> <span class='st'>"https://www.pro-football-reference.com/years/2020/opp.htm"</span>

<span class='va'>raw_html</span> <span class='op'>&lt;-</span> <span class='fu'>read_html</span><span class='op'>(</span><span class='va'>raw_url</span><span class='op'>)</span>

<span class='va'>raw_table</span> <span class='op'>&lt;-</span> <span class='va'>raw_html</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>html_table</span><span class='op'>(</span>fill <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='va'>.</span><span class='op'>[[</span><span class='fl'>2</span><span class='op'>]</span><span class='op'>]</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>janitor</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/janitor/man/clean_names.html'>clean_names</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>tibble</span><span class='op'>(</span><span class='op'>)</span>

<span class='va'>pressure_df</span> <span class='op'>&lt;-</span> <span class='va'>raw_table</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>select</span><span class='op'>(</span><span class='va'>tm</span>, blitz_pct <span class='op'>=</span> <span class='va'>bltz_percent</span>, press_pct <span class='op'>=</span> <span class='va'>prss_percent</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>mutate</span><span class='op'>(</span><span class='fu'>across</span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='va'>blitz_pct</span>, <span class='va'>press_pct</span><span class='op'>)</span>, <span class='va'>parse_number</span><span class='op'>)</span><span class='op'>)</span>

<span class='va'>pass_def_raw</span> <span class='op'>&lt;-</span> <span class='va'>raw_html</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>html_node</span><span class='op'>(</span><span class='st'>"#all_passing"</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>html_nodes</span><span class='op'>(</span>xpath <span class='op'>=</span> <span class='st'>"comment()"</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>html_text</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>read_html</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>html_node</span><span class='op'>(</span><span class='st'>"table"</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>html_table</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>janitor</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/janitor/man/clean_names.html'>clean_names</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>tibble</span><span class='op'>(</span><span class='op'>)</span>

<span class='va'>pass_def_df</span> <span class='op'>&lt;-</span> <span class='va'>pass_def_raw</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>select</span><span class='op'>(</span><span class='va'>tm</span>, pass_att <span class='op'>=</span> <span class='va'>att</span>, <span class='va'>int</span>, pass_def <span class='op'>=</span> <span class='va'>pd</span>, sack <span class='op'>=</span> <span class='va'>sk</span>, ypa <span class='op'>=</span> <span class='va'>y_a</span>, anypa <span class='op'>=</span> <span class='va'>any_a</span><span class='op'>)</span>
</code></pre>
</div>
</div>
</details>
<p>We can then do our left-join by <code>tm</code> to get our working dataset for this example.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>combo_pass</span> <span class='op'>&lt;-</span> <span class='fu'>left_join</span><span class='op'>(</span>
  <span class='va'>pressure_df</span>, <span class='va'>pass_def_df</span>,
  by <span class='op'>=</span> <span class='st'>"tm"</span>
<span class='op'>)</span>

<span class='va'>combo_pass</span>
</code></pre>
</div>
<pre><code># A tibble: 32 x 9
   tm    blitz_pct press_pct pass_att   int pass_def  sack   ypa anypa
   &lt;chr&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1 Atla      32.2      24.3      539     9       44    28   7.9   7.4
 2 Buff      36.6      21.4      493    12       64    34   7     6  
 3 Caro      24.7      20.5      506     5       48    24   7     6.8
 4 Chic      22.3      21.6      486     8       60    33   7.2   6.4
 5 Cinc      32.6      17.7      489    10       72    16   7.2   6.9
 6 Clev      21.4      17.9      508    10       64    35   7.3   6.5
 7 Indi      17.6      24.5      471    15       67    33   7.5   6  
 8 Ariz      39.3      25.3      510    10       49    43   6.9   5.9
 9 Dall      23.8      22.8      449     7       39    26   7.2   7.2
10 Denv      29.4      25.4      496     8       54    37   7     6  
#  with 22 more rows</code></pre>
</div>
<h2 id="initial-plot">Initial Plot</h2>
<p>Well first plot the data and try out our theme. I want to add the colors of the specific article were recreating.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>combo_pass</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>ggplot</span><span class='op'>(</span><span class='fu'>aes</span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>blitz_pct</span>, y <span class='op'>=</span> <span class='va'>press_pct</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_point</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>labs</span><span class='op'>(</span>
    x <span class='op'>=</span> <span class='st'>"Blitz Rate"</span>, y <span class='op'>=</span> <span class='st'>"Pressure Rate"</span>,
    title <span class='op'>=</span> <span class='st'>"The Colts are pressuring QBs without much of a blitz"</span>,
    subtitle <span class='op'>=</span> <span class='st'>"Blitz rate vs. pressure rate for each NFL defense, through Week 15 of the 2020 season"</span>
  <span class='op'>)</span> <span class='op'>+</span> 
  <span class='fu'>theme_538</span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="creating-and-using-custom-ggplot2-themes_files/figure-html5/unnamed-chunk-24-1.png" width="4000" /></p>
</div>
<h2 id="add-color">Add color</h2>
<p>If we add color specifically for the Colts, and then also expand the axis range to match the article, we get the following plot. Ill save the <code>mutate</code> calls into a new dataframe, and then plot it.</p>
<details>
<summary>
Add Color and Text
</summary>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>colt_df</span> <span class='op'>&lt;-</span> <span class='va'>combo_pass</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>mutate</span><span class='op'>(</span>
    color <span class='op'>=</span> <span class='fu'>if_else</span><span class='op'>(</span><span class='va'>tm</span> <span class='op'>==</span> <span class='st'>"Indianapolis Colts"</span>, <span class='st'>"#359fda"</span>, <span class='st'>"#91c390"</span><span class='op'>)</span>,
    fill <span class='op'>=</span> <span class='fu'>colorspace</span><span class='fu'>::</span><span class='fu'><a href='http://colorspace.R-Forge.R-project.org//reference/lighten.html'>lighten</a></span><span class='op'>(</span><span class='va'>color</span>, amount <span class='op'>=</span> <span class='fl'>0.3</span><span class='op'>)</span>
    <span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>rowwise</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>mutate</span><span class='op'>(</span>
    att_def <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span><span class='op'>(</span><span class='va'>int</span>, <span class='va'>pass_def</span>, <span class='va'>sack</span><span class='op'>)</span>,
    cov_rate <span class='op'>=</span> <span class='va'>att_def</span><span class='op'>/</span><span class='va'>pass_att</span><span class='op'>*</span><span class='fl'>100</span>
    <span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>ungroup</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>arrange</span><span class='op'>(</span><span class='fu'>desc</span><span class='op'>(</span><span class='va'>cov_rate</span><span class='op'>)</span><span class='op'>)</span>

<span class='va'>colt_df</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>ggplot</span><span class='op'>(</span><span class='fu'>aes</span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>blitz_pct</span>, y <span class='op'>=</span> <span class='va'>press_pct</span>, fill <span class='op'>=</span> <span class='va'>fill</span>, color <span class='op'>=</span> <span class='va'>color</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_point</span><span class='op'>(</span>size <span class='op'>=</span> <span class='fl'>5</span>, pch <span class='op'>=</span> <span class='fl'>21</span>, alpha <span class='op'>=</span> <span class='fl'>0.8</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>scale_color_identity</span><span class='op'>(</span>aesthetics <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"fill"</span>, <span class='st'>"color"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>labs</span><span class='op'>(</span>
    x <span class='op'>=</span> <span class='st'>"Blitz Rate"</span>, y <span class='op'>=</span> <span class='st'>"Pressure Rate"</span>,
    title <span class='op'>=</span> <span class='st'>"The Colts are pressuring QBs without much of a blitz"</span>,
    subtitle <span class='op'>=</span> <span class='st'>"Blitz rate vs. pressure rate for each NFL defense,\nthrough Week 15 of the 2020 season"</span>,
    caption <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/chartr.html'>toupper</a></span><span class='op'>(</span><span class='st'>"Plot: @thomas_mock | Data: PFR | Inspiration: FiveThirtyEight"</span><span class='op'>)</span>
  <span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>scale_x_continuous</span><span class='op'>(</span>limits <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>10</span>, <span class='fl'>45</span><span class='op'>)</span>, breaks <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/seq.html'>seq</a></span><span class='op'>(</span><span class='fl'>10</span>, <span class='fl'>45</span>, by <span class='op'>=</span> <span class='fl'>5</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>scale_y_continuous</span><span class='op'>(</span>limits <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>10</span>, <span class='fl'>35</span><span class='op'>)</span>, breaks <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/seq.html'>seq</a></span><span class='op'>(</span><span class='fl'>10</span>, <span class='fl'>35</span>, by <span class='op'>=</span> <span class='fl'>5</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>theme_538</span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="creating-and-using-custom-ggplot2-themes_files/figure-html5/colt-blitz-1.png" width="4000" /></p>
</div>
</details>
<div class="layout-chunk" data-layout="l-body">
<p><img src="creating-and-using-custom-ggplot2-themes_files/figure-html5/colt-blitz-1.png" width="4000" /></p>
</div>
<h2 id="add-labels">Add labels</h2>
<p>We can create a small helper dataset to plot the labels, and weve basically re-created the original plot!</p>
<details>
<summary>
Add Labels
</summary>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>label_df_press</span> <span class='op'>&lt;-</span> <span class='fu'>tibble</span><span class='op'>(</span>
  label <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Colts"</span>, <span class='st'>"Everyone else"</span><span class='op'>)</span>,
  color <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"#359fda"</span>, <span class='st'>"#91c390"</span><span class='op'>)</span>,
  fill <span class='op'>=</span> <span class='fu'>colorspace</span><span class='fu'>::</span><span class='fu'><a href='http://colorspace.R-Forge.R-project.org//reference/lighten.html'>lighten</a></span><span class='op'>(</span><span class='va'>color</span>, amount <span class='op'>=</span> <span class='fl'>0.3</span><span class='op'>)</span>,
  x <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>16</span>, <span class='fl'>30</span><span class='op'>)</span>,
  y <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>25</span>, <span class='fl'>29</span><span class='op'>)</span>
<span class='op'>)</span>

<span class='va'>colt_df</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>ggplot</span><span class='op'>(</span><span class='fu'>aes</span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>blitz_pct</span>, y <span class='op'>=</span> <span class='va'>press_pct</span>, fill <span class='op'>=</span> <span class='va'>fill</span>, color <span class='op'>=</span> <span class='va'>color</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_point</span><span class='op'>(</span>size <span class='op'>=</span> <span class='fl'>5</span>, pch <span class='op'>=</span> <span class='fl'>21</span>, alpha <span class='op'>=</span> <span class='fl'>0.8</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>scale_color_identity</span><span class='op'>(</span>aesthetics <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"fill"</span>, <span class='st'>"color"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>labs</span><span class='op'>(</span>
    x <span class='op'>=</span> <span class='st'>"Blitz Rate"</span>, y <span class='op'>=</span> <span class='st'>"Pressure Rate"</span>,
    title <span class='op'>=</span> <span class='st'>"The Colts are pressuring QBs without much of a blitz"</span>,
    subtitle <span class='op'>=</span> <span class='st'>"Blitz rate vs. pressure rate for each NFL defense,\nthrough Week 15 of the 2020 season"</span>,
    caption <span class='op'>=</span> <span class='st'>"Source: Pro-Football-Reference.com"</span>
  <span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>scale_x_continuous</span><span class='op'>(</span>limits <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>10</span>, <span class='fl'>45</span><span class='op'>)</span>, breaks <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/seq.html'>seq</a></span><span class='op'>(</span><span class='fl'>10</span>, <span class='fl'>45</span>, by <span class='op'>=</span> <span class='fl'>5</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>scale_y_continuous</span><span class='op'>(</span>limits <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>10</span>, <span class='fl'>35</span><span class='op'>)</span>, breaks <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/seq.html'>seq</a></span><span class='op'>(</span><span class='fl'>10</span>, <span class='fl'>35</span>, by <span class='op'>=</span> <span class='fl'>5</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_label</span><span class='op'>(</span>
    data <span class='op'>=</span> <span class='va'>label_df_press</span>,
    <span class='fu'>aes</span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>x</span>, y <span class='op'>=</span> <span class='va'>y</span>, color <span class='op'>=</span> <span class='va'>color</span>, label <span class='op'>=</span> <span class='va'>label</span><span class='op'>)</span>,
    fill <span class='op'>=</span> <span class='st'>"#f0f0f0"</span>,
    size <span class='op'>=</span> <span class='fl'>6</span>,
    fontface <span class='op'>=</span> <span class='st'>"bold"</span>,
    hjust <span class='op'>=</span> <span class='fl'>0.8</span>,
    label.size <span class='op'>=</span> <span class='cn'>NA</span> <span class='co'># remove the border</span>
  <span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>theme_538</span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="creating-and-using-custom-ggplot2-themes_files/figure-html5/colt-blitz-label-1.png" width="4000" /></p>
</div>
</details>
<div class="layout-chunk" data-layout="l-body">
<p><img src="creating-and-using-custom-ggplot2-themes_files/figure-html5/colt-blitz-label-1.png" width="4000" /></p>
</div>
<h1 id="pass-affected-rate">Pass Affected Rate</h1>
<p>The Colts are also getting good pass affected rate, which Ive extended to be (interceptions + sacks + passes defended)/pass att. This is a proxy for the number of plays where the defense either stops the pass or is directly defending the reception.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>label_df_cov</span> <span class='op'>&lt;-</span> <span class='fu'>tibble</span><span class='op'>(</span>
  label <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Colts"</span>, <span class='st'>"Everyone else"</span><span class='op'>)</span>,
  color <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"#359fda"</span>, <span class='st'>"#91c390"</span><span class='op'>)</span>,
  fill <span class='op'>=</span> <span class='fu'>colorspace</span><span class='fu'>::</span><span class='fu'><a href='http://colorspace.R-Forge.R-project.org//reference/lighten.html'>lighten</a></span><span class='op'>(</span><span class='va'>color</span>, amount <span class='op'>=</span> <span class='fl'>0.3</span><span class='op'>)</span>,
  x <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>16</span>, <span class='fl'>33</span><span class='op'>)</span>,
  y <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>25</span>, <span class='fl'>28</span><span class='op'>)</span>
<span class='op'>)</span>
</code></pre>
</div>
</div>
<p>We can then use that to create a very similar plot as what we saw before. Note Im adding an annotation outside the plot area by turning <code>clip = 'off'</code> in <code>coord_cartesian()</code>. Otherwise this plot is very close code-wise to the previous one.</p>
<details>
<summary>
Add Annotations
</summary>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>colt_df</span> <span class='op'>%&gt;%</span>
  <span class='fu'>ggplot</span><span class='op'>(</span><span class='fu'>aes</span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>blitz_pct</span>, y <span class='op'>=</span> <span class='va'>cov_rate</span>, color <span class='op'>=</span> <span class='va'>color</span>, fill <span class='op'>=</span> <span class='va'>fill</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_point</span><span class='op'>(</span>size <span class='op'>=</span> <span class='fl'>5</span>, pch <span class='op'>=</span> <span class='fl'>21</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>scale_color_identity</span><span class='op'>(</span>aesthetics <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"fill"</span>, <span class='st'>"color"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>labs</span><span class='op'>(</span>
    x <span class='op'>=</span> <span class='st'>"Blitz Rate"</span>,
    y <span class='op'>=</span> <span class='st'>"Pass Affected Rate"</span>,
    title <span class='op'>=</span> <span class='st'>"The Colts affect passes at an elite rate while blitzing the least"</span>,
    subtitle <span class='op'>=</span> <span class='st'>"Blitz rate vs. Pass affected rate for each NFL defense,\nthrough Week 15 of the 2020 season"</span>,
    caption <span class='op'>=</span> <span class='st'>"Plot: @thomas_mock | Source: PFR"</span>
  <span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>scale_x_continuous</span><span class='op'>(</span>limits <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>10</span>, <span class='fl'>45</span><span class='op'>)</span>, breaks <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/seq.html'>seq</a></span><span class='op'>(</span><span class='fl'>10</span>, <span class='fl'>45</span>, by <span class='op'>=</span> <span class='fl'>5</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>scale_y_continuous</span><span class='op'>(</span>limits <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>10</span>, <span class='fl'>35</span><span class='op'>)</span>, breaks <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/seq.html'>seq</a></span><span class='op'>(</span><span class='fl'>10</span>, <span class='fl'>35</span>, by <span class='op'>=</span> <span class='fl'>5</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>coord_cartesian</span><span class='op'>(</span>clip <span class='op'>=</span> <span class='st'>"off"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>annotate</span><span class='op'>(</span><span class='st'>"text"</span>, x <span class='op'>=</span> <span class='fl'>10</span>, y <span class='op'>=</span> <span class='fl'>10</span>, label <span class='op'>=</span> <span class='st'>"Pass affected rate = (ints + sacks + passes defended)/pass attempts"</span>, vjust <span class='op'>=</span> <span class='fl'>10</span>, hjust <span class='op'>=</span> <span class='fl'>0.2</span>, color <span class='op'>=</span> <span class='st'>"darkgrey"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>theme_538</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_label</span><span class='op'>(</span>
    data <span class='op'>=</span> <span class='va'>label_df_cov</span>,
    <span class='fu'>aes</span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>x</span>, y <span class='op'>=</span> <span class='va'>y</span>, color <span class='op'>=</span> <span class='va'>color</span>, label <span class='op'>=</span> <span class='va'>label</span><span class='op'>)</span>,
    fill <span class='op'>=</span> <span class='st'>"#f0f0f0"</span>,
    size <span class='op'>=</span> <span class='fl'>6</span>,
    fontface <span class='op'>=</span> <span class='st'>"bold"</span>,
    hjust <span class='op'>=</span> <span class='fl'>0.8</span>,
    label.size <span class='op'>=</span> <span class='cn'>NA</span>
  <span class='op'>)</span>
</code></pre>
</div>
<p><img src="creating-and-using-custom-ggplot2-themes_files/figure-html5/colt-annotate-1.png" width="4500" /></p>
</div>
</details>
<div class="layout-chunk" data-layout="l-body">
<p><img src="creating-and-using-custom-ggplot2-themes_files/figure-html5/colt-annotate-1.png" width="4500" /></p>
</div>
<h2 id="slope-chart">Slope Chart</h2>
<p>By pivoting the data longer, and converting the blitz/pass affected rate columns into a combined column we can pretty quickly get a decent slope-chat put together. In short, we are creating a new metric and corresponding value column out of the blitz/pass affected rates.</p>
<p>This can then be plotted where the metric name is on the x-axis and the metric value is the y-axis. Because both metrics are percentages theyre in the same plotting range.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>long_colts</span> <span class='op'>&lt;-</span> <span class='va'>colt_df</span> <span class='op'>%&gt;%</span>
  <span class='fu'>mutate</span><span class='op'>(</span>
    color <span class='op'>=</span> <span class='fu'>if_else</span><span class='op'>(</span><span class='va'>color</span> <span class='op'>==</span> <span class='st'>"#91c390"</span>, <span class='st'>"grey"</span>, <span class='st'>"#359fda"</span><span class='op'>)</span>,
    fill <span class='op'>=</span> <span class='va'>color</span>
  <span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>rename</span><span class='op'>(</span>pass_affected_rate <span class='op'>=</span> <span class='va'>cov_rate</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>pivot_longer</span><span class='op'>(</span>
    cols <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='va'>blitz_pct</span>, <span class='va'>pass_affected_rate</span><span class='op'>)</span>, 
    names_to <span class='op'>=</span> <span class='st'>"metric"</span>, values_to <span class='op'>=</span> <span class='st'>"value"</span>
    <span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>mutate</span><span class='op'>(</span>
    metric <span class='op'>=</span> <span class='fu'>if_else</span><span class='op'>(</span>
      <span class='va'>metric</span> <span class='op'>==</span> <span class='st'>"blitz_pct"</span>, 
      <span class='st'>"Blitz Rate"</span>, 
      <span class='st'>"Pass Affected Rate"</span>
      <span class='op'>)</span>
  <span class='op'>)</span>

<span class='va'>long_colts</span>
</code></pre>
</div>
<pre><code># A tibble: 64 x 13
   tm    press_pct pass_att   int pass_def  sack   ypa anypa color
   &lt;chr&gt;     &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;
 1 Pitt      33.3      465    17       76    47   6.5   4.6 grey 
 2 Pitt      33.3      465    17       76    47   6.5   4.6 grey 
 3 Miam      23.5      473    16       69    37   7.7   5.8 grey 
 4 Miam      23.5      473    16       69    37   7.7   5.8 grey 
 5 New       24.7      520    13       74    42   6.7   5.7 grey 
 6 New       24.7      520    13       74    42   6.7   5.7 grey 
 7 Indi      24.5      471    15       67    33   7.5   6   #359
 8 Indi      24.5      471    15       67    33   7.5   6   #359
 9 Los       22.1      489    13       59    44   6.1   4.5 grey 
10 Los       22.1      489    13       59    44   6.1   4.5 grey 
#  with 54 more rows, and 4 more variables: fill &lt;chr&gt;,
#   att_def &lt;dbl&gt;, metric &lt;chr&gt;, value &lt;dbl&gt;</code></pre>
</div>
<h3 id="initial-slope-chart">Initial Slope Chart</h3>
<p>The initial slope chart is only a few lines of code. Well plot metric names on the x-axis, metric values on the y-axis, add lines by team between the compared measures, and then layer points on top of it all.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>long_colts</span> <span class='op'>%&gt;%</span>
  <span class='fu'>ggplot</span><span class='op'>(</span><span class='fu'>aes</span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>metric</span>, y <span class='op'>=</span> <span class='va'>value</span>, group <span class='op'>=</span> <span class='va'>tm</span>, color <span class='op'>=</span> <span class='va'>color</span>, fill <span class='op'>=</span> <span class='va'>fill</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_line</span><span class='op'>(</span><span class='fu'>aes</span><span class='op'>(</span>size <span class='op'>=</span> <span class='fu'>if_else</span><span class='op'>(</span><span class='va'>tm</span> <span class='op'>==</span> <span class='st'>"Indianapolis Colts"</span>, <span class='fl'>2</span>, <span class='fl'>0.5</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_point</span><span class='op'>(</span>size <span class='op'>=</span> <span class='fl'>5</span>, pch <span class='op'>=</span> <span class='fl'>21</span>, color <span class='op'>=</span> <span class='st'>"#f0f0f0"</span>, stroke <span class='op'>=</span> <span class='fl'>1</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>scale_color_identity</span><span class='op'>(</span>aesthetics <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"fill"</span>, <span class='st'>"color"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>scale_size_identity</span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="creating-and-using-custom-ggplot2-themes_files/figure-html5/unnamed-chunk-27-1.png" width="600" /></p>
</div>
<h3 id="add-theme-and-context">Add theme and context</h3>
<p>We can further enhance the plot with the title/source data. Ive also shared a little hack that allows you to plot outside of the plot area. By setting <code>clip = 'off'</code> in <code>coord_cartestian()</code>, we can add an annotation that falls outside of the plot area. This lets us add a description note similar to what FiveThirtyEight does with some of their plots.</p>
<details>
<summary>
Add Theme and Context
</summary>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>colt_slope</span> <span class='op'>&lt;-</span> <span class='va'>long_colts</span> <span class='op'>%&gt;%</span>
  <span class='fu'>ggplot</span><span class='op'>(</span><span class='fu'>aes</span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>metric</span>, y <span class='op'>=</span> <span class='va'>value</span>, group <span class='op'>=</span> <span class='va'>tm</span>, color <span class='op'>=</span> <span class='va'>color</span>, fill <span class='op'>=</span> <span class='va'>fill</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_line</span><span class='op'>(</span><span class='fu'>aes</span><span class='op'>(</span>size <span class='op'>=</span> <span class='fu'>if_else</span><span class='op'>(</span><span class='va'>tm</span> <span class='op'>==</span> <span class='st'>"Indianapolis Colts"</span>, <span class='fl'>2</span>, <span class='fl'>0.5</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_point</span><span class='op'>(</span>size <span class='op'>=</span> <span class='fl'>5</span>, pch <span class='op'>=</span> <span class='fl'>21</span>, color <span class='op'>=</span> <span class='st'>"#f0f0f0"</span>, stroke <span class='op'>=</span> <span class='fl'>1</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_label</span><span class='op'>(</span>
    data <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/stats/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>long_colts</span>, <span class='va'>tm</span> <span class='op'>==</span> <span class='st'>"Indianapolis Colts"</span><span class='op'>)</span>,
    <span class='fu'>aes</span><span class='op'>(</span>label <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste0</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/Round.html'>round</a></span><span class='op'>(</span><span class='va'>value</span>, <span class='fl'>0</span><span class='op'>)</span>, <span class='st'>"%"</span><span class='op'>)</span><span class='op'>)</span>,
    fill <span class='op'>=</span> <span class='cn'>NA</span>,
    hjust <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>, <span class='fl'>0</span><span class='op'>)</span>,
    nudge_x <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='op'>-</span><span class='fl'>0.02</span>, <span class='fl'>0.02</span><span class='op'>)</span>,
    label.size <span class='op'>=</span> <span class='cn'>NA</span>,
    family <span class='op'>=</span> <span class='st'>"Chivo"</span>,
    fontface <span class='op'>=</span> <span class='st'>"bold"</span>,
    size <span class='op'>=</span> <span class='fl'>6</span>
  <span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>annotate</span><span class='op'>(</span>
    <span class='st'>"text"</span>, x <span class='op'>=</span> <span class='fl'>1</span>, y <span class='op'>=</span> <span class='fl'>12</span>, vjust <span class='op'>=</span> <span class='fl'>11</span>, hjust <span class='op'>=</span> <span class='fl'>0.4</span>, color <span class='op'>=</span> <span class='st'>"darkgrey"</span>,
    family <span class='op'>=</span> <span class='st'>"Chivo"</span>,
    label <span class='op'>=</span> <span class='st'>"Pass affected rate = (sacks + ints + passes defended)/pass att"</span>
    <span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>coord_cartesian</span><span class='op'>(</span>clip <span class='op'>=</span> <span class='st'>"off"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>scale_y_continuous</span><span class='op'>(</span>limits <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>12</span>, <span class='fl'>43</span><span class='op'>)</span>, breaks <span class='op'>=</span> <span class='fu'>scales</span><span class='fu'>::</span><span class='fu'><a href='https://scales.r-lib.org//reference/breaks_pretty.html'>pretty_breaks</a></span><span class='op'>(</span>n <span class='op'>=</span> <span class='fl'>7</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>scale_x_discrete</span><span class='op'>(</span>expand <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0.2</span>, <span class='fl'>0.2</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>scale_color_identity</span><span class='op'>(</span>aesthetics <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"fill"</span>, <span class='st'>"color"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>scale_size_identity</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>theme_538</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>theme</span><span class='op'>(</span>
    panel.grid.major.y <span class='op'>=</span> <span class='fu'>element_blank</span><span class='op'>(</span><span class='op'>)</span>,
    axis.text.y <span class='op'>=</span> <span class='fu'>element_blank</span><span class='op'>(</span><span class='op'>)</span>,
    plot.margin <span class='op'>=</span> <span class='fu'>margin</span><span class='op'>(</span><span class='fl'>0.5</span>, <span class='fl'>0.5</span>, <span class='fl'>0.1</span>, <span class='fl'>0.5</span>, unit <span class='op'>=</span> <span class='st'>"cm"</span><span class='op'>)</span>,
    axis.text.x <span class='op'>=</span> <span class='fu'>element_text</span><span class='op'>(</span>color <span class='op'>=</span> <span class='st'>"black"</span>, size <span class='op'>=</span> <span class='fl'>20</span><span class='op'>)</span>,
    plot.caption <span class='op'>=</span> <span class='fu'><a href='https://wilkelab.org/ggtext/reference/element_markdown.html'>element_markdown</a></span><span class='op'>(</span>size <span class='op'>=</span> <span class='fl'>14</span><span class='op'>)</span>
  <span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>labs</span><span class='op'>(</span>
    x <span class='op'>=</span> <span class='st'>""</span>,
    y <span class='op'>=</span> <span class='st'>""</span>,
    title <span class='op'>=</span> <span class='st'>"The Colts affect more passes with fewer rushers"</span>,
    subtitle <span class='op'>=</span> <span class='st'>"Data since through Week 15 of the 2020 NFL season"</span>,
    caption <span class='op'>=</span> <span class='st'>"**Plot**: @thomas_mock | **Data**: PFR"</span>
  <span class='op'>)</span>

<span class='fu'>ggsave</span><span class='op'>(</span><span class='st'>"colt_slope.png"</span>, <span class='va'>colt_slope</span>, height <span class='op'>=</span> <span class='fl'>5</span>, width <span class='op'>=</span> <span class='fl'>4</span>, dpi <span class='op'>=</span> <span class='fl'>500</span>, scale <span class='op'>=</span> <span class='fl'>1.75</span><span class='op'>)</span>
</code></pre>
</div>
</div>
</details>
<p><img src="colt_slope.png" /></p>
<h2 id="barbell">Barbell</h2>
<p>For our last example with this data, were going to really highlight the Colts passing defense effectiveness without a blitz. A barbell plot is another combo of lines + points, where the line is a segment between the two measures of interest.</p>
<p>Our first attempt is pretty straightforward, well plot the segment between the points, then layer two <code>geom_points()</code>, one for each measure.</p>
<details>
<summary>
Initial Barbell
</summary>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>barbell_first</span> <span class='op'>&lt;-</span> <span class='va'>colt_df</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>rename</span><span class='op'>(</span>pass_affected_rate <span class='op'>=</span> <span class='va'>cov_rate</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>mutate</span><span class='op'>(</span>
    color <span class='op'>=</span> <span class='fu'>str_replace</span><span class='op'>(</span><span class='va'>color</span>, <span class='st'>"#91c390"</span>, <span class='st'>"grey"</span><span class='op'>)</span>,
    fill <span class='op'>=</span> <span class='fu'>str_replace</span><span class='op'>(</span><span class='va'>fill</span>, <span class='st'>"#91c390"</span>, <span class='st'>"grey"</span><span class='op'>)</span>,
    tm <span class='op'>=</span> <span class='fu'>word</span><span class='op'>(</span><span class='va'>tm</span>, <span class='op'>-</span><span class='fl'>1</span><span class='op'>)</span>
    <span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>ggplot</span><span class='op'>(</span><span class='fu'>aes</span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>blitz_pct</span>, y <span class='op'>=</span> <span class='fu'>fct_reorder</span><span class='op'>(</span><span class='va'>tm</span>, <span class='va'>pass_affected_rate</span><span class='op'>)</span>, 
             group <span class='op'>=</span> <span class='va'>tm</span>, color <span class='op'>=</span> <span class='va'>color</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_segment</span><span class='op'>(</span><span class='fu'>aes</span><span class='op'>(</span>xend <span class='op'>=</span> <span class='va'>pass_affected_rate</span>, yend <span class='op'>=</span> <span class='va'>tm</span><span class='op'>)</span>, size <span class='op'>=</span> <span class='fl'>2</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_point</span><span class='op'>(</span>size <span class='op'>=</span> <span class='fl'>5</span>, color <span class='op'>=</span> <span class='st'>"grey"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_point</span><span class='op'>(</span><span class='fu'>aes</span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>pass_affected_rate</span>, y <span class='op'>=</span> <span class='va'>tm</span><span class='op'>)</span>, size <span class='op'>=</span> <span class='fl'>5</span>, color <span class='op'>=</span> <span class='st'>"black"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>scale_color_identity</span><span class='op'>(</span><span class='op'>)</span>

<span class='fu'>ggsave</span><span class='op'>(</span><span class='st'>"barbell_first.png"</span>, <span class='va'>barbell_first</span>, height <span class='op'>=</span> <span class='fl'>12</span>, width <span class='op'>=</span> <span class='fl'>8</span>, units <span class='op'>=</span> <span class='st'>"in"</span>, dpi <span class='op'>=</span> <span class='fl'>300</span><span class='op'>)</span>
</code></pre>
</div>
</div>
</details>
<p><img src="barbell_first.png" /></p>
<h3 id="theme-and-context">Theme and context</h3>
<p>We can add some more labels and context, along with our theme and a custom color placement to indicate the Colts as the outlier of interest.</p>
<details>
<summary>
Barbell Theme
</summary>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>colt_colors</span> <span class='op'>&lt;-</span> <span class='va'>colt_df</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>arrange</span><span class='op'>(</span><span class='va'>cov_rate</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>mutate</span><span class='op'>(</span>color <span class='op'>=</span> <span class='fu'>str_replace</span><span class='op'>(</span><span class='va'>color</span>, <span class='st'>"#91c390"</span>, <span class='st'>"black"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>pull</span><span class='op'>(</span><span class='va'>color</span><span class='op'>)</span>

<span class='va'>pass_label_df</span> <span class='op'>&lt;-</span> <span class='fu'>tibble</span><span class='op'>(</span>
  x <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>20</span>, <span class='fl'>19.5</span><span class='op'>)</span>,
  tm <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>30</span>, <span class='fl'>25</span><span class='op'>)</span>,
  label <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Blitz Rate"</span>, <span class='st'>"Pass Affected&lt;br&gt;Rate"</span><span class='op'>)</span>,
  color <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"grey"</span>, <span class='st'>"black"</span><span class='op'>)</span>
<span class='op'>)</span>

<span class='va'>ex_barbell</span> <span class='op'>&lt;-</span> <span class='va'>colt_df</span> <span class='op'>%&gt;%</span>
  <span class='fu'>rename</span><span class='op'>(</span>pass_affected_rate <span class='op'>=</span> <span class='va'>cov_rate</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>mutate</span><span class='op'>(</span>
    color <span class='op'>=</span> <span class='fu'>str_replace</span><span class='op'>(</span><span class='va'>color</span>, <span class='st'>"#91c390"</span>, <span class='st'>"grey"</span><span class='op'>)</span>,
    fill <span class='op'>=</span> <span class='fu'>str_replace</span><span class='op'>(</span><span class='va'>fill</span>, <span class='st'>"#91c390"</span>, <span class='st'>"grey"</span><span class='op'>)</span>,
    tm <span class='op'>=</span> <span class='fu'>word</span><span class='op'>(</span><span class='va'>tm</span>, <span class='op'>-</span><span class='fl'>1</span><span class='op'>)</span>
  <span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>ggplot</span><span class='op'>(</span><span class='fu'>aes</span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>blitz_pct</span>, y <span class='op'>=</span> <span class='fu'>fct_reorder</span><span class='op'>(</span><span class='va'>tm</span>, <span class='va'>pass_affected_rate</span><span class='op'>)</span>, 
             group <span class='op'>=</span> <span class='va'>tm</span>, color <span class='op'>=</span> <span class='va'>color</span>, fill <span class='op'>=</span> <span class='va'>fill</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_segment</span><span class='op'>(</span><span class='fu'>aes</span><span class='op'>(</span>xend <span class='op'>=</span> <span class='va'>pass_affected_rate</span>, yend <span class='op'>=</span> <span class='va'>tm</span><span class='op'>)</span>, size <span class='op'>=</span> <span class='fl'>2</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_point</span><span class='op'>(</span>size <span class='op'>=</span> <span class='fl'>5</span>, color <span class='op'>=</span> <span class='st'>"grey"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_point</span><span class='op'>(</span><span class='fu'>aes</span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>pass_affected_rate</span>, y <span class='op'>=</span> <span class='va'>tm</span><span class='op'>)</span>, size <span class='op'>=</span> <span class='fl'>5</span>, color <span class='op'>=</span> <span class='st'>"black"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>ggtext</span><span class='fu'>::</span><span class='fu'><a href='https://wilkelab.org/ggtext/reference/geom_richtext.html'>geom_richtext</a></span><span class='op'>(</span>
    data <span class='op'>=</span> <span class='va'>pass_label_df</span>,
    <span class='fu'>aes</span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>x</span>, y <span class='op'>=</span> <span class='va'>tm</span>, label <span class='op'>=</span> <span class='va'>label</span>, color <span class='op'>=</span> <span class='va'>color</span><span class='op'>)</span>,
    fill <span class='op'>=</span> <span class='st'>"#f0f0f0"</span>,
    label.color <span class='op'>=</span> <span class='cn'>NA</span>,
    <span class='co'># remove background and outline</span>
    label.padding <span class='op'>=</span> <span class='fu'>grid</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/r/grid/unit.html'>unit</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span><span class='op'>(</span><span class='fl'>0</span>, <span class='fl'>4</span><span class='op'>)</span>, <span class='st'>"pt"</span><span class='op'>)</span>,
    <span class='co'># remove padding</span>
    family <span class='op'>=</span> <span class='st'>"Chivo"</span>,
    hjust <span class='op'>=</span> <span class='fl'>1</span>,
    fontface <span class='op'>=</span> <span class='st'>"bold"</span>,
    size <span class='op'>=</span> <span class='fl'>5</span>
  <span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>annotate</span><span class='op'>(</span>
    <span class='st'>"text"</span>,
    x <span class='op'>=</span> <span class='fl'>10</span>,
    y <span class='op'>=</span> <span class='fl'>1</span>,
    vjust <span class='op'>=</span> <span class='fl'>10</span>,
    hjust <span class='op'>=</span> <span class='fl'>0.4</span>,
    color <span class='op'>=</span> <span class='st'>"darkgrey"</span>,
    family <span class='op'>=</span> <span class='st'>"Chivo"</span>,
    label <span class='op'>=</span> <span class='st'>"Pass affected rate = (sacks + ints + passes defended)/pass att"</span>
  <span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>scale_x_continuous</span><span class='op'>(</span>limits <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>10</span>, <span class='fl'>45</span><span class='op'>)</span>, breaks <span class='op'>=</span> <span class='fu'>scales</span><span class='fu'>::</span><span class='fu'><a href='https://scales.r-lib.org//reference/breaks_pretty.html'>pretty_breaks</a></span><span class='op'>(</span>n <span class='op'>=</span> <span class='fl'>7</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>scale_color_identity</span><span class='op'>(</span>aesthetics <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"fill"</span>, <span class='st'>"color"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>coord_cartesian</span><span class='op'>(</span>clip <span class='op'>=</span> <span class='st'>"off"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>labs</span><span class='op'>(</span>
    x <span class='op'>=</span> <span class='st'>"&lt;span style = 'color:grey;'&gt;Blitz rate&lt;/span&gt; vs Pass affected rate"</span>,
    y <span class='op'>=</span> <span class='st'>""</span>,
    title <span class='op'>=</span> <span class='st'>"The Colts affect more passes with fewer rushers"</span>,
    subtitle <span class='op'>=</span> <span class='st'>"Data through Week 15 of the 2020 NFL season"</span>,
    caption <span class='op'>=</span> <span class='st'>"**Plot**: @thomas_mock | **Data**: PFR"</span>
  <span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>theme_538</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>theme</span><span class='op'>(</span>
    panel.grid.major.y <span class='op'>=</span> <span class='fu'>element_blank</span><span class='op'>(</span><span class='op'>)</span>,
    axis.text.y <span class='op'>=</span> <span class='fu'>element_text</span><span class='op'>(</span>color <span class='op'>=</span> <span class='va'>colt_colors</span>, size <span class='op'>=</span> <span class='fl'>18</span><span class='op'>)</span>,
    axis.title.x <span class='op'>=</span> <span class='fu'><a href='https://wilkelab.org/ggtext/reference/element_markdown.html'>element_markdown</a></span><span class='op'>(</span><span class='op'>)</span>,
    plot.caption <span class='op'>=</span> <span class='fu'><a href='https://wilkelab.org/ggtext/reference/element_markdown.html'>element_markdown</a></span><span class='op'>(</span><span class='op'>)</span>
  <span class='op'>)</span>

<span class='fu'>ggsave</span><span class='op'>(</span><span class='st'>"barbell.png"</span>, <span class='va'>ex_barbell</span>, height <span class='op'>=</span> <span class='fl'>12</span>, width <span class='op'>=</span> <span class='fl'>8</span>, units <span class='op'>=</span> <span class='st'>"in"</span>, dpi <span class='op'>=</span> <span class='fl'>300</span><span class='op'>)</span>
</code></pre>
</div>
</div>
</details>
<p><img src="barbell.png" /></p>
<hr />
<h1 id="the-end">The end</h1>
<p>Weve now covered quite a bit about themes and customization of <code>ggplot2</code> beyond the basics! You can dive back into other themes from <code>ggthemes</code> to recreate them/build off of them or develop your own novel theme to use.</p>
<p>If my blog has helped you, you can <a href="https://www.buymeacoffee.com/thomasmock">buy me a coffee</a>!</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r distill-force-highlighting-css"><code class="sourceCode r"></code></pre></div>
<!--radix_placeholder_article_footer-->
<div class="article-footer">
  <p class="social_footer">
    <span class="article-sharing">
      Share: &nbsp;
      <a href="https://twitter.com/share?text=Creating%20and%20using%20custom%20ggplot2%20themes&amp;url=https%3A%2F%2Fthemockup.blog%2Fposts%2F2020-12-26-creating-and-using-custom-ggplot2-themes%2F">
        <i class="fab fa-twitter"></i>
      </a>
      <a href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3A%2F%2Fthemockup.blog%2Fposts%2F2020-12-26-creating-and-using-custom-ggplot2-themes%2F&amp;title=Creating%20and%20using%20custom%20ggplot2%20themes">
        <i class="fab fa-linkedin"></i>
      </a>
    </span>
  </p>
</div>
<!--/radix_placeholder_article_footer-->
</div>

<div class="d-appendix">
</div>


<!--radix_placeholder_site_after_body-->
<!--/radix_placeholder_site_after_body-->
<!--radix_placeholder_appendices-->
<div class="appendix-bottom">
  <h3 id="citation">Citation</h3>
  <p>For attribution, please cite this work as</p>
  <pre class="citation-appendix short">Mock (2020, Dec. 26). The Mockup Blog: Creating and using custom ggplot2 themes. Retrieved from https://themockup.blog/posts/2020-12-26-creating-and-using-custom-ggplot2-themes/</pre>
  <p>BibTeX citation</p>
  <pre class="citation-appendix long">@misc{mock2020creating,
  author = {Mock, Thomas},
  title = {The Mockup Blog: Creating and using custom ggplot2 themes},
  url = {https://themockup.blog/posts/2020-12-26-creating-and-using-custom-ggplot2-themes/},
  year = {2020}
}</pre>
</div>
<!--/radix_placeholder_appendices-->
<!--radix_placeholder_navigation_after_body-->
<!--/radix_placeholder_navigation_after_body-->

</body>

</html>
