<?xml version="1.0" encoding="UTF-8"?>
<rss  xmlns:atom="http://www.w3.org/2005/Atom" 
      xmlns:media="http://search.yahoo.com/mrss/" 
      xmlns:content="http://purl.org/rss/1.0/modules/content/" 
      xmlns:dc="http://purl.org/dc/elements/1.1/" 
      version="2.0">
<channel>
<title>The MockUp</title>
<link>https://themockup.blog/til.html</link>
<atom:link href="https://themockup.blog/til.xml" rel="self" type="application/rss+xml"/>
<description>Data science tips brought to you by Tom Mock</description>
<image>
<url>https://themockup.blog/themockup.png</url>
<title>The MockUp</title>
<link>https://themockup.blog/til.html</link>
</image>
<generator>quarto-1.2.269</generator>
<lastBuildDate>Sun, 27 Nov 2022 06:00:00 GMT</lastBuildDate>
<item>
  <title>data.table::rleid() is pretty cool!</title>
  <link>https://themockup.blog/til/rleid.html</link>
  <description><![CDATA[ <p>Longer example on <a href="https://gist.github.com/jthomasmock/f4264a372904a9a8b528a61adce51509">QB Starts</a></p>
<section id="create-a-dataframe" class="level2"><h2 class="anchored" data-anchor-id="create-a-dataframe">Create a dataframe</h2>
<div class="cell">
<div class="sourceCode" id="cb1" style="background: #f1f3f5;"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span class="kw" style="color: #003B4F;"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op" style="color: #5E5E5E;">(</span><span class="va" style="color: #111111;"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op" style="color: #5E5E5E;">)</span></code></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching packages ────────────────────────────────── tidyverse 1.3.2.9000 ──
✔ ggplot2   3.4.0           ✔ dplyr     1.0.99.9000
✔ tibble    3.1.8           ✔ stringr   1.4.1      
✔ tidyr     1.2.1           ✔ forcats   0.5.1      
✔ readr     2.1.3           ✔ lubridate 1.8.0      
✔ purrr     0.3.5           
── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()</code></pre>
</div>
<div class="sourceCode" id="cb3" style="background: #f1f3f5;"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span class="kw" style="color: #003B4F;"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op" style="color: #5E5E5E;">(</span><span class="va" style="color: #111111;"><a href="https://magrittr.tidyverse.org">magrittr</a></span><span class="op" style="color: #5E5E5E;">)</span></code></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'magrittr'

The following object is masked from 'package:purrr':

    set_names

The following object is masked from 'package:tidyr':

    extract</code></pre>
</div>
<div class="sourceCode" id="cb5" style="background: #f1f3f5;"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span class="kw" style="color: #003B4F;"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op" style="color: #5E5E5E;">(</span><span class="va" style="color: #111111;"><a href="https://r-datatable.com">data.table</a></span><span class="op" style="color: #5E5E5E;">)</span></code></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'data.table'

The following objects are masked from 'package:lubridate':

    hour, isoweek, mday, minute, month, quarter, second, wday, week,
    yday, year

The following objects are masked from 'package:dplyr':

    between, first, last

The following object is masked from 'package:purrr':

    transpose</code></pre>
</div>
<div class="sourceCode" id="cb7" style="background: #f1f3f5;"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span class="co" style="color: #5E5E5E;"># create a df of"streaks" or repeats</span>
<span class="va" style="color: #111111;">ex_df</span> <span class="op" style="color: #5E5E5E;">&lt;-</span> <span class="fu" style="color: #4758AB;"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op" style="color: #5E5E5E;">(</span>
  x <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op" style="color: #5E5E5E;">(</span><span class="st" style="color: #20794D;">"a"</span>, <span class="st" style="color: #20794D;">"a"</span>, <span class="fu" style="color: #4758AB;"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op" style="color: #5E5E5E;">(</span><span class="st" style="color: #20794D;">"b"</span>, <span class="fl" style="color: #AD0000;">3</span><span class="op" style="color: #5E5E5E;">)</span>, <span class="fu" style="color: #4758AB;"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op" style="color: #5E5E5E;">(</span><span class="st" style="color: #20794D;">"a"</span>, <span class="fl" style="color: #AD0000;">5</span><span class="op" style="color: #5E5E5E;">)</span><span class="op" style="color: #5E5E5E;">)</span>,
  num <span class="op" style="color: #5E5E5E;">=</span> <span class="fl" style="color: #AD0000;">1</span><span class="op" style="color: #5E5E5E;">:</span><span class="fl" style="color: #AD0000;">10</span>
<span class="op" style="color: #5E5E5E;">)</span> 

<span class="co" style="color: #5E5E5E;"># print the data</span>
<span class="va" style="color: #111111;">ex_df</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 2
   x       num
   &lt;chr&gt; &lt;int&gt;
 1 a         1
 2 a         2
 3 b         3
 4 b         4
 5 b         5
 6 a         6
 7 a         7
 8 a         8
 9 a         9
10 a        10</code></pre>
</div>
</div>
</section><section id="example-of-rle-or-run-length-encoding" class="level2"><h2 class="anchored" data-anchor-id="example-of-rle-or-run-length-encoding">Example of rle or run-length encoding</h2>
<div class="cell">
<div class="sourceCode" id="cb9" style="background: #f1f3f5;"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span class="co" style="color: #5E5E5E;"># rle or run-length encoding</span>
<span class="co" style="color: #5E5E5E;"># summarizes a vector into the length of each repeat</span>
<span class="co" style="color: #5E5E5E;"># and the value that is repeated</span>
<span class="co" style="color: #5E5E5E;"># technically this is a form of recoverable data compression</span>
<span class="co" style="color: #5E5E5E;"># IE you end up with fewer bytes but it tells you what a long vector</span>
<span class="co" style="color: #5E5E5E;"># could be, and can be recreated</span>

<span class="co" style="color: #5E5E5E;"># this can be read as the betters a, b, a</span>
<span class="co" style="color: #5E5E5E;"># where the first a is repeated 2x</span>
<span class="co" style="color: #5E5E5E;"># the b is repeated 3x</span>
<span class="co" style="color: #5E5E5E;"># the next a is repeated 5x</span>
<span class="fu" style="color: #4758AB;"><a href="https://rdrr.io/r/base/rle.html">rle</a></span><span class="op" style="color: #5E5E5E;">(</span><span class="va" style="color: #111111;">ex_df</span><span class="op" style="color: #5E5E5E;">$</span><span class="va" style="color: #111111;">x</span><span class="op" style="color: #5E5E5E;">)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Run Length Encoding
  lengths: int [1:3] 2 3 5
  values : chr [1:3] "a" "b" "a"</code></pre>
</div>
</div>
</section><section id="example-of-rleid" class="level2"><h2 class="anchored" data-anchor-id="example-of-rleid">Example of rleid</h2>
<div class="cell">
<div class="sourceCode" id="cb11" style="background: #f1f3f5;"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span class="co" style="color: #5E5E5E;"># rleid() generates the ids or repeated group of equal length</span>
<span class="co" style="color: #5E5E5E;"># to the original vector</span>

<span class="va" style="color: #111111;">ex_df</span><span class="op" style="color: #5E5E5E;">$</span><span class="va" style="color: #111111;">x</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "a" "a" "b" "b" "b" "a" "a" "a" "a" "a"</code></pre>
</div>
<div class="sourceCode" id="cb13" style="background: #f1f3f5;"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span class="fu" style="color: #4758AB;">data.table</span><span class="fu" style="color: #4758AB;">::</span><span class="fu" style="color: #4758AB;"><a href="https://Rdatatable.gitlab.io/data.table/reference/rleid.html">rleid</a></span><span class="op" style="color: #5E5E5E;">(</span><span class="va" style="color: #111111;">ex_df</span><span class="op" style="color: #5E5E5E;">$</span><span class="va" style="color: #111111;">x</span><span class="op" style="color: #5E5E5E;">)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 1 1 2 2 2 3 3 3 3 3</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode" id="cb15" style="background: #f1f3f5;"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span class="co" style="color: #5E5E5E;"># it can be used on a vector, in a dataframe, in a datatable or a tibble</span>
<span class="co" style="color: #5E5E5E;"># note that it can be used within mutate() since it returns</span>
<span class="co" style="color: #5E5E5E;"># a vector of equal length, ie the number of rows is not changed</span>
<span class="va" style="color: #111111;">ex_df</span> <span class="op" style="color: #5E5E5E;"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu" style="color: #4758AB;"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op" style="color: #5E5E5E;">(</span>rleid <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;">data.table</span><span class="fu" style="color: #4758AB;">::</span><span class="fu" style="color: #4758AB;"><a href="https://Rdatatable.gitlab.io/data.table/reference/rleid.html">rleid</a></span><span class="op" style="color: #5E5E5E;">(</span><span class="va" style="color: #111111;">x</span><span class="op" style="color: #5E5E5E;">)</span><span class="op" style="color: #5E5E5E;">)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 3
   x       num rleid
   &lt;chr&gt; &lt;int&gt; &lt;int&gt;
 1 a         1     1
 2 a         2     1
 3 b         3     2
 4 b         4     2
 5 b         5     2
 6 a         6     3
 7 a         7     3
 8 a         8     3
 9 a         9     3
10 a        10     3</code></pre>
</div>
</div>
</section><section id="rle-is-a-summary-function" class="level2"><h2 class="anchored" data-anchor-id="rle-is-a-summary-function">rle is a summary function</h2>
<div class="cell">
<div class="sourceCode" id="cb17" style="background: #f1f3f5;"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span class="co" style="color: #5E5E5E;"># note that rle() is a _summary_ function, and generates fewer rows</span>
<span class="va" style="color: #111111;">ex_df</span> <span class="op" style="color: #5E5E5E;"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu" style="color: #4758AB;"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span><span class="op" style="color: #5E5E5E;">(</span>lengths <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;"><a href="https://rdrr.io/r/base/rle.html">rle</a></span><span class="op" style="color: #5E5E5E;">(</span><span class="va" style="color: #111111;">x</span><span class="op" style="color: #5E5E5E;">)</span><span class="op" style="color: #5E5E5E;">$</span><span class="va" style="color: #111111;">lengths</span>,
            values <span class="op" style="color: #5E5E5E;">=</span><span class="fu" style="color: #4758AB;"><a href="https://rdrr.io/r/base/rle.html">rle</a></span><span class="op" style="color: #5E5E5E;">(</span><span class="va" style="color: #111111;">x</span><span class="op" style="color: #5E5E5E;">)</span><span class="op" style="color: #5E5E5E;">$</span><span class="va" style="color: #111111;">values</span><span class="op" style="color: #5E5E5E;">)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 2
  lengths values
    &lt;int&gt; &lt;chr&gt; 
1       2 a     
2       3 b     
3       5 a     </code></pre>
</div>
</div>
</section><section id="recover-the-original-data" class="level2"><h2 class="anchored" data-anchor-id="recover-the-original-data">Recover the original data</h2>
<div class="cell">
<div class="sourceCode" id="cb19" style="background: #f1f3f5;"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span class="co" style="color: #5E5E5E;"># we can create a summary</span>
<span class="co" style="color: #5E5E5E;"># and then recover the original data</span>
<span class="va" style="color: #111111;">final_df</span> <span class="op" style="color: #5E5E5E;">&lt;-</span> <span class="va" style="color: #111111;">ex_df</span> <span class="op" style="color: #5E5E5E;"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu" style="color: #4758AB;"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span><span class="op" style="color: #5E5E5E;">(</span>
    lengths <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;"><a href="https://rdrr.io/r/base/rle.html">rle</a></span><span class="op" style="color: #5E5E5E;">(</span><span class="va" style="color: #111111;">x</span><span class="op" style="color: #5E5E5E;">)</span><span class="op" style="color: #5E5E5E;">$</span><span class="va" style="color: #111111;">lengths</span>,
    values <span class="op" style="color: #5E5E5E;">=</span><span class="fu" style="color: #4758AB;"><a href="https://rdrr.io/r/base/rle.html">rle</a></span><span class="op" style="color: #5E5E5E;">(</span><span class="va" style="color: #111111;">x</span><span class="op" style="color: #5E5E5E;">)</span><span class="op" style="color: #5E5E5E;">$</span><span class="va" style="color: #111111;">values</span>
    <span class="op" style="color: #5E5E5E;">)</span> <span class="op" style="color: #5E5E5E;"><a href="https://magrittr.tidyverse.org/reference/tee.html">%T&gt;%</a></span> <span class="fu" style="color: #4758AB;"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op" style="color: #5E5E5E;">(</span><span class="op" style="color: #5E5E5E;">)</span> <span class="op" style="color: #5E5E5E;"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu" style="color: #4758AB;"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span><span class="op" style="color: #5E5E5E;">(</span>
    x <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op" style="color: #5E5E5E;">(</span><span class="va" style="color: #111111;">values</span>, times<span class="op" style="color: #5E5E5E;">=</span><span class="va" style="color: #111111;">lengths</span><span class="op" style="color: #5E5E5E;">)</span>,
    num <span class="op" style="color: #5E5E5E;">=</span> <span class="fl" style="color: #AD0000;">1</span><span class="op" style="color: #5E5E5E;">:</span><span class="fu" style="color: #4758AB;"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op" style="color: #5E5E5E;">(</span><span class="va" style="color: #111111;">lengths</span><span class="op" style="color: #5E5E5E;">)</span>
    <span class="op" style="color: #5E5E5E;">)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 2
  lengths values
    &lt;int&gt; &lt;chr&gt; 
1       2 a     
2       3 b     
3       5 a     </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode" id="cb21" style="background: #f1f3f5;"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span class="va" style="color: #111111;">final_df</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 2
   x       num
   &lt;chr&gt; &lt;int&gt;
 1 a         1
 2 a         2
 3 b         3
 4 b         4
 5 b         5
 6 a         6
 7 a         7
 8 a         8
 9 a         9
10 a        10</code></pre>
</div>
<div class="sourceCode" id="cb23" style="background: #f1f3f5;"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span class="co" style="color: #5E5E5E;"># original and recreation are identical</span>
<span class="fu" style="color: #4758AB;"><a href="https://Rdatatable.gitlab.io/data.table/reference/all.equal.data.table.html">all.equal</a></span><span class="op" style="color: #5E5E5E;">(</span><span class="va" style="color: #111111;">final_df</span>, <span class="va" style="color: #111111;">ex_df</span><span class="op" style="color: #5E5E5E;">)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
<div class="callout-tip callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-1-contents" aria-controls="callout-1" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Expand for Session Info
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-1" class="callout-1-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>─ Session info ───────────────────────────────────────────────────────────────
 setting  value
 version  R version 4.2.0 (2022-04-22)
 os       macOS Monterey 12.6
 system   aarch64, darwin20
 ui       X11
 language (EN)
 collate  en_US.UTF-8
 ctype    en_US.UTF-8
 tz       America/Chicago
 date     2022-11-27
 pandoc   2.19.2 @ /Applications/RStudio.app/Contents/Resources/app/quarto/bin/tools/ (via rmarkdown)
 quarto   1.2.269 @ /usr/local/bin/quarto

─ Packages ───────────────────────────────────────────────────────────────────
 package     * version     date (UTC) lib source
 data.table  * 1.14.3      2022-05-09 [1] Github (Rdatatable/data.table@e9a323d)
 dplyr       * 1.0.99.9000 2022-11-18 [1] Github (tidyverse/dplyr@0a55cf5)
 forcats     * 0.5.1       2021-01-27 [1] CRAN (R 4.2.0)
 ggplot2     * 3.4.0       2022-11-04 [1] CRAN (R 4.2.0)
 lubridate   * 1.8.0       2021-10-07 [1] CRAN (R 4.2.0)
 magrittr    * 2.0.3       2022-03-30 [1] CRAN (R 4.2.0)
 purrr       * 0.3.5       2022-10-06 [1] CRAN (R 4.2.0)
 readr       * 2.1.3       2022-10-01 [1] CRAN (R 4.2.0)
 sessioninfo * 1.2.2       2021-12-06 [1] CRAN (R 4.2.0)
 stringr     * 1.4.1       2022-08-20 [1] CRAN (R 4.2.0)
 tibble      * 3.1.8       2022-07-22 [1] CRAN (R 4.2.0)
 tidyr       * 1.2.1       2022-09-08 [1] CRAN (R 4.2.0)
 tidyverse   * 1.3.2.9000  2022-08-16 [1] Github (tidyverse/tidyverse@3be8283)

 [1] /Library/Frameworks/R.framework/Versions/4.2-arm64/Resources/library

──────────────────────────────────────────────────────────────────────────────</code></pre>
</div>
</div>
</div>
</div>
</div>


</section> ]]></description>
  <guid>https://themockup.blog/til/rleid.html</guid>
  <pubDate>Sun, 27 Nov 2022 06:00:00 GMT</pubDate>
</item>
<item>
  <title>Pitch sequence aggregation</title>
  <link>https://themockup.blog/til/pitches.html</link>
  <description><![CDATA[ <section id="generate-pitches" class="level2"><h2 class="anchored" data-anchor-id="generate-pitches">Generate pitches</h2>
<div class="cell">
<div class="sourceCode" id="cb1" style="background: #f1f3f5;"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span class="kw" style="color: #003B4F;"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op" style="color: #5E5E5E;">(</span><span class="va" style="color: #111111;"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op" style="color: #5E5E5E;">)</span></code></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching packages ────────────────────────────────── tidyverse 1.3.2.9000 ──
✔ ggplot2   3.4.0           ✔ dplyr     1.0.99.9000
✔ tibble    3.1.8           ✔ stringr   1.4.1      
✔ tidyr     1.2.1           ✔ forcats   0.5.1      
✔ readr     2.1.3           ✔ lubridate 1.8.0      
✔ purrr     0.3.5           
── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()</code></pre>
</div>
<div class="sourceCode" id="cb3" style="background: #f1f3f5;"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span class="va" style="color: #111111;">pitches</span> <span class="op" style="color: #5E5E5E;">&lt;-</span> <span class="fu" style="color: #4758AB;"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op" style="color: #5E5E5E;">(</span>
  <span class="st" style="color: #20794D;">"Two Seam FB"</span>,
  <span class="st" style="color: #20794D;">"Cutter"</span>,
  <span class="st" style="color: #20794D;">"Slider"</span>,
  <span class="st" style="color: #20794D;">"Knuckleball"</span>,
  <span class="st" style="color: #20794D;">"Change Up"</span>
<span class="op" style="color: #5E5E5E;">)</span></code></pre></div>
</div>
<div class="cell">
<div class="sourceCode" id="cb4" style="background: #f1f3f5;"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span class="fu" style="color: #4758AB;"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op" style="color: #5E5E5E;">(</span><span class="fl" style="color: #AD0000;">37</span><span class="op" style="color: #5E5E5E;">)</span>
<span class="va" style="color: #111111;">fake_pitch</span> <span class="op" style="color: #5E5E5E;">&lt;-</span> <span class="fu" style="color: #4758AB;"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op" style="color: #5E5E5E;">(</span>
  at_bat <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op" style="color: #5E5E5E;">(</span><span class="fl" style="color: #AD0000;">1</span><span class="op" style="color: #5E5E5E;">:</span><span class="fl" style="color: #AD0000;">5</span>, each <span class="op" style="color: #5E5E5E;">=</span> <span class="fl" style="color: #AD0000;">3</span><span class="op" style="color: #5E5E5E;">)</span>
<span class="op" style="color: #5E5E5E;">)</span> <span class="op" style="color: #5E5E5E;"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu" style="color: #4758AB;"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op" style="color: #5E5E5E;">(</span>pitch_type <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;"><a href="https://rdrr.io/r/base/sample.html">sample</a></span><span class="op" style="color: #5E5E5E;">(</span><span class="va" style="color: #111111;">pitches</span>, size <span class="op" style="color: #5E5E5E;">=</span> <span class="fl" style="color: #AD0000;">15</span>, replace <span class="op" style="color: #5E5E5E;">=</span> <span class="cn" style="color: #8f5902;">TRUE</span><span class="op" style="color: #5E5E5E;">)</span><span class="op" style="color: #5E5E5E;">)</span>

<span class="co" style="color: #5E5E5E;"># include 1st pitch output</span>
<span class="va" style="color: #111111;">fake_pitch</span> <span class="op" style="color: #5E5E5E;"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu" style="color: #4758AB;"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op" style="color: #5E5E5E;">(</span><span class="va" style="color: #111111;">at_bat</span><span class="op" style="color: #5E5E5E;">)</span> <span class="op" style="color: #5E5E5E;"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu" style="color: #4758AB;"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op" style="color: #5E5E5E;">(</span>pitch_n <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;"><a href="https://dplyr.tidyverse.org/reference/row_number.html">row_number</a></span><span class="op" style="color: #5E5E5E;">(</span><span class="op" style="color: #5E5E5E;">)</span><span class="op" style="color: #5E5E5E;">)</span> <span class="op" style="color: #5E5E5E;"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu" style="color: #4758AB;"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op" style="color: #5E5E5E;">(</span>
    pitch_seq <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;">slider</span><span class="fu" style="color: #4758AB;">::</span><span class="fu" style="color: #4758AB;"><a href="https://rdrr.io/pkg/slider/man/slide2.html">slide2_chr</a></span><span class="op" style="color: #5E5E5E;">(</span>
      <span class="va" style="color: #111111;">pitch_type</span>,
      <span class="va" style="color: #111111;">pitch_n</span>,
      <span class="op" style="color: #5E5E5E;">~</span><span class="fu" style="color: #4758AB;"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op" style="color: #5E5E5E;">(</span><span class="va" style="color: #111111;">.x</span>,collapse <span class="op" style="color: #5E5E5E;">=</span> <span class="st" style="color: #20794D;">"-"</span><span class="op" style="color: #5E5E5E;">)</span>,
      .before <span class="op" style="color: #5E5E5E;">=</span> <span class="fl" style="color: #AD0000;">1L</span>
    <span class="op" style="color: #5E5E5E;">)</span>
  <span class="op" style="color: #5E5E5E;">)</span> <span class="op" style="color: #5E5E5E;"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu" style="color: #4758AB;"><a href="https://dplyr.tidyverse.org/reference/group_by.html">ungroup</a></span><span class="op" style="color: #5E5E5E;">(</span><span class="op" style="color: #5E5E5E;">)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 15 × 4
   at_bat pitch_type  pitch_n pitch_seq              
    &lt;int&gt; &lt;chr&gt;         &lt;int&gt; &lt;chr&gt;                  
 1      1 Cutter            1 Cutter                 
 2      1 Slider            2 Cutter-Slider          
 3      1 Change Up         3 Slider-Change Up       
 4      2 Knuckleball       1 Knuckleball            
 5      2 Two Seam FB       2 Knuckleball-Two Seam FB
 6      2 Knuckleball       3 Two Seam FB-Knuckleball
 7      3 Knuckleball       1 Knuckleball            
 8      3 Change Up         2 Knuckleball-Change Up  
 9      3 Cutter            3 Change Up-Cutter       
10      4 Knuckleball       1 Knuckleball            
11      4 Slider            2 Knuckleball-Slider     
12      4 Two Seam FB       3 Slider-Two Seam FB     
13      5 Knuckleball       1 Knuckleball            
14      5 Slider            2 Knuckleball-Slider     
15      5 Slider            3 Slider-Slider          </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode" id="cb6" style="background: #f1f3f5;"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span class="co" style="color: #5E5E5E;"># output NA for 1st pitch</span>
<span class="va" style="color: #111111;">fake_pitch</span> <span class="op" style="color: #5E5E5E;"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu" style="color: #4758AB;"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op" style="color: #5E5E5E;">(</span><span class="va" style="color: #111111;">at_bat</span><span class="op" style="color: #5E5E5E;">)</span> <span class="op" style="color: #5E5E5E;"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu" style="color: #4758AB;"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op" style="color: #5E5E5E;">(</span>pitch_n <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;"><a href="https://dplyr.tidyverse.org/reference/row_number.html">row_number</a></span><span class="op" style="color: #5E5E5E;">(</span><span class="op" style="color: #5E5E5E;">)</span><span class="op" style="color: #5E5E5E;">)</span> <span class="op" style="color: #5E5E5E;"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu" style="color: #4758AB;"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op" style="color: #5E5E5E;">(</span>
    pitch_seq <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;">slider</span><span class="fu" style="color: #4758AB;">::</span><span class="fu" style="color: #4758AB;"><a href="https://rdrr.io/pkg/slider/man/slide2.html">slide2_chr</a></span><span class="op" style="color: #5E5E5E;">(</span>
      <span class="va" style="color: #111111;">pitch_type</span>,
      <span class="va" style="color: #111111;">pitch_n</span>,
      <span class="op" style="color: #5E5E5E;">~</span><span class="fu" style="color: #4758AB;"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op" style="color: #5E5E5E;">(</span><span class="va" style="color: #111111;">.x</span>,collapse <span class="op" style="color: #5E5E5E;">=</span> <span class="st" style="color: #20794D;">"-"</span><span class="op" style="color: #5E5E5E;">)</span>,
      .before <span class="op" style="color: #5E5E5E;">=</span> <span class="fl" style="color: #AD0000;">1L</span>,
      .complete <span class="op" style="color: #5E5E5E;">=</span> <span class="cn" style="color: #8f5902;">TRUE</span> <span class="co" style="color: #5E5E5E;"># force complete measures (at least 2x pitches)</span>
    <span class="op" style="color: #5E5E5E;">)</span>
  <span class="op" style="color: #5E5E5E;">)</span> <span class="op" style="color: #5E5E5E;"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu" style="color: #4758AB;"><a href="https://dplyr.tidyverse.org/reference/group_by.html">ungroup</a></span><span class="op" style="color: #5E5E5E;">(</span><span class="op" style="color: #5E5E5E;">)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 15 × 4
   at_bat pitch_type  pitch_n pitch_seq              
    &lt;int&gt; &lt;chr&gt;         &lt;int&gt; &lt;chr&gt;                  
 1      1 Cutter            1 &lt;NA&gt;                   
 2      1 Slider            2 Cutter-Slider          
 3      1 Change Up         3 Slider-Change Up       
 4      2 Knuckleball       1 &lt;NA&gt;                   
 5      2 Two Seam FB       2 Knuckleball-Two Seam FB
 6      2 Knuckleball       3 Two Seam FB-Knuckleball
 7      3 Knuckleball       1 &lt;NA&gt;                   
 8      3 Change Up         2 Knuckleball-Change Up  
 9      3 Cutter            3 Change Up-Cutter       
10      4 Knuckleball       1 &lt;NA&gt;                   
11      4 Slider            2 Knuckleball-Slider     
12      4 Two Seam FB       3 Slider-Two Seam FB     
13      5 Knuckleball       1 &lt;NA&gt;                   
14      5 Slider            2 Knuckleball-Slider     
15      5 Slider            3 Slider-Slider          </code></pre>
</div>
</div>
</section><section id="plot-it" class="level2"><h2 class="anchored" data-anchor-id="plot-it">Plot it</h2>
<div class="cell">
<div class="sourceCode" id="cb8" style="background: #f1f3f5;"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span class="fu" style="color: #4758AB;"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op" style="color: #5E5E5E;">(</span><span class="fl" style="color: #AD0000;">37</span><span class="op" style="color: #5E5E5E;">)</span>

<span class="va" style="color: #111111;">fake_pitch</span> <span class="op" style="color: #5E5E5E;">&lt;-</span> <span class="fu" style="color: #4758AB;"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op" style="color: #5E5E5E;">(</span>
  at_bat <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op" style="color: #5E5E5E;">(</span><span class="fu" style="color: #4758AB;"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op" style="color: #5E5E5E;">(</span><span class="fl" style="color: #AD0000;">1</span><span class="op" style="color: #5E5E5E;">:</span><span class="fl" style="color: #AD0000;">5</span><span class="op" style="color: #5E5E5E;">)</span>, each <span class="op" style="color: #5E5E5E;">=</span> <span class="fl" style="color: #AD0000;">9</span><span class="op" style="color: #5E5E5E;">)</span>,
  batter <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op" style="color: #5E5E5E;">(</span><span class="fu" style="color: #4758AB;"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op" style="color: #5E5E5E;">(</span><span class="fu" style="color: #4758AB;"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op" style="color: #5E5E5E;">(</span><span class="st" style="color: #20794D;">"A.Name"</span>, <span class="st" style="color: #20794D;">"B.Name"</span>, <span class="st" style="color: #20794D;">"C.Name"</span><span class="op" style="color: #5E5E5E;">)</span>, each <span class="op" style="color: #5E5E5E;">=</span> <span class="fl" style="color: #AD0000;">3</span><span class="op" style="color: #5E5E5E;">)</span>, <span class="fl" style="color: #AD0000;">5</span><span class="op" style="color: #5E5E5E;">)</span>
<span class="op" style="color: #5E5E5E;">)</span> <span class="op" style="color: #5E5E5E;"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu" style="color: #4758AB;"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op" style="color: #5E5E5E;">(</span>pitch_type <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;"><a href="https://rdrr.io/r/base/sample.html">sample</a></span><span class="op" style="color: #5E5E5E;">(</span><span class="va" style="color: #111111;">pitches</span>, size <span class="op" style="color: #5E5E5E;">=</span> <span class="fl" style="color: #AD0000;">45</span>, replace <span class="op" style="color: #5E5E5E;">=</span> <span class="cn" style="color: #8f5902;">TRUE</span><span class="op" style="color: #5E5E5E;">)</span><span class="op" style="color: #5E5E5E;">)</span>

<span class="va" style="color: #111111;">fake_pitch</span> <span class="op" style="color: #5E5E5E;"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu" style="color: #4758AB;"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op" style="color: #5E5E5E;">(</span><span class="va" style="color: #111111;">at_bat</span><span class="op" style="color: #5E5E5E;">)</span> <span class="op" style="color: #5E5E5E;"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu" style="color: #4758AB;"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op" style="color: #5E5E5E;">(</span>pitch_n <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;"><a href="https://dplyr.tidyverse.org/reference/row_number.html">row_number</a></span><span class="op" style="color: #5E5E5E;">(</span><span class="op" style="color: #5E5E5E;">)</span><span class="op" style="color: #5E5E5E;">)</span> <span class="op" style="color: #5E5E5E;"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu" style="color: #4758AB;"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op" style="color: #5E5E5E;">(</span>
    pitch_seq <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;">slider</span><span class="fu" style="color: #4758AB;">::</span><span class="fu" style="color: #4758AB;"><a href="https://rdrr.io/pkg/slider/man/slide2.html">slide2_chr</a></span><span class="op" style="color: #5E5E5E;">(</span>
      <span class="va" style="color: #111111;">pitch_type</span>,
      <span class="va" style="color: #111111;">pitch_n</span>,
      <span class="op" style="color: #5E5E5E;">~</span><span class="fu" style="color: #4758AB;"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op" style="color: #5E5E5E;">(</span><span class="va" style="color: #111111;">.x</span>,collapse <span class="op" style="color: #5E5E5E;">=</span> <span class="st" style="color: #20794D;">"-"</span><span class="op" style="color: #5E5E5E;">)</span>,
      .before <span class="op" style="color: #5E5E5E;">=</span> <span class="fl" style="color: #AD0000;">1L</span>,
      .complete <span class="op" style="color: #5E5E5E;">=</span> <span class="cn" style="color: #8f5902;">TRUE</span>
    <span class="op" style="color: #5E5E5E;">)</span>
  <span class="op" style="color: #5E5E5E;">)</span> <span class="op" style="color: #5E5E5E;"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu" style="color: #4758AB;"><a href="https://dplyr.tidyverse.org/reference/group_by.html">ungroup</a></span><span class="op" style="color: #5E5E5E;">(</span><span class="op" style="color: #5E5E5E;">)</span> <span class="op" style="color: #5E5E5E;"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu" style="color: #4758AB;"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span><span class="op" style="color: #5E5E5E;">(</span><span class="va" style="color: #111111;">at_bat</span>, <span class="va" style="color: #111111;">pitch_seq</span><span class="op" style="color: #5E5E5E;">)</span> <span class="op" style="color: #5E5E5E;"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu" style="color: #4758AB;"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op" style="color: #5E5E5E;">(</span><span class="op" style="color: #5E5E5E;">!</span><span class="fu" style="color: #4758AB;"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op" style="color: #5E5E5E;">(</span><span class="va" style="color: #111111;">pitch_seq</span><span class="op" style="color: #5E5E5E;">)</span><span class="op" style="color: #5E5E5E;">)</span> <span class="op" style="color: #5E5E5E;"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu" style="color: #4758AB;"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op" style="color: #5E5E5E;">(</span><span class="va" style="color: #111111;">pitch_seq</span><span class="op" style="color: #5E5E5E;">)</span> <span class="op" style="color: #5E5E5E;"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu" style="color: #4758AB;"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op" style="color: #5E5E5E;">(</span>roll_n <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;"><a href="https://rdrr.io/r/base/cumsum.html">cumsum</a></span><span class="op" style="color: #5E5E5E;">(</span><span class="va" style="color: #111111;">n</span><span class="op" style="color: #5E5E5E;">)</span><span class="op" style="color: #5E5E5E;">)</span> <span class="op" style="color: #5E5E5E;"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu" style="color: #4758AB;"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op" style="color: #5E5E5E;">(</span><span class="fu" style="color: #4758AB;"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op" style="color: #5E5E5E;">(</span>x <span class="op" style="color: #5E5E5E;">=</span> <span class="va" style="color: #111111;">at_bat</span>, y <span class="op" style="color: #5E5E5E;">=</span> <span class="va" style="color: #111111;">roll_n</span>, group <span class="op" style="color: #5E5E5E;">=</span> <span class="fl" style="color: #AD0000;">1</span><span class="op" style="color: #5E5E5E;">)</span><span class="op" style="color: #5E5E5E;">)</span> <span class="op" style="color: #5E5E5E;">+</span>
  <span class="fu" style="color: #4758AB;"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_step</a></span><span class="op" style="color: #5E5E5E;">(</span><span class="fu" style="color: #4758AB;"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op" style="color: #5E5E5E;">(</span>group <span class="op" style="color: #5E5E5E;">=</span> <span class="fl" style="color: #AD0000;">1</span><span class="op" style="color: #5E5E5E;">)</span>, direction <span class="op" style="color: #5E5E5E;">=</span> <span class="st" style="color: #20794D;">"hv"</span><span class="op" style="color: #5E5E5E;">)</span> <span class="op" style="color: #5E5E5E;">+</span>
  <span class="fu" style="color: #4758AB;"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op" style="color: #5E5E5E;">(</span><span class="op" style="color: #5E5E5E;">)</span> <span class="op" style="color: #5E5E5E;">+</span>
  <span class="fu" style="color: #4758AB;"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html">facet_wrap</a></span><span class="op" style="color: #5E5E5E;">(</span><span class="op" style="color: #5E5E5E;">~</span><span class="va" style="color: #111111;">pitch_seq</span><span class="op" style="color: #5E5E5E;">)</span> <span class="op" style="color: #5E5E5E;">+</span>
  <span class="fu" style="color: #4758AB;"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_y_continuous</a></span><span class="op" style="color: #5E5E5E;">(</span>limits <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op" style="color: #5E5E5E;">(</span><span class="fl" style="color: #AD0000;">0</span>, <span class="fl" style="color: #AD0000;">5</span><span class="op" style="color: #5E5E5E;">)</span><span class="op" style="color: #5E5E5E;">)</span></code></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_path()`: Each group consists of only one observation.
ℹ Do you need to adjust the group aesthetic?
`geom_path()`: Each group consists of only one observation.
ℹ Do you need to adjust the group aesthetic?
`geom_path()`: Each group consists of only one observation.
ℹ Do you need to adjust the group aesthetic?
`geom_path()`: Each group consists of only one observation.
ℹ Do you need to adjust the group aesthetic?
`geom_path()`: Each group consists of only one observation.
ℹ Do you need to adjust the group aesthetic?
`geom_path()`: Each group consists of only one observation.
ℹ Do you need to adjust the group aesthetic?
`geom_path()`: Each group consists of only one observation.
ℹ Do you need to adjust the group aesthetic?
`geom_path()`: Each group consists of only one observation.
ℹ Do you need to adjust the group aesthetic?
`geom_path()`: Each group consists of only one observation.
ℹ Do you need to adjust the group aesthetic?</code></pre>
</div>
<div class="cell-output-display">
<p><img src="https://themockup.blog/til/pitches_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid" width="672"></p>
</div>
</div>


</section> ]]></description>
  <guid>https://themockup.blog/til/pitches.html</guid>
  <pubDate>Sun, 27 Nov 2022 06:00:00 GMT</pubDate>
</item>
</channel>
</rss>
